(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var c=i[o];0!==r[c]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},r={app:0},a=[];function o(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"a9dbf15d"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(t){var e=[],i=r[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,n){i=r[t]=[e,n]}));e.push(i[2]=n);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=o(t);var l=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(u);var i=r[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,i[1](l)}r[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/mri-vuewer.dev/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;a.push([1,"chunk-vendors"]),i()})({0:function(t,e){},"0bad":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",[i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"indigo"}},[t._v("mdi-file-music")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(t.audioStream.codec_name))])],1)],1),i("v-list-item",[i("v-list-item-action"),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.audioStream.sample_rate)+" Hz, "+t._s(t.audioStream.channel_layout)+", "+t._s(t.audioStream.sample_fmt)+", "+t._s(t.audioStream.bitrate)+" kb/s ")])],1)],1)],1)},r=[],a={name:"m-audio-stream-list",props:{audioStream:{type:Object}}},o=a,s=i("2877"),c=i("6544"),l=i.n(c),u=i("132d"),d=i("8860"),f=i("da13"),m=i("1800"),h=i("5d23"),v=i("34c3"),p=Object(s["a"])(o,n,r,!1,null,"1bf207ea",null);e["a"]=p.exports;l()(p,{VIcon:u["a"],VList:d["a"],VListItem:f["a"],VListItemAction:m["a"],VListItemContent:h["b"],VListItemIcon:v["a"],VListItemTitle:h["d"]})},1:function(t,e,i){t.exports=i("56d7")},10:function(t,e){},11:function(t,e){},12:function(t,e){},2:function(t,e){},"209a":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{fullscreen:t.$store.state.current.layout.mini,title:"Setting"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{tile:""}},[i("v-card-text",[i("m-setting-from")],1)],1)],1)},r=[],a=i("9621"),o=i("7c54"),s={name:"m-setting-dialog",components:{MCardDialog:a["a"],MSettingFrom:o["a"]},props:{value:{type:Boolean}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("b0af"),m=i("99d9"),h=Object(l["a"])(c,n,r,!1,null,"09e7e462",null);e["a"]=h.exports;d()(h,{VCard:f["a"],VCardText:m["c"]})},"21f0":function(t,e,i){"use strict";i("99af"),i("4de4"),i("c975"),i("a15b"),i("d81d"),i("b0c0"),i("a9e3"),i("d3b7"),i("ac1f"),i("466d"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7");var n=i("b85c"),r=i("fcfb"),a=i.n(r),o=function(t){var e="",i="",n=a()({arguments:["-version"],print:function(t){e+=t+"\n"},printErr:function(t){i+=t+"\n"},onExit:function(n){if(0!=n)throw new Error(i);t(n,e)}});return n},s=function(t,e){var i=new Uint8Array(t),r="",o=a()({MEMFS:[{name:"data.mp4",data:i}],arguments:["-i","data.mp4"],print:function(t){r+=t+"\n"},printErr:function(t){r+=t+"\n"},onExit:function(){var t={};if(r){var i,a=Object(n["a"])(r.split("\n"));try{for(a.s();!(i=a.n()).done;){var o=i.value;if(~o.indexOf("Duration")){var s=o.split(",")[0].split(": ")[1].split(":").map((function(t){return Number(t)}));t.duration=60*s[0]*60+60*s[1]+s[2]}if(~o.indexOf("Stream")){var c=o.split(": ");if(3==c.length){var l=c[2].split(", ");if("Video"==c[1]){t.videoStream={};var u=l.filter((function(t){return t.match(/^([1-9]\d*|0)(\.\d+)?x([1-9]\d*|0)(\.\d+)?/)}))[0];if(u){var d=u.split(" ")[0].split("x");t.size={width:Number(d[0]),height:Number(d[1])}}t.videoStream.codec_name=l[0],t.videoStream.pix_fmt=l[1],t.videoStream.bitrate=Number(l.filter((function(t){return t.match(/kb\/s/)}))[0].split(" ")[0]),t.videoStream.fps=Number(l.filter((function(t){return t.match(/fps/)}))[0].split(" ")[0]),t.videoStream.tbr=Number(l.filter((function(t){return t.match(/tbr/)}))[0].split(" ")[0]),t.videoStream.tbn=Number(l.filter((function(t){return t.match(/tbn/)}))[0].split(" ")[0]),t.videoStream.tbc=Number(l.filter((function(t){return t.match(/tbc/)}))[0].split(" ")[0])}else t.audioStream={},t.audioStream.codec_name=l[0],t.audioStream.sample_rate=Number(l[1].split(" ")[0]),t.audioStream.channel_layout=l[2],t.audioStream.sample_fmt=l[3],t.audioStream.bitrate=Number(l[4].split(" ")[0])}}}}catch(f){a.e(f)}finally{a.f()}e(t)}}});return o},c=function(t){var e=new Uint8Array(t),i="-i data.avi -vcodec libx264 -pix_fmt yuv420p output.mp4 -c:a libfdk_aac -threads 4 -loglevel error",n=a()({MEMFS:[{name:"data.avi",data:e}],arguments:i.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return n},l=function(t,e,i,n){var r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=new Uint8Array(t),c=String(Math.round(n*i)).length,l="-vf trim=start_frame=".concat(e-1,":end_frame=").concat(e);if(o){var u=o.x,d=o.y,f=o.w,m=o.h;r="-i data.mp4 ".concat(l,",crop=").concat(f,":").concat(m,":").concat(u,":").concat(d," -vsync 0 %0").concat(c,"d.png -loglevel error")}else r="-i data.mp4 ".concat(l," %0").concat(c,"d.png -vsync 0 -loglevel error");var h=a()({MEMFS:[{name:"data.mp4",data:s}],arguments:r.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return h},u=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(r,o){setTimeout((function(){var s,c=new Uint8Array(t),l=String(Math.round(i*e)).length;if(n){var u=n.x,d=n.y,f=n.w,m=n.h;s="-i data.mp4 -vf crop=".concat(f,":").concat(m,":").concat(u,":").concat(d," %0").concat(l,"d.png -loglevel error")}else s="-i data.mp4 %0".concat(l,"d.png -loglevel error");var h=a()({MEMFS:[{name:"data.mp4",data:c}],arguments:s.split(" "),print:function(){},printErr:function(t){return o(t)}});r(h)}))}))},d=function(t){return new Promise((function(e,i){var n=new Uint8Array(t),r="-i data.mp4 -vn -ac 2 -ar 48000 -acodec pcm_s16le -f wav output.wav -loglevel error",o=a()({MEMFS:[{name:"data.mp4",data:n}],arguments:r.split(" "),print:function(){},printErr:function(t){return i(t)}});e(o)}))},f=function(t,e,i){var n=new Uint8Array(t),r="-i data.mp4 -af lowpass=".concat(e,",highpass=").concat(i," out.mp4 -loglevel error"),o=a()({MEMFS:[{name:"data.mp4",data:n}],arguments:r.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return o},m=function(t){var e=new Uint8Array(t),i="-i data.mp4 -af anlmdn out.mp4 -loglevel error",n=a()({MEMFS:[{name:"data.mp4",data:e}],arguments:i.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return n},h=function(t){var e=new Uint8Array(t),i="-i data.mp4 -af afftdn out.mp4 -loglevel error",n=a()({MEMFS:[{name:"data.mp4",data:e}],arguments:i.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return n},v=function(t,e,i){var n=new Uint8Array(t),r=i-e,o=a()({MEMFS:[{name:"data.mp4",data:n}],arguments:["-ss",String(e),"-i","data.mp4","-t",String(r),"-c","copy","output.mp4"],print:function(){},printErr:function(){}});return o},p=function(t){var e=t.map((function(t,e){var i=new Uint8Array(t);return{name:"v".concat(e,".mp4"),data:i}})),i=e.map((function(t){return t.name})).join("|"),n=a()({MEMFS:e,arguments:'-i "concat:'.concat(i,'" -codec copy output.mp4').split(" "),print:function(t){console.log(t)},printErr:function(t){console.log(t)}});return n},g=function(){return{name:null,source:null,fps:null,duration:null,videoStream:null,audioStream:null,originSize:{width:null,height:null}}},x=function(t){return new Blob([t],{type:"video/mp4"})},b=function(t){var e=new FileReader;return e.readAsDataURL(t),new Promise((function(t){e.onloadend=function(){t(e.result)}}))},y={version:o,info:s,bandpass:f,anlmdn:m,afftdn:h,trim:v,concat:p,toWav:d,toMp4:c,toPngs:u,toPng:l,toBlob:x,toBase64:b,initObj:g},w=(i("c19f"),i("b64b"),i("1146")),k=i.n(w);function $(t){var e=Object.keys(t),i={};for(var n in t)i[n]=k.a.utils.aoa_to_sheet(t[n]);return{SheetNames:e,Sheets:i}}function _(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n!=t.length;++n)i[n]=255&t.charCodeAt(n);return e}function S(t){var e={type:"binary"},i=$(t),n=k.a.write(i,e),r=new Blob([_(n)],{type:"application/octet-stream"});return r}var C={dump:S},T=(i("3ca3"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),V=function(t){return new Promise((function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return i(t)}}))},R=function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),r=new Uint8Array(n),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return new Blob([n],{type:i})},I=function(t){for(var e=atob(t.split(",")[1]),i=new ArrayBuffer(e.length),n=new Uint8Array(i),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return i},j=function(t){return new Promise((function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(new Uint8Array(n.result))},n.onerror=function(t){return i(t)}}))},D=function(){var t=Object(T["a"])(regeneratorRuntime.mark((function t(e,i,n){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{mode:"cors",method:"GET"});case 2:if(r=t.sent,200!=r.status){t.next=11;break}return t.next=6,r.blob();case 6:return a=t.sent,o=new File([a],i,n),t.abrupt("return",o);case 11:throw new Error(r.statusText);case 12:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),E=function(t,e){var i=document.createElement("a");document.body.appendChild(i),i.download=e,i.href=t,i.click(),i.remove(),setTimeout((function(){URL.revokeObjectURL(t)}),1e4)},M=function(t,e){var i=URL.createObjectURL(t);E(i,e)},O={toBase64:V,toBlob:R,toBuff:I,toUnit8Array:j,fetch:D,download:M,downloadURL:E},L={read:function(t){return new Promise((function(e,i){var n=new FileReader;n.onloadend=function(t){var i=t.target.result;e(JSON.parse(i))},n.onerror=function(t){return i(t)},n.readAsText(t)}))},toBlob:function(t){return new Blob([JSON.stringify(t,null,"  ")],{type:"application/json"})},toFile:function(t,e){var i=new Blob([JSON.stringify(e,null,"  ")],{type:"application/json"});return i.name=t,i.lastModifiedDate=new Date,i}},z=i("c4e3"),P=i.n(z);function F(t){return new Promise((function(e,i){try{var r,a=new P.a,o=Object(n["a"])(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;a.file(s.name,s.base64.split(",")[1],{base64:!0})}}catch(c){o.e(c)}finally{o.f()}a.generateAsync({type:"blob"}).then((function(t){e(t)})).catch((function(t){return i(t)}))}catch(l){i(l)}}))}var A={toZip:F},N=function(t){var e=[];if(t.points){var i,r=Object(n["a"])(t.points);try{for(r.s();!(i=r.n()).done;){var a=i.value;(a.data.time||0==a.data.time)&&e.push({time:a.data.time,text:a.attributes.label||""})}}catch(o){r.e(o)}finally{r.f()}}return e},B=function(t,e){var i=[],n=[],r=[];if(t.regions){for(var a in t.regions){var o=t.regions[a];if("left"==e){if(o.start){var s=0==a?"":t.regions[a-1].attributes.label||"";i.push({time:o.start,text:s})}}else if("right"==e)o.end&&i.push({time:o.end,text:o.attributes.label||""});else if("up-down"==e)a%2==0?(i.push({time:o.start,text:""}),i.push({time:o.end,text:o.attributes.label||""})):(n.push({time:o.start,text:""}),n.push({time:o.end,text:o.attributes.label||""}));else if(0!=a){if(o.start<t.regions[a-1].end){var c=t.regions[a];i.push({time:c.start,text:""}),i[i.length-2].text="",i.push({time:c.end,text:""}),r.push([a,i.length])}else if(o.start&&o.end){var l=o.attributes.label||"";i.push({time:o.start,text:""}),i.push({time:o.end,text:l})}}else if(o.start&&o.end){var u=o.attributes.label||"";i.push({time:o.start,text:""}),i.push({time:o.end,text:u})}}for(var d in r){var f=r[d][0],m=r[d][1];m&&i[m-2]&&(i[m-2].text=t.regions[f-1].attributes.label||""),d==r.length-1&&(i[m-1].text=t.regions[f].attributes.label||"")}}return n.length?{regions:i,regionsDown:n}:{regions:i}},G={loadTextGrid:function(t,e){var i={},n=N(t);n.length&&(i["points"]={type:"point",values:n});var r=B(t,e),a=r.regions,o=r.regionsDown;return o.length?(i["region_up"]={type:"interval",values:a},i["region_down"]={type:"interval",values:o}):a.length&&(i["regions"]={type:"interval",values:a}),i}},U={loadTextGrid:function(t){var e={};if(t.name&&t.textgrid)return t.textgrid;var i={};for(var n in t){var r=t[n];r.type&&r.values&&("interval"!=r.type&&"point"!=r.type||Array.isArray(r.values)&&(i[n]=r))}return e}},q={ver1:G,ver2:U},K=O.download;e["a"]={video:y,file:O,json:L,zip:A,obj:q,xlsx:C,download:K}},"27a3":function(t,e,i){"use strict";i("99af"),i("c740"),i("a9e3"),i("b64b");e["a"]={computed:{$ws:function(){return this.$store.state.current.wavesurfer||null},$tg:function(){return this.$store.state.current.textgrid||null}},methods:{getDuration:function(){return this.$ws?this.$ws.getDuration():0},getCurrentTime:function(){return this.$ws?this.$ws.getCurrentTime():0},getProgress:function(){return this.getCurrentTime()/this.getDuration()},play:function(t,e){this.$ws&&this.$ws.play(Number(t),Number(e))},playPause:function(){this.$ws&&this.$ws.playPause()},skipBackward:function(){this.$ws&&this.$ws.skipBackward()},skipForward:function(){this.$ws&&this.$ws.skipForward()},skip:function(t){this.$ws&&this.$ws.skip(t)},zoom:function(t){this.$ws&&this.$ws.zoom(t)},seekAndCenter:function(t){this.$ws&&this.$ws.seekAndCenter(t)},seekTo:function(t){this.$ws&&this.$ws.seekTo(t)},seek:function(t,e){var i=this.getDuration(),n=t||0;n=t<=0?0:t,n=t>i?i:t;var r=0==n?0:n/i;e?this.seekAndCenter(r):this.seekTo(r)},addTier:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$vuewer.console.log("mixin:vuewer","add tier (key = ".concat(t,", type=").concat(e,")")),this.$ws&&this.$ws.addTier(t,e,i)},deleteTier:function(t){this.$ws&&(this.$ws.deleteTier(t),this.$vuewer.console.log("mixin:vuewer","delete tier (key=".concat(t,")")))},copyTier:function(t,e,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.$ws&&(this.$ws.copyTier(t,e,i,n,r),this.$vuewer.console.log("mixin:vuewer","copy tier (ref=".concat(t,", key=").concat(e,")")))},updateTier:function(t,e){this.$ws&&(this.$ws.updateTier(t,e),this.$vuewer.console.log("mixin:vuewer","update tier (key=".concat(t,", new key=").concat(name,", type=$.type})")))},addTierValue:function(t,e){this.$ws&&this.$ws.addTierValue(t,e)},setTierValue:function(t,e,i){this.$ws&&this.$ws.setTierValue(t,e,i)},deleteTierValue:function(t,e){this.$ws&&this.$ws.deleteTierValue(t,e)},playTextGrid:function(t,e){this.$ws&&this.$ws.playTextGrid(t,e)},loadTextGrid:function(t){this.$ws&&this.$ws.loadTextGrid(t)},downloadTextGrid:function(t){this.$ws&&this.$ws.downloadTextGrid(t)},$fire:function(t){if(this.$ws){var e=this.$ws.wavesurfer;if(e){var i=Object.keys(e.handlers||{}).findIndex((function(e){return e==t}));if(-1!=i)e.fireEvent(t);else{var n=this.$ws.wavesurfer.drawer,r=Object.keys(n.handlers||{}).findIndex((function(e){return e==t}));-1!=r&&n.fireEvent(t)}}}}}}},"2a04":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"green",fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[t.dialog?i("m-tier-edit-form",{ref:"form",attrs:{tiers:t.tiers,current:t.current},on:{validated:t.onValidated,reject:t.onReject}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("Ok")])],1)],1)],1)},r=[],a=i("9621"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-autocomplete",{attrs:{rules:t.nameRule,items:t.tiers,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name")},model:{value:t.oldName,callback:function(e){t.oldName=e},expression:"oldName"}}),i("v-text-field",{attrs:{rules:t.newNameRUle,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("v-autocomplete",{attrs:{items:t.typeChoice,"item-text":"name","item-value":"val",label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.type")},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)},s=[],c=(i("c975"),i("b0c0"),{name:"WTierEditFrom",data:function(){return{valid:!1,oldName:"",name:"",type:""}},watch:{oldName:function(t,e){if(t!==e){var i=this.$store.state.current.textgrid[t];this.name=t,this.type=i.type}},current:function(t,e){t!==e&&(this.oldName=t)}},props:{tiers:{type:Array},current:{type:String}},computed:{typeChoice:function(){return[{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.interval"),val:"interval"},{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.point"),val:"point"}]},nameRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkNameNotExist(e)}];return e},newNameRUle:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkName(e)}];return e},required:function(){var t=this;return this.$vuetify?[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")}]:[]}},methods:{checkNameNotExist:function(t){return t?-1!=this.tiers.indexOf(t)||this.$vuetify.lang.t("$vuetify.validations.notExist"):this.$vuetify.lang.t("$vuetify.validations.required")},checkName:function(t){return t?!(this.tiers.indexOf(t)>-1&&t!==this.oldName)||this.$vuetify.lang.t("$vuetify.validations.alreadyExists"):this.$vuetify.lang.t("$vuetify.validations.required")},run:function(){if(this.valid){var t={key:this.oldName,item:{name:this.name,type:this.type}};this.$emit("validated",t)}},validate:function(){this.$refs.form.validate(),this.run()},reset:function(){this.resetValidation()},resetValidation:function(){this.$refs.form.resetValidation()}},mounted:function(){this.current&&(this.oldName=this.current)}}),l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("c6a6"),h=i("4bd4"),v=i("8654"),p=Object(u["a"])(l,o,s,!1,null,"22807f03",null),g=p.exports;f()(p,{VAutocomplete:m["a"],VForm:h["a"],VTextField:v["a"]});var x=i("27a3"),b={name:"m-tier-edit-dialog",components:{MCardDialog:a["a"],MTierEditForm:g},mixins:[x["a"]],data:function(){return{title:"$vuetify.forms.tierEdit.title"}},props:{value:{type:Boolean},current:{type:String},tiers:{type:Array}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){t.key&&this.updateTier(t.key,t.item),this.dialog=!1},onReject:function(){this.dialog=!1}}},y=b,w=i("8336"),k=i("b0af"),$=i("99d9"),_=i("2fa4"),S=Object(u["a"])(y,n,r,!1,null,"47b9091d",null);e["a"]=S.exports;f()(S,{VBtn:w["a"],VCard:k["a"],VCardActions:$["a"],VCardText:$["c"],VSpacer:_["a"]})},"2d28":function(t,e,i){t.exports=i.p+"img/logo2.e9a10c64.svg"},"2db4":function(t,e,i){"use strict";i("4de4"),i("c975"),i("a15b"),i("d81d"),i("13d5"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("5319"),i("1276"),i("ddb0"),i("2b3d");var n=i("ade3"),r=i("5530"),a=i("2909"),o=i("b23c"),s=i.n(o),c=i("be7e"),l=i.n(c),u=s.a.builder({dicPath:"/mri-vuewer.dev/dict"}),d=function(t){var e=/[\t|\x20\u3000|\s]+/g,i=/[Ａ-Ｚａ-ｚ０-９！＂＃＄％＆＇（）＊＋，－．／：；＜＝＞？＠［＼］＾＿｀｛｜｝]/g;return t.replace(e," ").replace(i,(function(t){return String.fromCharCode(t.charCodeAt(0)-65248)})).replace(/[‐－―]/g,"-").replace(/[～〜]/g,"~")},f=function(t){return d(t).replace(/^\s+|\s+$/g,"")},m=function(t){var e=/\s*[||,|+]\s*/g;return f(t).replace(/\s*[=|:]\s*/g,"=").replace(/\s*!=\s*/g,"!=").replace(e,"+").replace(/\s/g,"&")},h=function(t){return Object(a["a"])(new URLSearchParams(t).entries()).reduce((function(t,e){var i=e[1].indexOf(" ")>-1?e[1].split(" "):e[1];return Object(r["a"])(Object(r["a"])({},t),{},Object(n["a"])({},e[0],i||!0))}),{})},v=function(t){return h(m(t))},p={isSafe:function(t){return!!t.match(/^[0-9a-zA-Z|\s]*$/)}},g=function(t){return new Promise((function(e,i){try{u.build((function(n,r){try{var a=r.tokenize(t);e(a)}catch(o){i(o)}}))}catch(n){i(n)}}))},x=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.surface_form||""}))),e([])})).catch((function(t){return i(t)}))}))},b=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.reading||t.surface_form}))),e([])})).catch((function(t){return i(t)}))}))},y=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.pronunciation||""}))),e([])})).catch((function(t){return i(t)}))}))},w=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.basic_form||""}))),e([])})).catch((function(t){return i(t)}))}))},k=function(t){return new Promise((function(e,i){g(t).then((function(t){var i=t.map((function(t){var e=[t.pos,t.pos_detail_1,t.pos_detail_2,t.pos_detail_3].filter((function(t){return!!t&&"*"!=t}));return e.join("-")}));e(i)})).catch((function(t){return i(t)}))}))},$=function(t){return l.a.toHiragana(t)},_=function(t){var e=l.a.toHiragana(t);return l.a.toHebon(e).toLowerCase()};e["a"]={clean:d,trim:f,toParam:m,toQuery:h,query:v,checker:p,tokenize:g,owakati:x,oyomi:b,opronunciation:y,obasic:w,toHiragana:$,toHebon:_,opos:k}},3:function(t,e){},3377:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",title:"Complate Dict Upload Dialog"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[i("v-form",[i("m-completes-file-input")],1)],1),i("v-list",t._l(t.complates,(function(e,n){return i("v-list-group",{key:n,scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(n)+" "),e.length>0?i("v-chip",{staticClass:"ml-2",attrs:{small:"",color:"info"}},[t._v(" "+t._s(e.length)+" ")]):t._e()],1)],1)]},proxy:!0}],null,!0)},t._l(e,(function(e){return i("v-list-item",{key:e.name},[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(e.name)+": "+t._s(e.rubi)+" ")])],1)],1)})),1)})),1)],1)],1)},r=[],a=i("9621"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.completes.title")+"*",multiple:"",chips:"",accept:".dic,.text,.DIC,.TEXT"},on:{change:t.onChange},scopedSlots:t._u([{key:"selection",fn:function(e){e.index;var n=e.text;return[i("v-chip",{attrs:{color:"deep-purple accent-4",dark:"",label:"",small:""}},[t._v(" "+t._s(n)+" ")])]}}])})},s=[],c=(i("4de4"),i("a15b"),i("d81d"),i("b0c0"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("1276"),i("498a"),i("ddb0"),i("b85c")),l=(i("96cf"),i("1da1")),u={name:"m-completes-file-input",methods:{onChange:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a,o,s,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i={},n=Object(c["a"])(e),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=20;break}return a=r.value,o=a.name.split(".")[0],t.prev=7,t.next=10,this.readFile(a);case 10:if(s=t.sent,!s){t.next=13;break}return t.delegateYield(regeneratorRuntime.mark((function t(){var e,n,r,a,c,u,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=s.replace(/\r\n?/g,"\n").split("\n").filter((function(t){return""!==t})),n=l.$vuewer.text,r=n.checker.isSafe(e.join("")),!r){t.next=8;break}a=e.map((function(t){var e=n.trim(t);return{name:e,val:e,rubi:e}})),i[o]=a,t.next=15;break;case 8:return c=e.map((function(t){return n.trim(t)})),t.next=11,n.oyomi(c.join("&"));case 11:u=t.sent,d=n.clean(u.join(" ")).replace(/\s/g,"").split("&"),f=c.map((function(t,e){var i=d[e]?n.toHebon(d[e]):n.toHebon(t);return{name:t,val:t,rubi:i}})),i[o]=f;case 15:case"end":return t.stop()}}),t)}))(),"t0",13);case 13:t.next=18;break;case 15:t.prev=15,t.t1=t["catch"](7),console.log(t.t1);case 18:t.next=4;break;case 20:t.next=25;break;case 22:t.prev=22,t.t2=t["catch"](2),n.e(t.t2);case 25:return t.prev=25,n.f(),t.finish(25);case 28:this.$store.commit("current/complates/complates",i);case 29:case"end":return t.stop()}}),t,this,[[2,22,25,28],[7,15]])})));function e(e){return t.apply(this,arguments)}return e}(),readFile:function(t){return new Promise((function(e,i){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=i,n.readAsText(t)}))}}},d=u,f=i("2877"),m=i("6544"),h=i.n(m),v=i("cc20"),p=i("23a7"),g=Object(f["a"])(d,o,s,!1,null,"55b056ef",null),x=g.exports;h()(g,{VChip:v["a"],VFileInput:p["a"]});var b={name:"m-complates-dialog",components:{MCardDialog:a["a"],MCompletesFileInput:x},props:{value:{type:Boolean,default:!1}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},complates:function(){var t=this.$store.getters["current/complates/list"];return t}},methods:{close:function(){this.dialog=!1}}},y=b,w=i("8336"),k=i("b0af"),$=i("99d9"),_=i("4bd4"),S=i("132d"),C=i("8860"),T=i("56b0"),V=i("da13"),R=i("5d23"),I=Object(f["a"])(y,n,r,!1,null,"206aa054",null);e["a"]=I.exports;h()(I,{VBtn:w["a"],VCard:k["a"],VCardText:$["c"],VChip:v["a"],VForm:_["a"],VIcon:S["a"],VList:C["a"],VListGroup:T["a"],VListItem:V["a"],VListItemContent:R["b"],VListItemTitle:R["d"]})},"3aaa":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"pa-0 transparent",attrs:{fluid:""},on:{mouseover:function(e){return t.$emit("mouseover")}}},[i("m-key-context",{on:{keyup:function(e){return t.$emit("keyup",e)}}},[i("v-tabs",{attrs:{dark:"",grow:"","show-arrows":"","center-active":"","background-color":t.color},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabs,(function(e,n){return i("v-tab",{key:n},[t._v(" "+t._s(e.text)+" "),e.icon?i("v-icon",{staticClass:"ml-2",attrs:{small:""}},[t._v(t._s(e.icon))]):t._e()],1)})),i("v-tabs-slider",{attrs:{color:"yellow"}})],2),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",[i("m-frame-table",{attrs:{"video-height":t.videoHeight,frames:t.frames},on:{"click-image-edit":function(e){return t.$emit("click-image-edit",e)},"click-ruler":function(e){return t.$emit("click-ruler",e)}}})],1),t._l(t.tiers,(function(e){return i("v-tab-item",{key:e},[i("m-text-grid-table",{attrs:{"video-height":t.videoHeight,title:e,tier:t.textgrid[e]},on:{"click-image-edit":function(e){return t.$emit("click-image-edit",e)}}})],1)}))],2)],1)],1)},r=[],a=(i("c740"),i("b64b"),i("b85c")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"overflow-y-auto",style:"max-height: "+(t.videoHeight-64||0)+"px",attrs:{headers:t.headers,items:t.items,"items-per-page":-1,search:t.keyword,"hide-default-footer":"","sort-by":"time"},scopedSlots:t._u([{key:"item.time",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.time)+" ")])]}},{key:"item.start",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.start)+" ")])]}},{key:"item.end",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.end)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("m-loading-dialog",{ref:"loading"},[i("p",[t._v(t._s(t.$vuetify.lang.t("$vuetify.loading")))])]),t.tier&&"point"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.seek(n.time)}}},[i("v-icon",[t._v(" mdi-format-horizontal-align-right ")])],1):t._e(),t.tier&&"point"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":"",color:"orange"},on:{click:function(e){return t.$emit("click-image-edit",n.time)}}},[i("v-icon",[t._v("mdi-selection-drag")])],1):t._e(),t.tier&&"interval"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.play(n.start,n.end)}}},[i("v-icon",[t._v(" mdi-play ")])],1):t._e(),t.tier&&"interval"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.trimVideo(n.start,n.end)}}},[i("v-icon",[t._v(" mdi-scissors-cutting ")])],1):t._e(),i("v-btn",{attrs:{color:"error",fab:"",dark:"","x-small":""},on:{click:function(e){return t.deleteItem(n)}}},[i("v-icon",[t._v(" mdi-delete ")])],1)]}},{key:"no-data",fn:function(){return[i("v-alert",{attrs:{type:"warning"}},[t._v(" No Data ")])]},proxy:!0}])})},s=[],c=i("f7d6"),l=c["a"],u=i("2877"),d=i("6544"),f=i.n(d),m=i("0798"),h=i("8336"),v=i("8fea"),p=i("132d"),g=Object(u["a"])(l,o,s,!1,null,"3c020550",null),x=g.exports;f()(g,{VAlert:m["a"],VBtn:h["a"],VDataTable:v["a"],VIcon:p["a"]});var b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"overflow-y-auto",style:"max-height: "+(t.videoHeight-64||0)+"px",attrs:{headers:t.headers,items:t.frames,"items-per-page":-1,"sort-by":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.time",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.time)+" ")])]}},{key:"item.points",fn:function(e){var n=e.item;return[n.points?i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.points.length)+" ")]):i("span",[t._v("0")])]}},{key:"item.rects",fn:function(e){var n=e.item;return[n.rects?i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.rects.length)+" ")]):i("span",[t._v("0")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.seek(n.time)}}},[i("v-icon",[t._v(" mdi-format-horizontal-align-right ")])],1),i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":"",color:"orange"},on:{click:function(e){return t.$emit("click-image-edit",n.time)}}},[i("v-icon",[t._v("mdi-selection-drag")])],1),t.$vuetify.breakpoint.lgAndUp?i("v-btn",{attrs:{fab:"",dark:"","x-small":"",color:"orange"},on:{click:function(e){return t.onClickRuler(n)}}},[i("v-icon",[t._v(" mdi-ruler ")])],1):t._e()]}},{key:"no-data",fn:function(){return[i("v-alert",{attrs:{type:"warning"}},[t._v(" No Data ")])]},proxy:!0}])})},y=[],w=i("27a3"),k={name:"m-frame-table",mixins:[w["a"]],props:{videoHeight:{default:null},frames:{type:Array,default:function(){return[]}}},data:function(){return{rulerDialog:!1,headers:[{text:"id",value:"idx"},{text:"time",value:"time"},{text:"points",value:"points"},{text:"rects",value:"rects"},{text:"Actions",value:"actions",sortable:!1,align:"end"}]}},methods:{onClickRuler:function(t){this.$emit("click-ruler",t.time)}}},$=k,_=Object(u["a"])($,b,y,!1,null,"5f19a512",null),S=_.exports;f()(_,{VAlert:m["a"],VBtn:h["a"],VDataTable:v["a"],VIcon:p["a"]});var C=i("6b13"),T={name:"WTextGrid",mixins:{MWavesurferMixin:w["a"]},components:{MKeyContext:C["a"],MTextGridTable:x,MFrameTable:S},props:{color:{type:String,default:"primary"},videoHeight:{default:null},textgrid:{type:Object,default:function(){return{}}},frames:{type:Array,default:function(){return[]}}},computed:{tab:{get:function(){return this.$store.state.current.tab},set:function(t){this.$store.commit("current/tab",t)}},parents:function(){var t=[];if(this.textgrid)for(var e in this.textgrid)this.textgrid[e].parent&&t.push(this.textgrid[e].parent);return this.$vuewer.math.uniq(t)},children:function(){var t=[];if(this.textgrid)for(var e in this.textgrid)this.textgrid[e].parent&&t.push(e);return this.$vuewer.math.uniq(t)},tiers:function(){return this.textgrid?Object.keys(this.textgrid):[]},tabs:function(){var t,e=this,i=[{text:"FRAMES"}],n=Object(a["a"])(this.tiers);try{var r=function(){var n=t.value,r=-1!=e.parents.findIndex((function(t){return t==n})),a=-1!=e.children.findIndex((function(t){return t==n})),o=r?"mdi-link-lock":a?"mdi-link":"";i.push({text:n,icon:o})};for(n.s();!(t=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}return i}}},V=T,R=i("a523"),I=i("71a3"),j=i("c671"),D=i("fe57"),E=i("aac8"),M=i("9a96"),O=Object(u["a"])(V,n,r,!1,null,"b2ffdc88",null);e["a"]=O.exports;f()(O,{VContainer:R["a"],VIcon:p["a"],VTab:I["a"],VTabItem:j["a"],VTabs:D["a"],VTabsItems:E["a"],VTabsSlider:M["a"]})},"3b4d":function(t,e,i){"use strict";i("d3b7"),i("ac1f"),i("1276");var n=i("0032"),r=i("d623"),a={key:"0wwasjmb91a5xz8",redirect:"https://kikuchiken-waseda.github.io/mri-vuewer.ver2/",token:r["a"].dropbox.get("token")},o=new n["Dropbox"]({fetch:fetch,clientId:a.key,accessToken:a.token}),s=function(){var t=o.getAuthenticationUrl("https://kikuchiken-waseda.github.io/mri-vuewer.ver2/");window.location.href=t},c=function(t){var e=t.split("&")[0].split("=");if("#access_token"==e[0]){var i=t.split("&")[0].split("=")[1];a.token=i,r["a"].dropbox.set("token",i),o=new n["Dropbox"]({clientId:a.key,accessToken:a.token})}},l=function(t){return new Promise((function(e,i){o.filesListFolder({path:t}).then((function(t){return e(t)})).catch((function(t){return i(t)}))}))},u=function(t,e){return new Promise((function(i,n){o.filesUpload({path:"/"+t,contents:e,mode:"overwrite"}).then((function(t){return i(t)})).catch((function(t){return n(t)}))}))},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(i,n){o.filesDownload({path:t}).then((function(t){if(t.fileBlob)if(e)i(t.fileBlob);else{var r=new FileReader;r.onerror=function(){r.abort();var t=new Error("LOAD ERROR");n({status:500,error:t})},r.onload=function(){i(r.result)},r.readAsText(t.fileBlob)}else{var a=new Error("API ERROR");n({status:500,error:a})}})).catch((function(t){return n(t)}))}))};e["a"]={auth:s,hasToken:function(){return!!r["a"].dropbox.get("token")},setToken:c,write:u,read:d,get:l}},"3e95":function(t,e,i){"use strict";(function(t){i("b0c0"),i("498a"),i("96cf");var n=i("1da1"),r=i("8e30"),a=i("643d"),o=i("21f0");e["a"]={name:"video-trim",mixins:[a["a"]],components:{MViewLayout:r["a"]},data:function(){return{heading:"Example: TRIM VIDEO",desc:"動画切り出し関数の処理例です(特定の動画の5-10secを切り出します)"}},methods:{onChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(i){var n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=9;break}if(!i.arrayBuffer){e.next=9;break}return e.next=4,i.arrayBuffer();case 4:n=e.sent,r=o["a"].video.trim(n,5,10),a=r.MEMFS[0],s=o["a"].video.toBlob(t(a.data)),o["a"].file.download(s,a.name);case 9:case"end":return e.stop()}}),e)})));function i(t){return e.apply(this,arguments)}return i}()}}}).call(this,i("1c35").Buffer)},4:function(t,e){},4009:function(t,e,i){"use strict";e["a"]={computed:{videoName:{get:function(){return this.$store.state.current.video.filename}},videoSource:{get:function(){return this.$store.state.current.video.source}},fps:{get:function(){return this.$store.state.current.video.fps}},duration:{get:function(){return this.$store.state.current.video.duration}},videoStream:{get:function(){return this.$store.state.current.video.videoStream}},audioStream:{get:function(){return this.$store.state.current.video.audioStream}},originSize:{get:function(){return this.$store.state.current.video.originSize}}}}},"41e7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-upload")])],1)]}}])},[i("m-video-upload-list",{on:{click:function(e){return t.$emit("click",e)}}})],1)},r=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",{attrs:{dense:""}},[i("input",{ref:"input",staticStyle:{display:"none"},attrs:{accept:t.clicked.accept,type:"file"},on:{change:t.onChange}}),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.textgrid.name"))+" ")])],1)]},proxy:!0}]),model:{value:t.showTextGrid,callback:function(e){t.showTextGrid=e},expression:"showTextGrid"}},t._l(t.textgrid,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){return t.onClick(e)}}},[i("v-list-item-title",[t._v(t._s(e.text))])],1)})),1),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.ver1"))+" ")])],1)]},proxy:!0}]),model:{value:t.showVer1,callback:function(e){t.showVer1=e},expression:"showVer1"}},t._l(t.ver1,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){return t.onClick(e)}}},[i("v-list-item-title",[t._v(t._s(e.text))])],1)})),1)],1)},o=[],s={name:"m-video-upload-list",data:function(){return{showTextGrid:!0,showVer1:!1,clicked:{text:"",val:"",accept:""},ver1:[{text:"JSON (VER1)",val:"TEXTGRID/JSON/VER1",accept:"application/json"},{text:"JSON (VER1: LEFT)",val:"TEXTGRID/JSON/VER1/LEFT",accept:"application/json"},{text:"JSON (VER1: RIGHT)",val:"TEXTGRID/JSON/VER1/RIGHT",accept:"application/json"},{text:"JSON (VER1: UP-DOWN)",val:"TEXTGRID/JSON/VER1/UP-DOWN",accept:"application/json"}],textgrid:[{text:"TEXTGRID",val:"TEXTGRID/TEXTGRID",accept:".TextGrid,.textgrid,.Textgrid"},{text:"JSON",val:"TEXTGRID/JSON",accept:"application/json"}]}},methods:{onClick:function(t){var e=this;this.clicked=t,this.$nextTick((function(){e.$refs.input.click()}))},onChange:function(){var t={click:this.clicked.val,files:this.$refs.input.files};this.$emit("click",t)}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("8860"),m=i("56b0"),h=i("da13"),v=i("5d23"),p=Object(l["a"])(c,a,o,!1,null,"6d005253",null),g=p.exports;d()(p,{VList:f["a"],VListGroup:m["a"],VListItem:h["a"],VListItemContent:v["b"],VListItemTitle:v["d"]});var x={name:"m-video-upload-menu",components:{MVideoUploadList:g}},b=x,y=i("8336"),w=i("132d"),k=i("e449"),$=Object(l["a"])(b,n,r,!1,null,"3f6319b5",null);e["a"]=$.exports;d()($,{VBtn:y["a"],VIcon:w["a"],VMenu:k["a"]})},4678:function(t,e,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=a,t.exports=r,r.id="4678"},"4a48":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-autocomplete",{ref:"text",attrs:{dense:"","hide-no-data":"","hide-details":"",outlined:"",solo:"","prepend-inner-icon":"mdi-microphone",disabled:t.disabled,filter:t.autocomplete,items:t.choices,"item-text":"name","item-value":"val"},on:{"click:prepend-inner-icon":function(e){return t.$emit("click:prepend-inner-icon")},keydown:[function(t){t.stopPropagation()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void 0)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),e.altKey?t.onNext(e):null)},function(e){return(e.type.indexOf("key")||219===e.keyCode)&&e.ctrlKey?t.$emit("esc"):null},function(e){return e.type.indexOf("key")||27===e.keyCode?(e.preventDefault(),t.$emit("esc")):null}]},scopedSlots:t._u([{key:"item",fn:function(e){return[i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.item.name)}}),i("v-list-item-subtitle",{domProps:{textContent:t._s(e.item.rubi)}})],1)]}}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})},r=[],a=(i("4de4"),i("c740"),i("a15b"),i("d81d"),i("d3b7"),i("6062"),i("3ca3"),i("2ca0"),i("ddb0"),i("2909")),o={name:"m-record-text-field",props:{value:{validator:function(t){return"string"===typeof t||null===t},required:!0},complateKey:{validator:function(t){return"string"===typeof t||null===t},default:""},disabled:{type:Boolean,default:!1}},computed:{text:{get:function(){return this.value},set:function(t){t?this.$emit("input",t):this.$emit("input","")}},choices:function(){var t=this,e=[],i=this.complateKey,n=this.$store.state.current.complates.complates;n[i]&&e.push.apply(e,Object(a["a"])(n[i]));var r=this.$store.state.current.textgrid;if(null!=r&&i in r){var o=Object(a["a"])(new Set(this.$store.state.current.textgrid[i].values.map((function(t){return t.text})).filter((function(t){var i=e.findIndex((function(e){return e.val==t}));return-1===i}))));e.push.apply(e,Object(a["a"])(o.map((function(e){return{name:e,val:e,rubi:e?t.$vuewer.text.toHebon(e):""}}))))}return e}},methods:{autocomplete:function(t,e){var i=t.rubi.toLowerCase(),n=t.val.toLowerCase(),r=e.toLowerCase();return i.startsWith(r)||n.startsWith(r)},setText:function(){var t=Object(a["a"])(this.$refs.text.$el.getElementsByTagName("input")).filter((function(t){return"text"==t.type})),e=this.$vuewer.text.clean(t.map((function(t){return t.value})).join(""));this.text=e||""},onNext:function(){this.setText(),this.$emit("next")},onEnter:function(){this.setText(),this.$emit("enter")},blur:function(){this.$refs.text.blur()},focus:function(){this.$refs.text.focus()}}},s=o,c=i("2877"),l=i("6544"),u=i.n(l),d=i("c6a6"),f=i("5d23"),m=Object(c["a"])(s,n,r,!1,null,"183b7248",null);e["a"]=m.exports;u()(m,{VAutocomplete:d["a"],VListItemContent:f["b"],VListItemSubtitle:f["c"],VListItemTitle:f["d"]})},5:function(t,e){},"531d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"mx-auto",attrs:{color:t.color,flat:t.flat,tile:t.tile}},[t.accordion?i("v-system-bar",{attrs:{color:t.titleColor+" darken-2",window:"",dark:""}},[i("v-spacer"),t.isCloseing?i("v-icon",{on:{click:function(e){return e.preventDefault(),t.open(e)}}},[t._v(" mdi-window-maximize ")]):i("v-icon",{on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(" mdi-window-minimize ")])],1):t._e(),t.title?i("v-toolbar",{attrs:{dense:t.dense,color:t.titleColor,dark:""}},[t.prependIcon?i("v-icon",{staticClass:"mr-2",attrs:{color:t.prependIconColor}},[t._v(" "+t._s(t.prependIcon)+" ")]):t._e(),i("v-toolbar-title",[t._v(t._s(t.title))]),i("v-spacer"),t._t("toolbar-actions",t._l(t.toolbarActions,(function(e,n){return i("v-btn",{key:n,attrs:{icon:""},on:{click:e.action}},[i("v-icon",[t._v(t._s(e.icon))])],1)})))],2):t._e(),i("v-expand-transition",[t.isCloseing?t._e():t._t("default")],2)],1)},r=[],a=(i("a623"),i("d81d"),{name:"MTCard",data:function(){return{isCloseing:!1}},methods:{close:function(){this.isCloseing=!0},open:function(){this.isCloseing=!1}},props:{title:{type:String},tile:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},accordion:{type:Boolean,default:!1},prependIcon:{type:String,default:""},color:{type:String,default:"white"},titleColor:{type:String,default:"primary"},prependIconColor:{type:String,default:""},toolbarActions:{type:Array,validator:function(t){if(0==t.length)return!0;var e=t.map((function(t){return"icon"in t&&"action"in t}));return e.every((function(t){return t}))},default:function(){return[]}}}}),o=a,s=i("2877"),c=i("6544"),l=i.n(c),u=i("8336"),d=i("b0af"),f=i("0789"),m=i("132d"),h=i("2fa4"),v=i("afd9"),p=i("71d9"),g=i("2a7f"),x=Object(s["a"])(o,n,r,!1,null,"8b762970",null);e["a"]=x.exports;l()(x,{VBtn:u["a"],VCard:d["a"],VExpandTransition:f["a"],VIcon:m["a"],VSpacer:h["a"],VSystemBar:v["a"],VToolbar:p["a"],VToolbarTitle:g["a"]})},"548c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"grey darken-4",title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("m-video-upload-menu",{on:{click:function(e){return t.$emit("upload-click",e)}}}),i("m-video-download-menu",{on:{click:function(e){return t.$emit("download-click",e)}}})]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{tile:""}},[t.src?i("v-img",{staticClass:"white--text align-end",attrs:{src:t.src,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"}},[i("v-card-title",{staticClass:"py-0"},[t._v(t._s(t.videoName))]),i("v-card-title",{staticClass:"py-0"},[t._v(" "+t._s(t.duration)+" sec: "+t._s(t.fps)+" fps ["+t._s(t.originSize.width)+" x "+t._s(t.originSize.height)+"] ")])],1):t._e(),i("m-video-stream-list",{attrs:{"video-stream":t.videoStream}}),i("v-divider",{attrs:{inset:""}}),i("m-audio-stream-list",{attrs:{"audio-stream":t.audioStream}}),i("v-divider",{attrs:{inset:""}}),i("v-list",{attrs:{subheader:""}},[i("v-subheader",[t._v("MetaData")]),t._l(t.metaData,(function(e){return i("v-list-item",{key:e.key},[i("v-list-item-avatar",[i("v-icon")],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(e.key.toUpperCase())+": ")])],1),i("v-list-item-action",[t._v(" "+t._s(e.val)+" ")])],1)})),i("v-divider",{attrs:{inset:""}})],2)],1)],1)},r=[],a=(i("d81d"),i("b64b"),i("9621")),o=i("5c65"),s=i("41e7"),c=i("94d2"),l=i("0bad"),u=i("4009"),d={name:"m-detail-dialog",mixins:[u["a"]],components:{MCardDialog:a["a"],MVideoDownloadMenu:o["a"],MVideoUploadMenu:s["a"],MVideoStreamList:c["a"],MAudioStreamList:l["a"]},data:function(){return{title:"$vuetify.forms.detail.title"}},props:{value:{type:Boolean,required:!0}},computed:{metaData:function(){var t=this.$store.state.current.metaData;return t?Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]},src:function(){return this.$store.state.current.frame.src},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},f=d,m=i("2877"),h=i("6544"),v=i.n(h),p=i("b0af"),g=i("99d9"),x=i("ce7e"),b=i("132d"),y=i("adda"),w=i("8860"),k=i("da13"),$=i("1800"),_=i("8270"),S=i("5d23"),C=i("e0c7"),T=Object(m["a"])(f,n,r,!1,null,"3a247c88",null);e["a"]=T.exports;v()(T,{VCard:p["a"],VCardTitle:g["d"],VDivider:x["a"],VIcon:b["a"],VImg:y["a"],VList:w["a"],VListItem:k["a"],VListItemAction:$["a"],VListItemAvatar:_["a"],VListItemContent:S["b"],VListItemTitle:S["d"],VSubheader:C["a"]})},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("m-app-bar"),i("m-navigation-drawer"),i("v-main",[i("router-view"),i("m-logging-seet"),i("m-app-snackbar"),i("m-app-loading-dialog")],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app-bar",{staticStyle:{"z-index":"99"},attrs:{app:"",color:"primary",dark:""}},[i("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),t.$vuetify.breakpoint.smAndUp?i("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]):t._e(),i("v-spacer"),t.isSearch?i("v-text-field",{attrs:{flat:"",rounded:"","solo-inverted":"","hide-details":"",label:"Search","background-color":"primary lighten-1","prepend-inner-icon":"mdi-magnify","append-icon":t.recIcon},on:{"click:append":t.rec},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),t.$vuetify.breakpoint.smAndUp?i("v-spacer"):t._e(),t.$store.state.current.layout.mini?t._e():i("v-toolbar-title",{staticClass:"mr-3"},[t._v(" "+t._s(t.fileInfo)+" ")]),t.$vuetify.breakpoint.smAndUp?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.to({name:"Home"})}}},[i("v-icon",[t._v("mdi-home")])],1):t._e(),t.$vuetify.breakpoint.smAndUp?i("v-btn",{attrs:{icon:"",href:t.$store.state.github}},[i("v-icon",[t._v("mdi-github")])],1):t._e(),t.$vuetify.breakpoint.smAndUp?i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-translate")])],1)]}}],null,!1,2812120649)},[i("v-list",[i("v-list-item",{on:{click:function(e){t.$vuetify.lang.current="en"}}},[i("v-list-item-title",[t._v("English")])],1),i("v-list-item",{on:{click:function(e){t.$vuetify.lang.current="ja"}}},[i("v-list-item-title",[t._v("日本語")])],1)],1)],1):t._e()],1)},s=[],c=(i("99af"),i("b0c0"),i("ac1f"),i("841c"),i("1276"),{name:"MAppBar",computed:{name:{get:function(){return this.$store.state.appName}},version:{get:function(){return this.$store.state.appVersion}},title:function(){return"".concat(this.name," ver ").concat(this.version)},isSearch:function(){return this.$store.state.search.show},keyword:{get:function(){return this.$store.state.search.input},set:function(t){this.$store.commit("search/input",t)}},fileInfo:function(){var t=this.$store.state.current.video.filename;if(t){var e=t.split(".")[0],i=this.$store.state.current.video.fps,n=this.$store.state.current.video.duration;return"".concat(e,": ").concat(i," fps : ").concat(n," sec")}return null},drawer:{get:function(){return this.$store.state.drawer},set:function(t){this.$store.commit("drawer",t)}},recog:function(){return window.webkitSpeechRecognition||window.SpeechRecognition||null},recIcon:function(){return this.recog?"mdi-microphone":null}},methods:{rec:function(){var t=this;if(this.recog){this.keyword="";var e=new this.recog;e.lang="ja"==this.$vuetify.lang.current?"ja-JP":"en-US",e.onresult=function(e){e.results[0].isFinal&&(t.keyword=e.results[0][0].transcript)},e.start()}else this.$vuewer.snackbar.warn(this.$vuetify.lang.t("$vuetify.contexts.browserError"))},to:function(t){t.name&&this.$route.name!==t.name&&this.$router.push(t)}}}),l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("40dc"),h=i("5bc1"),v=i("8336"),p=i("132d"),g=i("8860"),x=i("da13"),b=i("5d23"),y=i("e449"),w=i("2fa4"),k=i("8654"),$=i("2a7f"),_=Object(u["a"])(l,o,s,!1,null,"03a6770f",null),S=_.exports;f()(_,{VAppBar:m["a"],VAppBarNavIcon:h["a"],VBtn:v["a"],VIcon:p["a"],VList:g["a"],VListItem:x["a"],VListItemTitle:b["d"],VMenu:y["a"],VSpacer:w["a"],VTextField:k["a"],VToolbarTitle:$["a"]});var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{staticClass:"py-0",attrs:{app:"",temporary:"",width:"400px"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{dense:"",nav:"",color:"blue-grey",dark:""}},[n("v-list-item")],1),n("v-list",{attrs:{dense:"",nav:"",color:"blue-grey",dark:""}},[n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:i("2d28")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.$store.state.appName))]),n("v-list-item-subtitle",[t._v(" Copyright © "+t._s(t.$store.state.devYear)+" by "+t._s(t.$store.state.author)+" ")])],1)],1)],1),n("v-divider"),n("v-list",{staticClass:"pa-0",attrs:{dense:"",nav:""}},[n("v-list-group",{attrs:{"prepend-icon":"mdi-view-list","sub-group":"",value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("PAGES")])]},proxy:!0}]),model:{value:t.open.pages,callback:function(e){t.$set(t.open,"pages",e)},expression:"open.pages"}},[n("v-divider"),t._l(t.pages,(function(e){return n("v-list-item",{key:e.title,attrs:{link:""},on:{click:e.to}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),n("v-list",{staticClass:"pa-0",attrs:{dense:"",nav:""}},[n("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$store.commit("logging/show",!0)}}},[n("v-list-item-icon",[n("v-icon",[t._v(" mdi-console ")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.logger"))+" ")])],1)],1)],1)],2),n("v-divider"),t.isLoading?n("v-list-item",{attrs:{"sub-group":""}},[n("v-list-item-icon"),n("v-list-item-title",[t._v(" Loading files... ")]),n("v-list-item-action",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1):t.files.length?n("v-list-group",{attrs:{"sub-group":"","prepend-icon":"mdi-menu-open"},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v(" FILES "),t.open.files?t._e():n("v-chip",{staticClass:"ml-2",attrs:{small:"",color:"info"}},[t._v(" "+t._s(t.files.length)+" ")])],1)]},proxy:!0}]),model:{value:t.open.files,callback:function(e){t.$set(t.open,"files",e)},expression:"open.files"}},[n("v-divider"),t._l(t.files,(function(e){return n("v-list-item",{key:e.id,class:t.activeFile==e.id?"highlight":"",attrs:{"two-line":""},on:{click:function(i){return t.to({id:e.id})}}},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.name)+" "),Object.keys(e.textgrid).length>0?n("v-chip",{staticClass:"ml-2",attrs:{"x-small":"",color:"success"}},[t._v(" "+t._s(Object.keys(e.textgrid).length)+" Tiers ")]):t._e()],1),n("v-list-item-subtitle",[t._v(" last modify: "+t._s(e.lastModifiedText)+" ")])],1),n("v-list-item-action",[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(i){return i.stopPropagation(),t.fileDestroy(e)}}},[n("v-icon",{attrs:{small:"",color:"error"}},[t._v("mdi-delete")])],1)],1)],1)}))],2):t._e(),n("v-divider"),t.isLoading?t._e():n("v-list-group",{attrs:{"prepend-icon":"mdi-dropbox","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("DROPBOX")])]},proxy:!0}],null,!1,2035268283),model:{value:t.open.dropboxes,callback:function(e){t.$set(t.open,"dropboxes",e)},expression:"open.dropboxes"}},[n("v-list-item",{attrs:{link:""},on:{click:t.dropboxAuth}},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.dropbox.auth"))+" ")])],1),n("v-list-item-action",[t.hasToken?n("v-chip",{attrs:{small:"",color:"success"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.dropbox.connected"))+" ")]):t._e()],1)],1),t.hasToken?n("v-list-item",{attrs:{link:""},on:{click:t.loadDropbox}},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.dropbox.load"))+" ")])],1),n("v-list-item-action",[this.diff.length?n("v-chip",{attrs:{small:"",color:"success"}},[t._v(" + "+t._s(this.diff.length)+" ")]):t._e()],1)],1):t._e()],1),n("v-list-group",{attrs:{"prepend-icon":"mdi-database","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("DATABASE")])]},proxy:!0}]),model:{value:t.open.databases,callback:function(e){t.$set(t.open,"databases",e)},expression:"open.databases"}},[n("v-list-item",{attrs:{link:""},on:{click:t.dbAdd}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-database-plus")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.add"))+" ")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:t.dbDump}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-database-export")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.dump"))+" ")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:t.dbLoad}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-database-import")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.load"))+" ")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:t.dbClear}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"error"}},[t._v("mdi-database-remove")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"error--text"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.clear"))+" ")])],1)],1)],1),n("v-divider"),n("v-list-group",{attrs:{"prepend-icon":"mdi-file-swap","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("CONVATER")])]},proxy:!0}]),model:{value:t.open.convarters,callback:function(e){t.$set(t.open,"convarters",e)},expression:"open.convarters"}},t._l(t.converters,(function(e){return n("v-list-item",{key:e.text,attrs:{link:""},on:{click:e.function}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.text))])],1)],1)})),1),n("v-divider"),t.$showDev?n("v-list-group",{attrs:{"prepend-icon":"mdi-flask","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("DEVELOP")])]},proxy:!0}],null,!1,1812153606),model:{value:t.open.depelops,callback:function(e){t.$set(t.open,"depelops",e)},expression:"open.depelops"}},t._l(t.developPages,(function(e){return n("v-list-item",{key:e.title,attrs:{link:""},on:{click:e.to}},[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1):t._e()],1),n("m-file-upload-dialog",{model:{value:t.uploadDialog,callback:function(e){t.uploadDialog=e},expression:"uploadDialog"}}),n("m-db-import-dialog",{model:{value:t.dbImportDialog,callback:function(e){t.dbImportDialog=e},expression:"dbImportDialog"}}),n("m-dropbox-dialog",{model:{value:t.dropboxDialog,callback:function(e){t.dropboxDialog=e},expression:"dropboxDialog"}})],1)},T=[],V=(i("4de4"),i("c975"),i("d81d"),i("a9e3"),i("d3b7"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",title:t.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog?i("m-video-regist-from",{on:{loaded:t.onLoaded,error:t.onError}}):t._e()],1)}),R=[],I=i("9621"),j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stepper",{model:{value:t.e1,callback:function(e){t.e1=e},expression:"e1"}},[i("v-stepper-header",[t._l(t.nSteps,(function(e){return[i("v-stepper-step",{key:e+"-step",attrs:{step:e}}),e!==t.nSteps?i("v-divider",{key:e}):t._e()]}))],2),i("v-stepper-items",[i("v-stepper-content",{staticClass:"pb-0",attrs:{step:"1"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"ml-2"},[t._v(t._s(t.stepName))]),i("m-help",{attrs:{text:"$vuetify.forms.video.desc.select"}})],1),i("v-card-text",[1==t.e1?i("m-video-file-form",{on:{validated:t.onValidateVideo}}):t._e()],1)],1)],1),i("v-stepper-content",{attrs:{step:"2"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"ml-2"},[t._v(t._s(t.stepName))]),i("m-help",{attrs:{text:"$vuetify.forms.video.desc.confirmation"}})],1),i("v-card-text",[2==t.e1?i("m-video-codec-form",{ref:"codecForm",attrs:{value:t.video},on:{validated:t.onValidateCodec}}):t._e()],1),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:t.prevStep}},[t._v(" "+t._s(t.t("$vuetify.prev"))+" ")]),i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.resetCodecForm}},[t._v("reset")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validateCodecForm}},[t._v("ok")])],1)],1)],1),i("v-stepper-content",{attrs:{step:"3"}},[t.isFinishEditMeta?i("v-card",[t.isSaved?i("v-card-text",[i("v-alert",{attrs:{type:"success"}},[t._v(" "+t._s(t.t("$vuetify.forms.video.finish"))+" ")])],1):i("m-loading-card",{attrs:{value:t.progress}},[t._v(" "+t._s(t.converting.status)+" ("+t._s(t.converting.step)+" / "+t._s(t.converting.total)+") ")]),t.isSaved&&0==t.movePage?i("v-card-actions",[t._t("finishedActions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary"},on:{click:t.restart}},[t._v(" "+t._s(t.t("$vuetify.forms.video.restart"))+" ")])])],2):t._e()],1):i("v-card",[i("v-card-title",[i("span",{staticClass:"ml-2"},[t._v(t._s(t.stepName))]),i("m-help",{attrs:{text:"$vuetify.forms.video.desc.meta"}})],1),i("v-card-text",[t.video.name?i("m-video-meta-data-form",{ref:"metaForm",attrs:{currentItem:t.metadata},on:{validated:t.onValidateMetaData}}):t._e()],1),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:t.prevStep}},[t._v(" "+t._s(t.t("$vuetify.prev"))+" ")]),i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.resetMetaDataForm}},[t._v("reset")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validateMetaDataForm}},[t._v("ok")])],1)],1)],1)],1)],1)},D=[],E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-icon",t._g(t._b({},"v-icon",r,!1),n),[t._v("mdi-help-circle")])]}}])},[i("div",{domProps:{innerHTML:t._s(t.contents)}})])},M=[],O={name:"m-help",props:{text:{type:String,required:!0}},computed:{contents:function(){return this.$vuetify.lang.t(this.text)}}},L=O,z=i("3a2f"),P=Object(u["a"])(L,E,M,!1,null,"45a3d79a",null),F=P.exports;f()(P,{VIcon:p["a"],VTooltip:z["a"]});var A=i("84c5"),N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",[i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t("$vuetify.setting.form.loading.shouldGetVideoInfo.label")},model:{value:t.$shouldGetVideoInfo,callback:function(e){t.$shouldGetVideoInfo=e},expression:"$shouldGetVideoInfo"}}),i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t("$vuetify.setting.form.loading.nameFormat.show")},model:{value:t.showNameFormat,callback:function(e){t.showNameFormat=e},expression:"showNameFormat"}}),t.showNameFormat?i("v-text-field",{attrs:{suffix:"sep = '"+t.$nameSep+"'",label:t.t("$vuetify.setting.form.loading.nameFormat.label"),hint:t.t("$vuetify.setting.form.loading.nameFormat.hint")},model:{value:t.$nameFormat,callback:function(e){t.$nameFormat=e},expression:"$nameFormat"}}):t._e(),t.$shouldGetVideoInfo?i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}}):i("v-file-input",{attrs:{label:t.t("$vuetify.io.mVideoInput.title")+"*",rules:t.videoRules,accept:"video/mp4","show-size":""},on:{change:t.onChange}})],1)},B=[],G=(i("96cf"),i("1da1")),U=i("643d"),q=i("ee5b"),K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.mVideoInput.title")+"*",accept:"video/mp4",rules:t.videoRules,"show-size":""},on:{change:t.onChange}})},H=[],W=i("21f0"),X={name:"MVideoInput",mixins:[U["a"]],data:function(){return{video:W["a"].video.initObj()}},methods:{onChange:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.clearVideo(),!e){t.next=13;break}if(!(e.size<this.maxVideoSize)){t.next=13;break}return this.$emit("loading"),this.video.name=e.name,t.next=7,W["a"].file.toBase64(e);case 7:if(this.video.source=t.sent,!e.arrayBuffer){t.next=13;break}return t.next=11,e.arrayBuffer();case 11:i=t.sent,W["a"].video.info(i,(function(t){n.video.fps=t.videoStream.fps,n.video.videoStream=t.videoStream,n.video.audioStream=t.audioStream,n.video.originSize=t.size,n.video.duration=t.duration,n.$emit("loaded",n.video)}));case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),clearVideo:function(){this.video=W["a"].video.initObj()}},computed:{maxVideoSize:function(){return 1e6*this.$store.state.setting.maxVideoSize}}},J=X,Y=i("23a7"),Z=Object(u["a"])(J,K,H,!1,null,null,null),Q=Z.exports;f()(Z,{VFileInput:Y["a"]});var tt={name:"m-video-file-form",mixins:[U["a"],q["a"]],components:{MVideoInput:Q},data:function(){return{showNameFormat:!1,video:W["a"].video.initObj()}},methods:{t:function(t){return this.$vuetify.lang.t(t)},onChange:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}if(!(e.size<this.maxVideoSize)){t.next=7;break}return this.video.name=e.name,t.next=5,W["a"].file.toBase64(e);case 5:this.video.source=t.sent,this.$emit("validated",this.video);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onLoading:function(){this.$emit("valideting")},onLoaded:function(t){t&&(this.video=t,this.$emit("validated",this.video))}},computed:{maxVideoSize:function(){return 1e6*this.$store.state.setting.maxVideoSize}}},et=tt,it=i("ac7c"),nt=i("4bd4"),rt=Object(u["a"])(et,N,B,!1,null,"53fe0282",null),at=rt.exports;f()(rt,{VCheckbox:it["a"],VFileInput:Y["a"],VForm:nt["a"],VTextField:k["a"]});var ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{required:"",label:"file name"},model:{value:t.video.name,callback:function(e){t.$set(t.video,"name",e)},expression:"video.name"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:"fps",suffix:"fps"},model:{value:t.video.fps,callback:function(e){t.$set(t.video,"fps",e)},expression:"video.fps"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:"duration",suffix:"sec"},model:{value:t.video.duration,callback:function(e){t.$set(t.video,"duration",e)},expression:"video.duration"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:"video width",suffix:"pixel"},model:{value:t.video.originSize.width,callback:function(e){t.$set(t.video.originSize,"width",e)},expression:"video.originSize.width"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:"video height",suffix:"pixel"},model:{value:t.video.originSize.height,callback:function(e){t.$set(t.video.originSize,"height",e)},expression:"video.originSize.height"}})],1)},st=[],ct={name:"m-video-codec-form",mixins:[U["a"]],data:function(){return{video:W["a"].video.initObj(),valid:!1}},props:{value:{type:Object,default:function(){return W["a"].video.initObj()}}},methods:{validate:function(){if(this.$refs.form.validate(),this.valid){var t={name:this.video.name,fps:Number(this.video.fps),duration:Number(this.video.duration),originSize:{width:Number(this.video.originSize.width),height:Number(this.video.originSize.height)}};this.$emit("validated",t)}},reset:function(){this.resetValidation(),this.video=JSON.parse(JSON.stringify(this.value))},resetValidation:function(){this.$refs.form.resetValidation()}},mounted:function(){this.video=JSON.parse(JSON.stringify(this.value))}},lt=ct,ut=Object(u["a"])(lt,ot,st,!1,null,"3729a4f6",null),dt=ut.exports;f()(ut,{VForm:nt["a"],VTextField:k["a"]});var ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",[i("v-col",[i("v-card",[i("v-card-text",{staticClass:"py-0"},[i("m-meta-field-form",{ref:"newForm",on:{validated:t.onAddField}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){return e.preventDefault(),t.$refs.newForm.validate()}}},[t._v(" ADD ")])],1)],1),t.fields.length>0?i("v-card",{staticClass:"mt-4"},[i("v-card-text",[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},t._l(t.fields,(function(e){return i("v-text-field",{key:e,attrs:{rules:t.valueRules,counter:50,required:"",label:e},model:{value:t.item[e],callback:function(i){t.$set(t.item,e,i)},expression:"item[field]"}})})),1)],1)],1):t._e()],1)],1)},mt=[],ht=(i("c740"),i("a434"),i("ddb0"),i("b85c")),vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.keyRules,counter:10,required:"",label:"New field"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.validate(e))}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)},pt=[],gt={name:"m-meta-field-form",data:function(){return{valid:!1,name:""}},methods:{checkName:function(t){return!!t&&(!(this.fields.indexOf(t)>-1)||this.$vuetify.lang.t("$vuetify.validations.alreadyExists"))},validate:function(){this.$refs.form&&(this.$refs.form.validate(),this.valid&&(this.$store.commit("metadata/add",this.name),this.$emit("validated",this.name)))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}},computed:{fields:function(){return this.$store.getters["files/fields"]},keyRules:function(){var t=this,e="$vuetify.validations";return[function(i){return!!i||t.$vuetify.lang.t("".concat(e,".required"))},function(i){return!!i||i.length<=10||t.$vuetify.lang.t("".concat(e,".shorter"),10)},function(e){return t.checkName(e)}]}}},xt=gt,bt=Object(u["a"])(xt,vt,pt,!1,null,"1d84995f",null),yt=bt.exports;f()(bt,{VForm:nt["a"],VTextField:k["a"]});var wt={name:"m-video-meta-data-form",components:{MMetaFieldForm:yt},props:{vname:{type:String,default:""},currentItem:{type:Object,default:function(){return{}}}},data:function(){return{valid:!1,fields:[],item:{}}},computed:{valueRules:function(){var t=this,e="$vuetify.validations";return[function(i){return 0==i.length||i&&i.length<=50||t.$vuetify.lang.t("".concat(e,".shorter"),50)}]}},methods:{onAddField:function(t){this.fields.push(t),this.item[t]=this.currentItem[t]||""},destroy:function(t,e){var i=this.keys.findIndex((function(t){return t==e}));this.keys.splice(i,1)},validate:function(){this.$refs.form?(this.$refs.form.validate(),this.valid&&this.$emit("validated",this.item)):this.$emit("validated",this.item)},reset:function(){for(var t in this.item)this.item[t]=this.currentItem[t]||""}},mounted:function(){this.fields=this.$store.getters["files/fields"];var t,e=Object(ht["a"])(this.fields);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.item[i]=this.currentItem[i]||""}}catch(n){e.e(n)}finally{e.f()}}},kt=wt,$t=i("b0af"),_t=i("99d9"),St=i("62ad"),Ct=i("0fd9"),Tt=Object(u["a"])(kt,ft,mt,!1,null,"b33599a0",null),Vt=Tt.exports;f()(Tt,{VBtn:v["a"],VCard:$t["a"],VCardActions:_t["a"],VCardText:_t["c"],VCol:St["a"],VForm:nt["a"],VRow:Ct["a"],VSpacer:w["a"],VTextField:k["a"]});var Rt={name:"m-video-regist-from",mixins:[q["a"]],components:{MHelp:F,MLoadingCard:A["a"],MVideoFileForm:at,MVideoCodecForm:dt,MVideoMetaDataForm:Vt},data:function(){return{e1:1,loading:{show:!1,status:""},converting:{src:"",status:"",doing:!1,step:0,total:0},isFinishEditMeta:!1,isSaved:!1,steps:["select","confirmation","meta"],video:W["a"].video.initObj()}},computed:{movePage:function(){return this.$store.state.setting.shouldMovePageAferAddingFile},shouldGetFrameInfo:function(){return this.$store.state.setting.shouldGetFrameInfo},canvasStyle:function(){return this.video.originSize?{width:"".concat(this.video.originSize.width,"px"),height:"".concat(this.video.originSize.height,"px")}:{width:"0px",height:"0px"}},progress:function(){return this.converting.total?this.converting.step/this.converting.total*100:0},stepName:function(){return this.t("$vuetify.forms.video.steps.".concat(this.steps[this.e1-1]))},nSteps:function(){return this.steps.length},metadata:function(){if(this.video.name){var t=this.$store.getters["setting/fname2meta"](this.video.name);if(t)return t}return{}}},methods:{t:function(t){return this.$vuetify.lang.t(t)},pushFile:function(){var t=this;this.$store.dispatch("files/push",this.video).then((function(e){t.isSaved=!0,t.$emit("loaded",e)})).catch((function(e){t.$emit("error",e)}))},restart:function(){this.e1=1,this.loading={show:!1,status:""},this.converting={src:"",status:"",doing:!1,step:0,total:0},this.isFinishEditMeta=!1,this.isSaved=!1,this.steps=["select","confirmation","meta"],this.video=W["a"].video.initObj()},startConvert:function(){this.converting.doing=!0,this.converting.status="converting video to images...",this.video.frames=[],this.converting.step=0,this.converting.total=Math.floor(this.video.duration*this.video.fps);var t=1/this.video.fps,e=0;while(this.converting.step<this.converting.total)this.converting.step++,e+=t,this.video.frames.push({idx:this.converting.step,time:e});this.converting.doing=!1,this.isFinishEditMeta&&this.pushFile()},prevStep:function(){2==this.e1&&(this.video=W["a"].video.initObj(),this.e1=1),3==this.e1&&(this.video.frames=[],this.isFinishEditMeta=!1,this.converting={src:"",status:"",doing:!1,step:0,total:0},this.e1=2)},nextStep:function(t){t===this.steps?this.e1=1:this.e1=t+1},resetCodecForm:function(){this.$refs.codecForm.reset()},validateCodecForm:function(){this.$refs.codecForm.validate()},resetMetaDataForm:function(){this.$refs.metaForm.reset()},validateMetaDataForm:function(){this.$refs.metaForm.validate()},onLoading:function(){},onValidateVideo:function(t){t&&(this.video=t,this.nextStep(1))},onValidateCodec:function(t){this.video.name=t.name,this.video.fps=t.fps,this.video.duration=t.duration,this.video.originSize.width=t.originSize.width,this.video.originSize.height=t.originSize.height,this.shouldGetFrameInfo&&this.video.source&&this.startConvert(),this.nextStep(2)},onValidateMetaData:function(t){t?(this.video.metaData=t,this.video.textgrid={},this.isFinishEditMeta=!0,this.converting.doing||this.video&&this.pushFile()):this.video.metaData={}}},beforeDestroy:function(){this.video=null}},It=Rt,jt=i("0798"),Dt=i("ce7e"),Et=i("7e85"),Mt=i("e516"),Ot=i("9c54"),Lt=i("56a4"),zt=Object(u["a"])(It,j,D,!1,null,"bf4ee710",null),Pt=zt.exports;f()(zt,{VAlert:jt["a"],VBtn:v["a"],VCard:$t["a"],VCardActions:_t["a"],VCardText:_t["c"],VCardTitle:_t["d"],VDivider:Dt["a"],VSpacer:w["a"],VStepper:Et["a"],VStepperContent:Mt["a"],VStepperHeader:Ot["a"],VStepperItems:Ot["b"],VStepperStep:Lt["a"]});var Ft={name:"m-file-upload-dialog",components:{MCardDialog:I["a"],MVideoRegistFrom:Pt},props:{value:{type:Boolean,default:!1}},data:function(){return{title:"$vuetify.forms.video.title",loaded:!1}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{t:function(t){return this.$vuetify.lang.t(t)},close:function(){this.dialog=!1,this.loaded||this.$vuewer.snackbar.warning("$vuetify.forms.video.messages.stop")},onLoaded:function(t){this.loaded=!0,this.$vuewer.snackbar.success("$vuetify.forms.video.messages.success"),this.$store.state.setting.shouldMovePageAferAddingFile&&(this.dialog=!1,this.$router.push({path:"/files/".concat(t)}))},onError:function(t){~t.message.indexOf("out of memory")?this.$vuewer.snackbar.error("$vuetify.forms.video.messages.outofmemory"):this.$vuewer.snackbar.error(t),this.dialog=!1}}},At=Ft,Nt=Object(u["a"])(At,V,R,!1,null,"55b10bb8",null),Bt=Nt.exports;f()(Nt,{VBtn:v["a"],VIcon:p["a"]});var Gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"green",fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[i("v-autocomplete",{attrs:{items:t.files,loading:t.isLoading,"item-text":"name",label:"target files","return-object":""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.loadData}},[t._v("Ok")])],1)],1)],1)},Ut=[],qt={name:"m-dropbox-dialog",components:{MCardDialog:I["a"]},data:function(){return{tag:"component:m-dropbox-dialog",title:"$vuetify.pages.dropbox.load",isLoading:!1,selected:null}},props:{value:{type:Boolean}},computed:{files:function(){return this.$store.state.files.chaches||[]},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&(this.selected=[])}},methods:{close:function(){this.dialog=!1},loadData:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.selected){t.next=14;break}return this.$vuewer.loading.start("sync db"),t.next=4,this.$vuewer.dropbox.read(this.selected.path_display);case 4:return e=t.sent,i=JSON.parse(e),t.next=8,this.$vuewer.db.put(i);case 8:return t.next=10,this.$vuewer.db.gets();case 10:n=t.sent,this.$store.commit("files/files",n),this.$vuewer.loading.end(),this.dialog=!1;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Kt=qt,Ht=i("c6a6"),Wt=Object(u["a"])(Kt,Gt,Ut,!1,null,"815a7394",null),Xt=Wt.exports;f()(Wt,{VAutocomplete:Ht["a"],VBtn:v["a"],VCard:$t["a"],VCardActions:_t["a"],VCardText:_t["c"],VSpacer:w["a"]});var Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",title:t.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card-text",[t.dialog?i("m-db-import-form",{on:{reject:t.onRejected,loaded:t.onLoaded,error:t.onError}}):t._e()],1)],1)},Yt=[],Zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[null===t.json?i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.db.json.title")+"*",accept:"application/json"},on:{change:t.onChange}}):t.loading?i("div",{staticClass:"text-center ma-5"},[i("v-progress-circular",{attrs:{size:70,width:7,color:"primary",indeterminate:""}}),i("span",{staticClass:"ma-5"},[t._v("Updateing db...")])],1):i("v-alert",{staticClass:"mt-4",attrs:{prominent:"",type:"error"}},[i("v-row",{attrs:{align:"center"}},[i("v-col",{staticClass:"grow"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.forms.db.warning"))+" ")]),i("v-col",{staticClass:"shrink pa-1"},[i("v-btn",{attrs:{color:"error darken-2"},on:{click:t.dbLoad}},[t._v("YES")]),i("v-btn",{staticClass:"mt-4",attrs:{color:"error darken-3"},on:{click:function(e){return t.$emit("reject")}}},[t._v(" NO ")])],1)],1)],1)],1)},Qt=[],te={name:"m-db-import-form",data:function(){return{valid:!1,loading:!1,json:null}},methods:{dbLoad:function(){var t=this;this.loading=!0,this.$store.dispatch("files/load",this.json).then((function(){t.loading=!1,t.$emit("loaded")})).catch((function(e){return t.$emit("error",e)}))},onChange:function(t){var e=this;if(t&&t.name){this.$emit("loading");var i=new FileReader;i.readAsText(t),i.onload=function(){e.json=i.result}}}}},ee=te,ie=i("490a"),ne=Object(u["a"])(ee,Zt,Qt,!1,null,"6563f90c",null),re=ne.exports;f()(ne,{VAlert:jt["a"],VBtn:v["a"],VCol:St["a"],VFileInput:Y["a"],VForm:nt["a"],VProgressCircular:ie["a"],VRow:Ct["a"]});var ae={name:"m-db-import-dialog",components:{MCardDialog:I["a"],MDbImportForm:re},props:{value:{type:Boolean,default:!1}},data:function(){return{title:"$vuetify.forms.db.title",loaded:!1}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{t:function(t){return this.$vuetify.lang.t(t)},close:function(){this.dialog=!1,this.loaded||this.$vuewer.snackbar.warning("$vuetify.forms.db.messages.stop"),"Home"!==this.$route.name&&this.$router.push({name:"Home"})},onRejected:function(){this.loaded=!1,this.close()},onLoaded:function(){this.loaded=!0,this.close(),this.$vuewer.snackbar.success("$vuetify.forms.db.messages.success")},onError:function(t){this.loaded=!0,this.close(),~t.message.indexOf("out of memory")?this.$vuewer.snackbar.error("$vuetify.forms.db.messages.outofmemory"):this.$vuewer.snackbar.error(t)}}},oe=ae,se=Object(u["a"])(oe,Jt,Yt,!1,null,"2a2b05b9",null),ce=se.exports;f()(se,{VBtn:v["a"],VCardText:_t["c"],VIcon:p["a"]});var le=i("c1df"),ue=i.n(le),de={name:"MNavigationDrawer",components:{MFileUploadDialog:Bt,MDbImportDialog:ce,MDropboxDialog:Xt},data:function(){return{current:null,open:{pages:!0,files:!1,dropboxes:!1,databases:!1,convarters:!1,depelops:!1},dropboxDialog:!1,uploadDialog:!1,dbImportDialog:!1,updateToken:!1}},computed:{$showDev:function(){return this.$store.state.setting.showDev},isVuewer:function(){var t=this.$route.fullPath.split("/");return t.length>0&&"files"==t[1]},activeFile:function(){return this.isVuewer?Number(this.$route.params.id):null},isLoading:function(){return this.$store.state.files.isLoading},files:function(){var t="dddd, MMMM Do YYYY, h:mm:ss a";"ja"==this.$vuetify.lang.current&&(ue.a.locale("ja"),t="YYYY 年 MM 月 DD 日(ddd) a h:mm:ss");var e=this.$store.state.files.files||[];return e.map((function(e){return e.lastModifiedText=ue()(e.lastModifiedAt).format(t),e}))},chaches:function(){return this.$store.state.files.chaches||[]},diff:function(){var t=this.chaches.map((function(t){return t.name.split(".")[0]})),e=this.files.map((function(t){return t.name.split(".")[0]}));return t.filter((function(t){return-1==e.indexOf(t)}))},drawer:{get:function(){return this.$store.state.drawer},set:function(t){this.$store.commit("drawer",t)}},converters:function(){var t=this,e=function(e){t.$route.path!==e&&t.$router.push({path:e})};return[{text:"video2png",icon:"mdi-filmstrip-box-multiple",function:function(){return e("/convarters/video2png")}},{text:"video2wav",icon:"mdi-file-music",function:function(){return e("/convarters/video2wav")}}]},developPages:function(){var t=this;return this.$router.options.routes.filter((function(t){return!!t.develop})).map((function(e,i){return e.name==t.$route.name&&(t.current=i,e.current=!0),e.title=e.name,e.to=function(){t.to({name:e.name})},e}))},pages:function(){var t=this;return this.$router.options.routes.filter((function(t){return!t.develop&&t.name})).map((function(e,i){return e.name==t.$route.name&&(t.current=i,e.current=!0),e.title=t.$vuetify.lang.t("$vuetify.pages.".concat(e.name.toLowerCase())),e.to=function(){t.to({name:e.name})},e}))},hasToken:function(){return!!this.updateToken||this.$vuewer.dropbox.hasToken()}},methods:{moment:function(t){return ue()(t)},allClose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(var e in this.open)this.open[e]=null!==t&&e==t},to:function(t){t.name&&this.$route.name!==t.name&&this.$router.push(t),t.id&&Number(this.$route.params.id)!==Number(t.id)&&this.$router.push({path:"/files/".concat(t.id)})},loadDropbox:function(){var t=this,e=this.$store.getters["current/video/dropboxPath"];e?(this.$vuewer.loading.start("$vuetify.loading"),this.$vuewer.dropbox.read(e).then((function(e){var i=JSON.parse(e);t.$store.dispatch("current/loadObj",i),t.$vuewer.snackbar.success("$vuetify.loaded")})).catch((function(e){var i="DROPBOX ERROR: ".concat(e.status," :").concat(e.error.error_summary);t.$vuewer.snackbar.error(i)})).finally((function(){t.$vuewer.loading.end(),t.drawer=!1}))):this.dropboxDialog=!0},dropboxAuth:function(){this.$vuewer.dropbox.auth()},dbAdd:function(){this.uploadDialog=!0,this.drawer=!1},dbLoad:function(){this.dbImportDialog=!0,this.drawer=!1},dbDump:function(){var t=this;this.$store.dispatch("files/dump").then((function(){var e=t.$vuetify.lang.t("$vuetify.pages.on.dump");t.$store.dispatch("snackbar/success",e)})).catch((function(e){t.$store.dispatch("snackbar/error",e.message)})).finally((function(){t.drawer=!1}))},dbClear:function(){var t=this;this.$store.dispatch("files/clear").then((function(){var e=t.$vuetify.lang.t("$vuetify.pages.on.clear");t.$store.dispatch("snackbar/success",e),t.drawer=!1,t.to({name:"Home"})})).catch((function(e){t.$store.dispatch("snackbar/error",e.message)}))},fileDestroy:function(t){var e=this;this.$store.dispatch("files/destroy",t.id).then((function(t){var i=e.$vuetify.lang.t("$vuetify.pages.on.destroy","file id = ".concat(t));e.$store.dispatch("snackbar/success",i),t==e.$route.params.id&&e.$router.push({name:"Home"})})).catch((function(t){e.$store.dispatch("snackbar/error",t.message),e.drawer=!1}))}},watch:{isVuewer:function(t,e){t!==e&&(1==t?this.allClose("files"):this.allClose("pages"))}},mounted:function(){window.location.hash?(this.$vuewer.dropbox.setToken(window.location.hash),this.updateToken=!0):this.isVuewer&&this.allClose("files"),this.$store.dispatch("files/dropbox")}},fe=de,me=(i("fa48"),i("cc20")),he=i("adda"),ve=i("56b0"),pe=i("1800"),ge=i("8270"),xe=i("34c3"),be=i("f774"),ye=Object(u["a"])(fe,C,T,!1,null,"65482caa",null),we=ye.exports;f()(ye,{VBtn:v["a"],VChip:me["a"],VDivider:Dt["a"],VIcon:p["a"],VImg:he["a"],VList:g["a"],VListGroup:ve["a"],VListItem:x["a"],VListItemAction:pe["a"],VListItemAvatar:ge["a"],VListItemContent:b["b"],VListItemIcon:xe["a"],VListItemSubtitle:b["c"],VListItemTitle:b["d"],VNavigationDrawer:be["a"],VProgressCircular:ie["a"]});var ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-bottom-sheet",{model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[i("v-card",[i("v-toolbar",{attrs:{color:"purple",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[i("v-tabs",{attrs:{centered:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},t._l(t.items.length,(function(e){return i("v-tab",{key:e},[t._v(" "+t._s(t.items[e-1])+" ")])})),1)]},proxy:!0}])},[i("v-text-field",{staticClass:"mx-4",attrs:{flat:"",rounded:"","hide-details":"",label:"Search","prepend-inner-icon":"mdi-magnify","solo-inverted":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-tabs-items",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[i("v-tab-item",[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticClass:"headline"},[t._v("LOG")]),i("v-data-table",{attrs:{headers:t.headers,items:t.logs,search:t.search}})],1)],1),i("v-tab-item",[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticClass:"headline"},[t._v("DB LOG")]),i("v-data-table",{attrs:{headers:t.headers,items:t.dblogs,search:t.search}})],1)],1),i("v-tab-item",[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticClass:"headline"},[t._v("ERRORS")]),i("v-data-table",{attrs:{headers:t.headers,items:t.errors,search:t.search}})],1)],1)],1)],1)],1)},$e=[],_e={name:"m-logging-seet",data:function(){return{search:"",tabs:null,items:["SYSTEM","DATABASE","ERROR"]}},computed:{headers:function(){return 1==this.tabs?[{text:"TIME",value:"time"},{text:"CRUD",value:"tag"},{text:"TABLE",value:"table"},{text:"DETAIL",value:"msg"}]:[{text:"TIME",value:"time"},{text:"TAG",value:"tag"},{text:"DETAIL",value:"msg"}]},sheet:{get:function(){return this.$store.state.logging.show},set:function(t){this.$store.commit("logging/show",t)}},dblogs:function(){return this.$store.state.logging.dbLogs},logs:function(){return this.$store.state.logging.logs},errors:function(){return this.$store.state.logging.errors}}},Se=_e,Ce=i("288c"),Te=i("8fea"),Ve=i("71a3"),Re=i("c671"),Ie=i("fe57"),je=i("aac8"),De=i("71d9"),Ee=Object(u["a"])(Se,ke,$e,!1,null,"74b6f2ee",null),Me=Ee.exports;f()(Ee,{VBottomSheet:Ce["a"],VCard:$t["a"],VCardTitle:_t["d"],VDataTable:Te["a"],VTab:Ve["a"],VTabItem:Re["a"],VTabs:Ie["a"],VTabsItems:je["a"],VTextField:k["a"],VToolbar:De["a"]});var Oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-snackbar",{attrs:{color:t.color,timeout:t.timeout,top:"",right:"",absolute:"",shaped:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[i("v-btn",t._b({attrs:{icon:"",color:"white"},on:{click:function(e){t.show=!1}}},"v-btn",n,!1),[i("v-icon",[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},["error"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-alert-octagram")]):t._e(),"warning"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-alert")]):t._e(),"info"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-information")]):t._e(),"success"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-check-circle")]):t._e(),i("span",{staticClass:"subtitle"},[t._v(" "+t._s(t.$vuetify.lang.t(t.message))+" ")])],1)},Le=[],ze={name:"m-app-snackbar",computed:{show:{get:function(){return this.$store.state.snackbar.show},set:function(t){this.$store.commit("snackbar/show",t)}},type:function(){return this.$store.state.snackbar.type},color:function(){return this.$store.state.snackbar.color},message:function(){return this.$store.state.snackbar.message||"THIS IS DEBUG MASSAGE"},timeout:function(){return this.$store.state.snackbar.timeout}}},Pe=ze,Fe=i("2db45"),Ae=Object(u["a"])(Pe,Oe,Le,!1,null,"2d31db02",null),Ne=Ae.exports;f()(Ae,{VBtn:v["a"],VIcon:p["a"],VSnackbar:Fe["a"]});var Be=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-loading-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.text))+" ")])},Ge=[],Ue=i("9de5"),qe={name:"m-app-loading-dialog",components:{MLoadingDialog:Ue["a"]},computed:{dialog:{get:function(){return this.$store.state.loading.show},set:function(t){this.$store.commit("loading/show",t)}},text:function(){return this.$store.state.loading.message},color:function(){return"primary"},progressColor:function(){return"white"}}},Ke=qe,He=Object(u["a"])(Ke,Be,Ge,!1,null,"a3a98428",null),We=He.exports,Xe={name:"App",components:{MAppBar:S,MAppSnackbar:Ne,MNavigationDrawer:we,MLoggingSeet:Me,MAppLoadingDialog:We},data:function(){return{}},watch:{"$route.hash":function(t,e){t!=e&&this.$store.dispatch("hash/text",this.$route.hash)}},mounted:function(){this.$store.commit("lang",this.$vuetify.lang),this.$store.dispatch("hash/text",this.$route.hash),this.$store.dispatch("files/init")}},Je=Xe,Ye=i("7496"),Ze=i("f6c4"),Qe=Object(u["a"])(Je,r,a,!1,null,null,null),ti=Qe.exports;f()(Qe,{VApp:Ye["a"],VMain:Ze["a"]});var ei,ii,ni=i("8c4f"),ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-drag-context",[i("m-view-layout",{ref:"layout",attrs:{heading:t.heading,desc:t.desc}},[i("v-row",[t._l(t.navs,(function(e,n){return i("v-col",{key:n,attrs:{cols:"12",md:t.cardCols}},[i("m-h-card",{class:t.mhClass,attrs:{color:e.color,icon:e.icon,title:e.title,"sub-icon":"mdi-information","sub-text":e.subText,actions:e.actions}})],1)})),i("v-col",{attrs:{cols:"12"}})],2),i("m-file-upload-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)],1)},ai=[],oi=(i("b64b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card",t._g(t._b({directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],ref:"card",staticClass:"v-card--material-stats",attrs:{icon:t.icon},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"ml-auto text-right"},[i("div",{staticClass:"body-3 font-weight-light",domProps:{textContent:t._s(t.title)}}),i("h3",{staticClass:"display-2 font-weight-light text--primary"},[t._v(" "+t._s(t.value)+" "),i("small",[t._v(t._s(t.smallValue))])])])]},proxy:!0}])},"m-card",t.$attrs,!1),t.$listeners),[i("v-col",{staticClass:"px-0",attrs:{cols:"12"}},[i("v-divider")],1),i("v-icon",{attrs:{color:t.subIconColor}},[t._v(" "+t._s(t.subIcon)+" ")]),i("span",{ref:"subText",staticClass:"caption font-weight-light mt-1 d-inline-block text-truncate",style:t.subTextStyle,domProps:{textContent:t._s(t.subText)}}),i("v-spacer"),t._l(t.actions,(function(e,n){return i("v-btn",{key:n,attrs:{icon:"",small:""},on:{click:e.function}},[i("v-icon",[t._v(t._s(e.icon))])],1)}))],2)}),si=[],ci=i("5530"),li={name:"Card",extends:$t["a"]},ui=li,di=Object(u["a"])(ui,ei,ii,!1,null,null,null),fi=di.exports,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",t._b({staticClass:"v-card--material pa-3",class:t.classes},"v-card",t.$attrs,!1),[i("div",{staticClass:"d-flex grow flex-wrap"},[t.avatar?i("v-avatar",{staticClass:"mx-auto v-card--material__avatar elevation-6",attrs:{size:"128",color:"grey"}},[i("v-img",{attrs:{src:t.avatar}})],1):i("v-sheet",{staticClass:"text-start v-card--material__heading mb-n6",class:{"pa-7":!t.$slots.image},attrs:{color:t.color,"max-height":t.icon?90:void 0,width:t.icon?"auto":"100%",elevation:"6",dark:""}},[t.$slots.heading?t._t("heading"):t.$slots.image?t._t("image"):t.title&&!t.icon?i("div",{staticClass:"display-1 font-weight-light",domProps:{textContent:t._s(t.title)}}):t.icon?i("v-icon",{attrs:{size:"32"},domProps:{textContent:t._s(t.icon)}}):t._e(),t.text?i("div",{staticClass:"headline font-weight-thin",domProps:{textContent:t._s(t.text)}}):t._e()],2),t.$slots["after-heading"]?i("div",{staticClass:"ml-6"},[t._t("after-heading")],2):t.icon&&t.title?i("div",{staticClass:"ml-4"},[i("div",{staticClass:"card-title font-weight-light",domProps:{textContent:t._s(t.title)}})]):t._e()],1),t._t("default"),t.$slots.actions?[i("v-divider",{staticClass:"mt-2"}),i("v-card-actions",{staticClass:"pb-0"},[t._t("actions")],2)]:t._e()],2)},hi=[],vi={name:"MaterialCard",props:{avatar:{type:String,default:""},color:{type:String,default:"success"},icon:{type:String,default:void 0},image:{type:Boolean,default:!1},text:{type:String,default:""},title:{type:String,default:""}},computed:{classes:function(){return{"v-card--material--has-heading":this.hasHeading}},hasHeading:function(){return Boolean(this.$slots.heading||this.title||this.icon)},hasAltHeading:function(){return Boolean(this.$slots.heading||this.title&&this.icon)}}},pi=vi,gi=(i("56ee"),i("8212")),xi=i("8dd9"),bi=Object(u["a"])(pi,mi,hi,!1,null,null,null),yi=bi.exports;f()(bi,{VAvatar:gi["a"],VCard:$t["a"],VCardActions:_t["a"],VDivider:Dt["a"],VIcon:p["a"],VImg:he["a"],VSheet:xi["a"]});var wi={name:"MHCard",inheritAttrs:!1,components:{MCard:yi},props:Object(ci["a"])(Object(ci["a"])({},fi.props),{},{icon:{type:String,required:!0},subIcon:{type:String,default:void 0},subIconColor:{type:String,default:void 0},subText:{type:String,default:void 0},title:{type:String,default:void 0},value:{type:String,default:void 0},smallValue:{type:String,default:void 0},actions:{type:Array,default:function(){return[]}}}),data:function(){return{subTextMaxWidth:150}},computed:{subTextStyle:function(){return"max-width: ".concat(this.subTextMaxWidth,"px;")}},methods:{onResize:function(){var t=this;this.$nextTick((function(){var e=50*(t.actions.length+1);if(t.$refs.card&&t.$refs.card.$el){var i=t.$refs.card.$el.clientWidth-e;t.subTextMaxWidth=i}}))}},mounted:function(){this.onResize()}},ki=wi,$i=(i("7987"),i("269a")),_i=i.n($i),Si=i("dc22"),Ci=Object(u["a"])(ki,oi,si,!1,null,null,null),Ti=Ci.exports;f()(Ci,{VBtn:v["a"],VCol:St["a"],VDivider:Dt["a"],VIcon:p["a"],VSpacer:w["a"]}),_i()(Ci,{Resize:Si["a"]});var Vi=i("8e30"),Ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fill-height",on:{dragenter:t.onDragEnter,dragleave:t.onDragLeave}},[t.overlay?i("div",{ref:"overlay",staticClass:"fill-height drop-area",on:{dragenter:t.onDragEnter,dragover:function(t){t.preventDefault()},dragleave:t.onDragLeave,drop:function(e){return e.preventDefault(),t.onDroped(e)}}},[i("span",{staticClass:"headline"},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-file-upload")]),t._v(" Drop files here to uplod ")],1)]):t._t("default")],2)},Ii=[],ji=(i("3ca3"),i("2909")),Di={name:"m-drag-context",data:function(){return{overlay:!1}},methods:{onDragEnter:function(){this.overlay=!0},onDragLeave:function(t){null==t.fromElement&&(this.overlay=!1)},onDroped:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.dataTransfer){t.next=2;break}return t.delegateYield(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(ji["a"])(e.dataTransfer.files),r=n.filter((function(t){return"video/mp4"==t.type})),a=regeneratorRuntime.mark((function t(e){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 0==e&&i.$vuewer.loading.start("downloading mp4 files ..."),n=r[e],a=i.$vuewer.io.video.initObj(),t.next=5,n.arrayBuffer();case 5:o=t.sent,i.$vuewer.io.video.info(o,function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(o){var s,c,l,u,d,f,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.fps=o.videoStream.fps,a.duration=o.duration,a.originSize=o.size,a.videoStream=o.videoStream,a.audioStream=o.audioStream,t.next=7,i.$vuewer.io.file.toBase64(n);case 7:s=t.sent,a.source=s,a.name=n.name,a.frames=[],c=Math.floor(a.duration*a.fps),l=1/a.fps,u=0,d=0;while(d<c)d++,u+=l,a.frames.push({idx:d,time:u});return f=i.$store.getters["setting/fname2meta"](n.name),f&&(a.metaData=f),t.next=20,i.$store.dispatch("files/push",a);case 20:m=t.sent,e==r.length-1&&(i.$vuewer.loading.end(),i.overlay=!1,i.$store.state.setting.shouldMovePageAferAddingFile&&i.$router.push({path:"/files/".concat(m)}));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})),t.t0=regeneratorRuntime.keys(r);case 4:if((t.t1=t.t0()).done){t.next=9;break}return o=t.t1.value,t.delegateYield(a(o),"t2",7);case 7:t.next=4;break;case 9:case"end":return t.stop()}}),t)}))(),"t0",2);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},Ei=Di,Mi=(i("68f8"),Object(u["a"])(Ei,Ri,Ii,!1,null,"a93cd8d4",null)),Oi=Mi.exports;f()(Mi,{VIcon:p["a"]});var Li={name:"Home",components:{MDragContext:Oi,MViewLayout:Vi["a"],MHCard:Ti,MFileUploadDialog:Bt},data:function(){return{fileRegistDialog:!1}},computed:{mhClass:function(){return this.$vuetify.breakpoint.smAndUp?"":"mt-5"},dialog:{get:function(){return!!this.$store.state.hash.info["file-update"]||this.fileRegistDialog},set:function(t){0==t&&this.$store.state.hash.info["file-update"]&&(this.$store.state.hash.info["file-update"]=!1),this.fileRegistDialog=t}},name:function(){return this.$store.state.appName},version:function(){return this.$store.state.appVersion},heading:function(){return"".concat(this.name," ver.").concat(this.version)},desc:function(){return"".concat(this.$vuewer.t("$vuetify.home.disc"))},navs:function(){var t=this,e=this;return{upload:{icon:"mdi-file-upload",color:"primary",title:this.$vuetify.lang.t("$vuetify.home.upload.title"),subText:this.$vuetify.lang.t("$vuetify.home.upload.hint"),actions:[{icon:"mdi-plus",function:function(){t.fileRegistDialog=!0}}]},manage:{color:"primary",icon:"mdi-database-search",title:this.$vuetify.lang.t("$vuetify.home.manage.title"),subText:this.$vuetify.lang.t("$vuetify.home.manage.hint"),actions:[{icon:"mdi-dots-vertical",function:function(){e.$router.push({name:"Meta"})}}]},demo:{color:"primary",icon:"mdi-code-brackets",title:this.$vuetify.lang.t("$vuetify.home.demo.title"),subText:this.$vuetify.lang.t("$vuetify.home.demo.hint"),actions:[{icon:"mdi-dots-vertical",function:function(){e.$router.push({name:"Meta"})}}]}}},cardCols:function(){var t=Object.keys(this.navs).length;return Math.round(12/t)}},mounted:function(){var t=this;this.$nextTick((function(){t.$store.state.hash.info["drawer"]&&t.$store.commit("drawer",!0)}))}},zi=Li,Pi=Object(u["a"])(zi,ri,ai,!1,null,"6cfdba2c",null),Fi=Pi.exports;f()(Pi,{VCol:St["a"],VRow:Ct["a"]});var Ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-drag-context",[i("v-container",{attrs:{fluid:""}},[!t.isLoading&&t.$source?i("m-vuewer",{ref:"video",attrs:{src:t.$source,fps:t.$fps,frames:t.frames,"origin-size":t.$originSize,textgrid:t.textgrid},on:{"run-noise-reduction":t.onNoiseReduction,"data-updated":t.onDataUpdated,"textgrid-updated":t.onTextGridUpdated,"frame-point-updated":t.onFramePointUpdated,"frame-rect-updated":t.onFrameRectUpdated,"frame-point-deleted":t.onFramePointDeleted,"frame-rect-deleted":t.onFrameRectDeleted,"download-json":t.downloadJson}}):t._e()],1)],1)},Ni=[],Bi=i("ac99"),Gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-w-context-menu",{on:{"click-setting":t.onClickSetting,"click-save":t.fireUpdateData,"click-load-dropbox":t.onClickLoadDropbox,"click-image-edit":t.onClickImageEdit,"click-tier-add":t.onClickTierAdd,"click-tier-edit":t.onClickTierEdit,"click-tier-delete":t.onClickTierDelete,"click-upload":t.onUploadClick,"click-download":t.onDownloadClick,"click-noise-reduction":t.onClickNoiseReduction,"click-complate":t.onClickComplate,"click-record":t.onClickRecordContextMenu}},[i("m-vuwer-layout",{ref:"layout",on:{resize:t.onResize},scopedSlots:t._u([{key:"video",fn:function(){return[i("m-video-array",{ref:"videoArray",attrs:{src:t.src,fps:t.fps,frameOffset:t.frameOffset,frames:t.$frames,"origin-size":t.originSize},on:{loadeddata:t.onLoadeddata,"frame-updated":t.onFrameUpdated,mouseover:function(e){return t.onMouseover("video-array")},keyup:t.onVideoArrayKeyup}}),t.wavesurfer?i("m-vuwer-actions",{attrs:{fps:t.fps},on:{"download-click":t.onDownloadClick,"upload-click":t.onUploadClick,mouseover:function(e){return t.onMouseover("actions")}}}):t._e()]},proxy:!0},{key:"table",fn:function(){return[i("m-text-grid",{ref:"tables",attrs:{frames:t.$frames,textgrid:t.$textgrid,"video-height":t.videoHeight},on:{"click-image-edit":t.onClickImageEdit,"click-ruler":t.onClickRuler,keyup:t.onTableKeyup,mouseover:function(e){return t.onMouseover("tables")}}})]},proxy:!0},{key:"bottom",fn:function(){return[i("m-speed-dial",{on:{"click-save":t.fireUpdateData,"click-save-dropbox":t.fireUpdateData,"click-setting":t.onClickSetting,"click-detail":t.onClickDetail,"click-ruler":t.onClickRuler,"click-image-edit":t.onClickImageEdit,"click-tier-add":t.onClickTierAdd,"click-tier-edit":t.onClickTierEdit,"click-tier-delete":t.onClickTierDelete},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}}),i("m-detail-dialog",{on:{"download-click":t.onDownloadClick,"upload-click":t.onUploadClick},model:{value:t.dialog.detail.show,callback:function(e){t.$set(t.dialog.detail,"show",e)},expression:"dialog.detail.show"}}),t.$store.state.current.layout.mini?i("m-textgrid-dialog",{attrs:{frames:t.$frames,textgrid:t.$textgrid},on:{"click-image-edit":t.onClickImageEdit,"click-ruler":t.onClickRuler},model:{value:t.dialog.textgrid.show,callback:function(e){t.$set(t.dialog.textgrid,"show",e)},expression:"dialog.textgrid.show"}}):t._e(),i("m-setting-dialog",{model:{value:t.dialog.setting.show,callback:function(e){t.$set(t.dialog.setting,"show",e)},expression:"dialog.setting.show"}}),i("m-tier-dialog",{attrs:{tiers:t.tiers,current:t.current.tier.key},model:{value:t.dialog.tier.show,callback:function(e){t.$set(t.dialog.tier,"show",e)},expression:"dialog.tier.show"}}),i("m-tier-edit-dialog",{attrs:{tiers:t.tiers,current:t.current.tier.key},model:{value:t.dialog.tierEdit.show,callback:function(e){t.$set(t.dialog.tierEdit,"show",e)},expression:"dialog.tierEdit.show"}}),i("m-tier-delete-dialog",{attrs:{tiers:t.tiers,current:t.current.tier.key},model:{value:t.dialog.tierDelete.show,callback:function(e){t.$set(t.dialog.tierDelete,"show",e)},expression:"dialog.tierDelete.show"}}),i("m-ruler-dialog",{attrs:{"origin-size":t.originSize},model:{value:t.dialog.ruler.show,callback:function(e){t.$set(t.dialog.ruler,"show",e)},expression:"dialog.ruler.show"}}),i("m-image-edit-dialog",{attrs:{"origin-size":t.originSize},on:{"rects-updated":t.onRectsUpdated,"points-updated":t.onPointsUpdated,"rect-deleted":t.onRectDeleted,"point-deleted":t.onPointDeleted},model:{value:t.dialog.imageEdit.show,callback:function(e){t.$set(t.dialog.imageEdit,"show",e)},expression:"dialog.imageEdit.show"}}),i("m-complates-dialog",{model:{value:t.dialog.complates.show,callback:function(e){t.$set(t.dialog.complates,"show",e)},expression:"dialog.complates.show"}})]},proxy:!0}])},[i("v-card",{attrs:{flat:""},on:{mouseover:function(e){return t.onMouseover("wave-surfer")}}},[i("wave-surfer",{ref:"wavesurfer",attrs:{normalize:"",responsive:"",scrollParent:"",showTextGrid:"",splitChannels:"",backend:"MediaElement","textgrid-max-height":"100px",cursorColor:t.$cursorColor,drawingContextAttributes:t.drawingContextAttributes,freqRate:t.$freqRate,minPxPerSec:t.minPxPerSec,showFreqLabel:t.$showFreqLabel,showSpectrogram:t.$showSpectrogram,showTimeLine:t.$showTimeLine,skipLength:t.skipLength,source:t.videoElm,spectrogramHeight:t.$spectrogramHeight,targetChannel:t.$targetChannel,waveColor:t.$waveColor,progressColor:t.$progressColor},on:{"spectrogram-render-end":t.onSpectrogramRenderEnd,"spectrogram-render-start":t.onSpectrogramRenderStart,"spectrogram-keyup":t.onWaveSurferKeyup,"waveform-keyup":t.onWaveSurferKeyup,"textgrid-click":t.onTextGridClick,"textgrid-current-update":t.onRecordUpdated,"textgrid-dblclick":t.onTextGridDblClick,"textgrid-keydown":t.onTextGridKeydown,"textgrid-update":t.onTextGridUpdate,"tier-add":t.onTextGridUpdate,"tier-delete":t.onTextGridUpdate,"tier-update":t.onTextGridUpdate},scopedSlots:t._u([{key:"textform",fn:function(){return[t.showTextField?i("m-record-text-field",{ref:"input",attrs:{"complate-key":t.current.key,disabled:null==t.current.tier.key},on:{"click:prepend-inner-icon":t.onVoiceUpdateRecordText,enter:t.onUpdateRecordText,next:function(e){return t.onUpdateRecordText("next")},esc:t.onEscTextField},model:{value:t.current.tier.record.text,callback:function(e){t.$set(t.current.tier.record,"text",e)},expression:"current.tier.record.text"}}):t._e()]},proxy:!0}])},[t.isLoading?i("div",{staticClass:"text-center"},[i("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}}),i("div",{staticClass:"font-weight-light subtitle-1"},[t._v(" Sound Analyzing ... ")])],1):t._e()])],1)],1)],1)},Ui=[],qi=i("e770"),Ki=qi["a"],Hi=Object(u["a"])(Ki,Gi,Ui,!1,null,"33647300",null),Wi=Hi.exports;f()(Hi,{VCard:$t["a"],VProgressCircular:ie["a"]});var Xi={computed:{$name:{get:function(){return this.$store.state.current.video.filename},set:function(t){this.$store.commit("current/video/fileName",t)}},$source:{get:function(){return this.$store.state.current.video.source},set:function(t){this.$store.commit("current/video/source",t)}},$fps:{get:function(){return this.$store.state.current.video.fps},set:function(t){this.$store.commit("current/video/fps",t)}},$duration:{get:function(){return this.$store.state.current.video.duration},set:function(t){this.$store.commit("current/video/duration",t)}},$videoStream:{get:function(){return this.$store.state.current.video.videoStream},set:function(t){this.$store.commit("current/video/videoStream",t)}},$audioStream:{get:function(){return this.$store.state.current.video.audioStream},set:function(t){this.$store.commit("current/video/audioStream",t)}},$originSize:{get:function(){return this.$store.state.current.video.originSize},set:function(t){this.$store.commit("current/video/originSize",t)}}},methods:{$initVideo:function(){this.$store.dispatch("current/video/init")}}},Ji={name:"vuewer",mixins:[Xi],components:{MVuewer:Wi,MDragContext:Oi},data:function(){return{id:null,item:{},frames:[],textgrid:{},isLoading:!1,isChange:!1}},computed:{tag:function(){return"views:vuewer"},syncDropbox:function(){return this.$store.state.setting.syncDropbox},metaData:{get:function(){return this.$store.state.current.metaData},set:function(t){this.$store.commit("current/metaData",t)}},source:{get:function(){return this.$store.state.current.video.source},set:function(t){this.$store.commit("current/video/source",t)}},fps:{get:function(){return this.$store.state.current.video.fps},set:function(t){this.$store.commit("current/video/fps",t)}}},methods:{downloadJson:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$vuewer.db.get(Number(this.id));case 3:e=t.sent,i=this.$vuewer.io.json.toFile("".concat(e.bname,".json"),e),W["a"].file.download(i,i.name),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),"DataError"==t.t0.name?this.onError(t.t0,"The file does not exist.","Home"):this.onError(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),saveDropbox:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(){var e,i,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$vuewer.dropbox.hasToken()){t.next=10;break}return this.$vuewer.loading.start("$vuetify.sending"),t.next=4,this.$vuewer.db.get(Number(this.id));case 4:e=t.sent,i="".concat(e.name.split(".")[0],".json"),n=this.$vuewer.io.json.toFile(i,e),this.$vuewer.dropbox.write("data/"+i,n).then((function(){r.$vuewer.snackbar.success("$vuetify.sended"),r.isChange=!1})).catch((function(t){var e="DROPBOX ERROR: ".concat(t.status," :").concat(t.error.error_summary);r.onError(t.error,e)})).finally((function(){r.$vuewer.loading.end()})),t.next=11;break;case 10:this.$vuewer.dropbox.auth();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onError:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e?this.$vuewer.snackbar.error(e):this.$vuewer.snackbar.error(t),this.$vuewer.console.error(this.tag,t),i&&this.$router.push({name:i})},onIdChanged:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=41;break}return this.id=e,this.$vuewer.console.log(this.tag,"change page id ".concat(e)),this.isChange=!1,this.isLoading=!0,this.$vuewer.loading.start("$vuetify.loading"),this.$initVideo(),t.prev=7,t.next=10,Bi["a"].files.get(Number(e));case 10:if(i=t.sent,this.$vuewer.db.log("files","GET","get file ".concat(e)),!i){t.next=29;break}return this.item=i,this.$source=i.source,this.$fps=i.fps,this.$name=i.name,this.$duration=i.duration,this.$videoStream=i.videoStream||{},this.$audioStream=i.audioStream||{},this.$originSize=i.originSize||{},this.metaData=i.metaData||{},this.textgrid=i.textgrid||{},console.log(this.textgrid,i.textgrid),t.next=26,Bi["a"].frames.where({fileId:i.id}).with({points:"points",rects:"rects"});case 26:this.frames=t.sent,t.next=32;break;case 29:this.$vuewer.console.error(this.tag,"The file does not exist."),this.$vuewer.snackbar.error("The file does not exist."),this.$router.push({name:"Home"});case 32:t.next=37;break;case 34:t.prev=34,t.t0=t["catch"](7),"DataError"==t.t0.name?(this.$vuewer.snackbar.error("The file does not exist."),this.$vuewer.console.error(this.tag,t.t0),this.$router.push({name:"Home"})):(this.$vuewer.snackbar.error(t.t0),this.$vuewer.console.error(this.tag,t.t0));case 37:this.isLoading=!1,this.$vuewer.loading.end(),t.next=44;break;case 41:this.$vuewer.snackbar.error("There is no id."),this.$vuewer.console.error(this.tag,"NO ID ACCESS"),this.$router.push({name:"Home"});case 44:case"end":return t.stop()}}),t,this,[[7,34]])})));function e(e){return t.apply(this,arguments)}return e}(),onNoiseReduction:function(t){var e=this;this.isLoading=!0,this.$vuewer.loading.start("$vuetify.loading"),setTimeout((function(){var i=e.$vuewer.io.file.toBuff(e.$source),n=null;if("afftdn"==t.type?n=e.$vuewer.io.video.afftdn(i):"anlmdn"==t.type?n=e.$vuewer.io.video.anlmdn(i):"bandpass"==t.type&&(n=e.$vuewer.io.video.bandpass(i,t.low,t.heigh)),null!==n&&n.MEMFS.length){var r=n.MEMFS[0],a=new Blob([r.data],{type:"video/mp4"});e.$source=null,e.$vuewer.io.video.toBase64(a).then((function(t){e.$source=t,e.isLoading=!1,e.$vuewer.loading.end()}))}else e.isLoading=!1,e.$vuewer.loading.end()}),1e3)},onTextGridUpdated:function(t){var e=this;if(t){this.isChange=!0;var i=this;for(var n in this.item.textgrid=Object.assign({},t),this.item.textgrid)this.item.textgrid[n]={values:this.item.textgrid[n].values,type:this.item.textgrid[n].type,parent:this.item.textgrid[n].parent};this.item.lastModifiedAt=Date.now(),Bi["a"].files.put(this.item).then((function(t){var n="update the textgrid of a file (id=".concat(t,")");i.$store.commit("files/update",e.item),i.$vuewer.db.log("textgrid","PUT",n),i.$vuewer.console.log("textgrid",n)})).catch((function(t){i.$vuewer.console.error("vuewer:textgrid:put",t)}))}},onFrameRectUpdated:function(t){var e=this;this.isChange=!0;var i,n=this,r="vuewer:onFrameRectUpdated",a=Object(ht["a"])(t.rects);try{for(a.s();!(i=a.n()).done;){var o=i.value,s={id:o.id,x:o.x,y:o.y,width:o.width,height:o.height,rotation:o.rotation,scaleX:o.scaleX,scaleY:o.scaleY,size:o.size,color:o.color,label:o.label||"rect-".concat(o.id),frameId:t.id};Bi["a"].rects.put(s).then((function(){n.$store.commit("files/update",e.item),n.$vuewer.db.log("rects","PUT","change rects")})).catch((function(t){n.$vuewer.snackbar.error(t),n.$vuewer.console.error(r,t)}))}}catch(c){a.e(c)}finally{a.f()}},onFramePointUpdated:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a,o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in this.isChange=!0,i=this,n="vuewer:onFramePointUpdated",e.points)a=e.points[r],o={id:a.id,x:a.x,y:a.y,color:a.color,size:a.size,label:a.label||"point-".concat(a.id),frameId:e.id},Bi["a"].points.put(o).then((function(){i.$store.commit("files/update",s.item),i.$vuewer.db.log("points","PUT","change points")})).catch((function(t){i.$vuewer.snackbar.error(t),i.$vuewer.console.error(n,t)}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onFramePointDeleted:function(t){this.isChange=!0;var e=this,i="vuewer:onFramePointDeleted";Bi["a"].points.delete(t.id).then((function(){return e.$vuewer.db.log("points","DELETE","delete point ".concat(t.id))})).catch((function(t){e.$vuewer.snackbar.error(t),e.$vuewer.console.error(i,t)}))},onFrameRectDeleted:function(t){this.isChange=!0;var e=this,i="vuewer:onFrameRectDeleted";Bi["a"].rects.delete(t.id).then((function(){return e.$vuewer.db.log("rects","DELETE","delete rects ".concat(t.id))})).catch((function(t){e.$vuewer.snackbar.error(t),e.$vuewer.console.error(i,t)}))},onDataUpdated:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in this.item.textgrid=Object.assign({},e.textgrid),this.item.textgrid)this.item.textgrid[i]={values:this.item.textgrid[i].values,type:this.item.textgrid[i].type,parent:this.item.textgrid[i].parent};return this.item.lastModifiedAt=Date.now(),t.next=5,Bi["a"].files.put(this.item);case 5:n=Object(ht["a"])(e.frames),t.prev=6,n.s();case 8:if((r=n.n()).done){t.next=18;break}if(a=r.value,!a.points||!a.points.length){t.next=13;break}return t.next=13,Bi["a"].points.bulkPut(a.points);case 13:if(!a.rects||!a.rects.length){t.next=16;break}return t.next=16,Bi["a"].rects.bulkPut(a.rects);case 16:t.next=8;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](6),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.saveDropbox();case 27:case"end":return t.stop()}}),t,this,[[6,20,23,26]])})));function e(e){return t.apply(this,arguments)}return e}(),onUnload:function(t){if(this.isChange&&this.syncDropbox&&this.$vuewer.dropbox.hasToken()){var e="Data you've inputted won't be synced in dropbox.";t.returnValue=e}}},watch:{"$route.params.id":function(t,e){var i=this;t!==e&&t&&(this.syncDropbox&&this.isChange?this.saveDropbox().then((function(){i.onIdChanged(t)})).catch((function(e){i.$vuewer.snackbar.error(e),i.onIdChanged(t)})):this.onIdChanged(t))}},created:function(){window.addEventListener("beforeunload",this.onUnload)},destroyed:function(){window.removeEventListener("beforeunload",this.onUnload)},mounted:function(){var t=this.$route.params.id;this.onIdChanged(t)},beforeRouteLeave:function(t,e,i){this.$initVideo(),this.isChange,this.syncDropbox&&this.$vuewer.dropbox.hasToken()?this.saveDropbox().then((function(){return i()})).catch((function(){return i(!1)})):i()}},Yi=Ji,Zi=i("a523"),Qi=Object(u["a"])(Yi,Ai,Ni,!1,null,"3112daca",null),tn=Qi.exports;f()(Qi,{VContainer:Zi["a"]});var en=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-drag-context",[i("m-view-layout",{attrs:{heading:t.heading,desc:t.$vuetify.lang.t(t.desc)}},[i("v-col",{class:t.colClass},[i("v-card",{staticClass:"mt-6"},[i("v-tabs",{attrs:{"fixed-tabs":"","background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab",[t._v("File")]),i("v-tab",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.textgrid.tier.interval"))+" ")]),i("v-tab",[t._v(" "+t._s(this.$vuetify.lang.t("$vuetify.textgrid.tier.point"))+" ")])],1),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",[i("m-file-table")],1),i("v-tab-item",[i("m-file-interval-table",{attrs:{items:t.intervals}})],1),i("v-tab-item",[i("m-file-point-table",{attrs:{items:t.points}})],1)],1)],1),i("v-btn",{attrs:{dark:"",fab:"",fixed:"",bottom:"",right:"",color:"primary"},on:{click:t.fileAdd}},[i("v-icon",[t._v("mdi-plus")])],1),i("m-file-upload-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)],1)],1)},nn=[],rn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{"show-expand":"","show-select":"","loading-text":"Loading... Please wait",headers:t.headers,items:t.files,loading:t.isLoading,expanded:t.expanded,"item-key":"name"},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[i("v-row",{attrs:{"align-content":"center"}},[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"100px"}},[t._v(" "+t._s(n.name)+" ")]),Object.keys(n.textgrid).length>0?i("v-chip",{attrs:{small:"",color:"success"}},[t._v(" "+t._s(Object.keys(n.textgrid).length)+" Tiers ")]):t._e()],1)]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-row",[i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.playVideo(n)}}},[i("v-icon",[t._v("mdi-play")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.openItem(n)}}},[i("v-icon",[t._v(" mdi-import ")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"green",fab:"",dark:"","x-small":""},on:{click:function(e){return t.editItem(n)}}},[i("v-icon",[t._v(" mdi-pencil ")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"error",fab:"",dark:"","x-small":""},on:{click:function(e){return t.deleteItem(n)}}},[i("v-icon",[t._v(" mdi-delete ")])],1)],1)],1)]}},{key:"expanded-item",fn:function(t){var e=t.headers,n=t.item;return[i("td",{staticClass:"px-0",attrs:{colspan:e.length}},[i("m-video-stream-list",{attrs:{"video-stream":n.videoStream}}),i("v-divider",{attrs:{inset:""}}),i("m-audio-stream-list",{attrs:{"audio-stream":n.audioStream}})],1)]}},{key:"footer",fn:function(){return[i("v-card",{attrs:{flat:""}},[i("m-video-dialog",{attrs:{src:t.src},model:{value:t.dialogs.video,callback:function(e){t.$set(t.dialogs,"video",e)},expression:"dialogs.video"}}),i("m-video-meta-data-dialog",{attrs:{"current-item":t.metaData},on:{validated:function(e){return t.onValidated(e)}},model:{value:t.dialogs.meta,callback:function(e){t.$set(t.dialogs,"meta",e)},expression:"dialogs.meta"}}),t.isSelected?i("v-card-text",[i("v-text-field",{attrs:{filled:"",type:"text","append-icon":"mdi-send",label:t.$vuetify.lang.t("$vuetify.table.file.forms.setTier.label"),hint:t.$vuetify.lang.t("$vuetify.table.file.forms.setTier.hint")},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClickAddTiers(e)},"click:append":t.onClickAddTiers},model:{value:t.tierTemplate,callback:function(e){t.tierTemplate=e},expression:"tierTemplate"}})],1):t._e(),t.isSelected?i("v-card-actions",[i("v-spacer")],1):t._e()],1)]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})},an=[],on=(i("a623"),i("45fc"),i("07ac"),i("2ca0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{title:t.$vuetify.lang.t(t.title),titleColor:"green"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{color:"grey lighten-2"}},[i("v-card-text",[t.dialog?i("m-video-meta-data-form",{ref:"form",attrs:{"current-item":t.currentItem},on:{validated:t.onValidated}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("ok")])],1)],1)],1)}),sn=[],cn={name:"m-video-meta-data-dialog",components:{MCardDialog:I["a"],MVideoMetaDataForm:Vt},data:function(){return{title:"$vuetify.forms.video.steps.meta"}},props:{value:{type:Boolean},currentItem:{type:Object,default:function(){return{}}}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){this.$emit("validated",t),this.close()}}},ln=cn,un=Object(u["a"])(ln,on,sn,!1,null,"00316d5f",null),dn=un.exports;f()(un,{VBtn:v["a"],VCard:$t["a"],VCardActions:_t["a"],VCardText:_t["c"],VSpacer:w["a"]});var fn=i("ea1e"),mn=i("0bad"),hn=i("94d2"),vn={name:"m-file-table",components:{MVideoDialog:fn["a"],MVideoMetaDataDialog:dn,MVideoStreamList:hn["a"],MAudioStreamList:mn["a"]},data:function(){return{tierTemplate:"",dialogs:{video:!1,meta:!1},id:null,src:"",metaData:{},selected:[],expanded:[]}},computed:{isSelected:function(){return this.selected.length>0},query:function(){return{args:this.$store.getters["search/args"],kwargs:this.$store.getters["search/kwargs"],norargs:this.$store.getters["search/norargs"]}},dformat:function(){var t="dddd, MMMM Do YYYY, h:mm:ss a";return"ja"==this.$vuetify.lang.current&&(ue.a.locale("ja"),t="YYYY/MM/DD h:mm:ss"),t},files:function(){var t=this,e=this.$store.state.files.files||[];return e=e.map((function(e){return e.size="".concat(e.originSize.width," * ").concat(e.originSize.height),e.lastModifiedText=ue()(e.lastModifiedAt).format(t.dformat),e.search=Object(ci["a"])({name:e.name,fps:String(e.fps),duration:String(e.duration),size:e.size,lastModifiedAt:e.lastModifiedText},e.metaData),e})),e=this.argFilter(this.query.args,e),e=this.kwargFilter(this.query.kwargs,e),e=this.norFilter(this.query.norargs,e),e},isLoading:function(){return this.$store.state.files.isLoading},fields:function(){return this.$store.getters["files/fields"]},headers:function(){var t="$vuetify.table.file",e=[{text:this.$vuetify.lang.t("".concat(t,".name")),value:"name"},{text:this.$vuetify.lang.t("".concat(t,".lastModifiedAt")),value:"lastModifiedText"},{text:this.$vuetify.lang.t("".concat(t,".fps")),value:"fps"},{text:this.$vuetify.lang.t("".concat(t,".duration")),value:"duration"},{text:this.$vuetify.lang.t("".concat(t,".size")),value:"size"}];if(this.fields){var i,n=Object(ht["a"])(this.fields);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.push({text:r,class:"text-truncate",value:"metaData.".concat(r)})}}catch(a){n.e(a)}finally{n.f()}}return e.push({text:this.$vuetify.lang.t("".concat(t,".actions")),value:"actions",width:"150px",sortable:!1,align:"end"}),e}},methods:{norFilter:function(t,e){var i=e;return Object.keys(t).length&&(i=e.filter((function(e){return Object.keys(t).map((function(i){return i in e.search&&-1==e.search[i].indexOf(t[i])})).every((function(t){return!0===t}))}))),i.length?i:e},kwargFilter:function(t,e){var i=e;return Object.keys(t).length&&(i=e.filter((function(e){return Object.keys(t).map((function(i){return i in e.search&&String(e.search[i]).startsWith(t[i])})).every((function(t){return!0===t}))}))),i.length?i:e},argFilter:function(t,e){var i=e;return t.length&&(i=e.filter((function(e){var i=Object.values(e.search);return t.map((function(t){return i.some((function(e){return String(e).startsWith(t)}))})).every((function(t){return!0===t}))}))),i.length?i:e},onClickAddTiers:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(){var e,i,n,r,a,o,s,c,l,u,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$vuewer.text.query(this.tierTemplate),i=Object.keys(e).filter((function(t){return"interval"==String(e[t]).toLowerCase()||"point"==String(e[t]).toLowerCase()})).map((function(t){return{key:t,type:e[t]}})),!i.length){t.next=41;break}this.$vuewer.loading.start("set tiers ..."),n=Object(ht["a"])(this.selected),t.prev=5,n.s();case 7:if((r=n.n()).done){t.next=32;break}a=r.value,o=a.textgrid||{},s=Object(ht["a"])(i);try{for(l=function(){var t=c.value;-1==Object.keys(o).findIndex((function(e){return e==t.key}))&&(o[t.key]={type:t.type,parent:null,values:[]})},s.s();!(c=s.n()).done;)l()}catch(m){s.e(m)}finally{s.f()}return t.prev=12,t.next=15,Bi["a"].files.get(a.id);case 15:return u=t.sent,u.lastModifiedAt=Date.now(),u.textgrid=o,t.next=20,Bi["a"].files.put(u);case 20:d=t.sent,f="update the textgrid of a file (id=".concat(d,")"),this.$vuewer.db.log("textgrid","PUT",f),this.$vuewer.console.log("textgrid",f),t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](12),this.$vuewer.console.error("meta:textgrid:put",t.t0),this.$vuewer.snackbar.error(t.t0);case 30:t.next=7;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t["catch"](5),n.e(t.t1);case 37:return t.prev=37,n.f(),t.finish(37);case 40:this.$vuewer.loading.end();case 41:case"end":return t.stop()}}),t,this,[[5,34,37,40],[12,26]])})));function e(){return t.apply(this,arguments)}return e}(),playVideo:function(t){this.src=t.source,this.dialogs.video=!0},openItem:function(t){this.$router.push({path:"/files/".concat(t.id)})},editItem:function(t){this.metaData=t.metaData,this.id=t.id,this.dialogs.meta=!0},deleteItem:function(t){var e=this,i=t.name,n=this;this.$store.dispatch("files/destroy",t.id).then((function(){var t=e.$vuetify.lang.t("$vuetify.pages.on.destroy",i);n.$vuewer.snackbar.warning(t)})).catch((function(t){n.$vuewer.console.error(t),n.$vuewer.snackbar.error(t)}))},onValidated:function(t){var e=this,i=this.files.findIndex((function(t){return t.id==e.id}));if(i>-1){var n=this.files[i];n.metaData=t,Bi["a"].files.put(n).then((function(t){Bi["a"].files.get(t).then((function(t){var r="update the metadata of a file (id=".concat(t.id,")");e.$vuewer.snackbar.success(r),e.files.splice(i,1,n)}))})).catch((function(t){e.$vuewer.snackbar.error(t),e.$vuewer.console.error(t)}))}}}},pn=vn,gn=Object(u["a"])(pn,rn,an,!1,null,"fe00210e",null),xn=gn.exports;f()(gn,{VBtn:v["a"],VCard:$t["a"],VCardActions:_t["a"],VCardText:_t["c"],VChip:me["a"],VCol:St["a"],VDataTable:Te["a"],VDivider:Dt["a"],VIcon:p["a"],VRow:Ct["a"],VSpacer:w["a"],VTextField:k["a"]});var bn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{headers:t.headers,items:t.$items,"item-key":"id","show-select":""},scopedSlots:t._u([{key:"item.start",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.start)+" ")])]}},{key:"item.end",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.end)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-row",[i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.playItem(n)}}},[i("v-icon",[t._v("mdi-play")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.trimItem(n)}}},[i("v-icon",[t._v("mdi-scissors-cutting")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.openItem(n)}}},[i("v-icon",[t._v("mdi-import")])],1)],1)],1)]}},{key:"footer",fn:function(){return[i("v-card",{attrs:{flat:""}},[i("m-video-dialog",{attrs:{src:t.src,start:t.start,end:t.end},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}}),t.selected.length>1?i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary"},on:{click:t.resynthesis}},[t._v("Download (ZIP)")])],1):t._e()],1)]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})},yn=[],wn=i("b39c"),kn=wn["a"],$n=Object(u["a"])(kn,bn,yn,!1,null,"5a61240c",null),_n=$n.exports;f()($n,{VBtn:v["a"],VCard:$t["a"],VCardActions:_t["a"],VCol:St["a"],VDataTable:Te["a"],VIcon:p["a"],VRow:Ct["a"],VSpacer:w["a"]});var Sn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{search:t.$keyword,headers:t.headers,items:t.items,"item-key":"id"},scopedSlots:t._u([{key:"item.time",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.time)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-row",[i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.playItem(n)}}},[i("v-icon",[t._v("mdi-play")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.trimItem(n)}}},[i("v-icon",[t._v("mdi-scissors-cutting")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.openItem(n)}}},[i("v-icon",[t._v("mdi-import")])],1)],1)],1)]}},{key:"footer",fn:function(){return[i("m-video-dialog",{attrs:{src:t.src,start:t.start,end:t.end},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})]},proxy:!0}])})},Cn=[],Tn=i("a57c"),Vn=Tn["a"],Rn=Object(u["a"])(Vn,Sn,Cn,!1,null,"19811326",null),In=Rn.exports;f()(Rn,{VBtn:v["a"],VCol:St["a"],VDataTable:Te["a"],VIcon:p["a"],VRow:Ct["a"]});var jn={name:"MetaManager",components:{MDragContext:Oi,MViewLayout:Vi["a"],MFileUploadDialog:Bt,MFileTable:xn,MFileIntervalTable:_n,MFilePointTable:In},data:function(){return{heading:"Data Manager",desc:"$vuetify.meta.disc",dialog:!1,tab:null}},methods:{fileAdd:function(){this.dialog=!0}},computed:{colClass:function(){return this.$vuetify.breakpoint.smAndUp?"":"ma-0 pa-0"},keyword:function(){return this.$store.state.search.keyword},records:function(){return this.$store.getters["files/records"]},intervals:function(){return this.records?this.records.filter((function(t){return"interval"==t.type})):[]},points:function(){return this.records?this.records.filter((function(t){return"point"==t.type})):[]}},mounted:function(){this.$store.dispatch("search/show")},beforeDestroy:function(){this.$store.dispatch("search/init")}},Dn=jn,En=Object(u["a"])(Dn,en,nn,!1,null,"ab6e9818",null),Mn=En.exports;f()(En,{VBtn:v["a"],VCard:$t["a"],VCol:St["a"],VIcon:p["a"],VTab:Ve["a"],VTabItem:Re["a"],VTabs:Ie["a"],VTabsItems:je["a"]});var On=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-col",[i("m-t-card",{attrs:{dense:"",accordion:"",title:"SYSTEM SETTING"}},[i("v-card-text",[i("m-app-setting-from")],1)],1),i("m-t-card",{staticClass:"mt-5",attrs:{dense:"",accordion:"",title:"WAVESURFER SETTING"}},[i("v-card-text",[i("m-setting-from")],1)],1),i("v-btn",{staticClass:"my-5",attrs:{block:"",color:"error"},on:{click:t.setDefaultSetting}},[t._v(" Reset setting ")])],1)],1)},Ln=[],zn=i("531d"),Pn=i("7c54"),Fn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form"},[i("label",[t._v(t._s(t.t(t.locale+".loading.label")))]),i("div",{staticClass:"mb-4"},[i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t(t.locale+".loading.shouldGetVideoInfo.label")},model:{value:t.$shouldGetVideoInfo,callback:function(e){t.$shouldGetVideoInfo=e},expression:"$shouldGetVideoInfo"}}),i("span",{staticClass:"caption ml-1"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-information")]),t._v(" "+t._s(t.t(t.locale+".loading.shouldGetVideoInfo.hint"))+" ")],1)],1),i("v-checkbox",{attrs:{label:t.t(t.locale+".loading.shouldMovePageAferAddingFile.label")},model:{value:t.$shouldMovePageAferAddingFile,callback:function(e){t.$shouldMovePageAferAddingFile=e},expression:"$shouldMovePageAferAddingFile"}}),i("v-text-field",{attrs:{suffix:"sep = '"+t.$nameSep+"'",label:t.t(t.locale+".loading.nameFormat.label"),hint:t.t(t.locale+".loading.nameFormat.hint")},model:{value:t.$nameFormat,callback:function(e){t.$nameFormat=e},expression:"$nameFormat"}}),i("v-text-field",{attrs:{suffix:"MB",rules:t.rules.positiveIntegerRules,label:t.t(t.locale+".loading.maxVideoSize.label"),hint:t.t(t.locale+".loading.maxVideoSize.hint")},model:{value:t.$maxVideoSize,callback:function(e){t.$maxVideoSize=e},expression:"$maxVideoSize"}}),i("label",[t._v(t._s(t.t(t.locale+".app.label")))]),i("v-text-field",{staticClass:"mb-5",attrs:{label:t.t(t.locale+".app.timeout.label"),hint:t.t(t.locale+".app.timeout.hint"),rules:t.rules.positiveIntegerOrErrorRules,"persistent-hint":"",suffix:"Milli Sec"},model:{value:t.timeout,callback:function(e){t.timeout=e},expression:"timeout"}}),i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t(t.locale+".app.showDev.label")},model:{value:t.$showDev,callback:function(e){t.$showDev=e},expression:"$showDev"}}),i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t(t.locale+".app.syncDropbox.label")},model:{value:t.$syncDropbox,callback:function(e){t.$syncDropbox=e},expression:"$syncDropbox"}})],1)},An=[],Nn=i("53ca"),Bn={name:"m-app-setting-form",mixins:[q["a"],U["a"]],data:function(){return{locale:"$vuetify.setting.form"}},computed:{timeout:{get:function(){return this.$store.state.snackbar.timeout},set:function(t){var e=Object(Nn["a"])(t);"number"==e?this.$store.commit("snackbar/timeout",t):"string"==e&&Number(t)&&this.$store.commit("snackbar/timeout",Number(t))}}},methods:{t:function(t){return this.$vuetify.lang.t(t)}}},Gn=Bn,Un=Object(u["a"])(Gn,Fn,An,!1,null,"eda1392e",null),qn=Un.exports;f()(Un,{VCheckbox:it["a"],VForm:nt["a"],VIcon:p["a"],VTextField:k["a"]});var Kn={name:"Setting",components:{MViewLayout:Vi["a"],MTCard:zn["a"],MSettingFrom:Pn["a"],MAppSettingFrom:qn},data:function(){return{heading:"Setting"}},methods:{setDefaultSetting:function(){this.$store.dispatch("setting/setDefault")}},computed:{desc:function(){return"".concat(this.$vuetify.lang.t("$vuetify.setting.disc"))}}},Hn=Kn,Wn=Object(u["a"])(Hn,On,Ln,!1,null,"23b03ada",null),Xn=Wn.exports;f()(Wn,{VBtn:v["a"],VCardText:_t["c"],VCol:St["a"]});var Jn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-col",{attrs:{cols:"12"}},[i("m-t-card",{attrs:{title:"Sample Videos"}},[i("v-list",{attrs:{flat:""}},[i("v-subheader",[t._v("Select one item for the live demo.")]),i("v-list-item-group",{attrs:{color:"primary"},model:{value:t.sample,callback:function(e){t.sample=e},expression:"sample"}},t._l(t.samples,(function(e,n){return i("v-list-item",{key:n},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-account")])],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e)}})],1)],1)})),1)],1)],1)],1)],1)},Yn=[],Zn={name:"Demo",components:{MViewLayout:Vi["a"],MTCard:zn["a"]},data:function(){return{sample:null}},computed:{heading:function(){return"Live Demo"},samples:function(){return["sample1.mp4","sample2.mp4","sample3.mp4"]},desc:function(){return"".concat(this.$vuetify.lang.t("$vuetify.demo.disc"))}},watch:{sample:function(t,e){null!==t&&t!=e&&this.fetchVideo(this.samples[t])}},methods:{fetchVideo:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$vuewer.loading.start("downloading a demo file ..."),i=this.toUrl(e),t.prev=2,t.next=5,W["a"].file.fetch(i,e,{type:"video/mp4"});case 5:if(n=t.sent,!n){t.next=16;break}if(!n.arrayBuffer){t.next=15;break}return r=W["a"].video.initObj(),t.next=11,n.arrayBuffer();case 11:a=t.sent,W["a"].video.info(a,(function(t){r.fps=t.videoStream.fps,r.duration=t.duration,r.originSize=t.size,r.videoStream=t.videoStream,r.audioStream=t.audioStream,r.metaData={demo:!0},W["a"].file.toBase64(n).then((function(t){r.source=t,r.name="DEMO: ".concat(e),r.frames=[];var i=0,n=0,a=Math.floor(r.duration*r.fps),s=1/r.fps;while(i<a)i++,n+=s,r.frames.push({idx:i,time:n});o.$store.dispatch("files/push",r).then((function(t){o.$vuewer.snackbar.success("$vuetify.forms.video.messages.success"),o.$router.push({path:"/files/".concat(t)})})).catch((function(t){console.error(t)})).finally((function(){o.$vuewer.loading.end()}))}))})),t.next=16;break;case 15:this.$vuewer.loading.end();case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](2),this.$vuewer.loading.end(),t.abrupt("return",null);case 22:case"end":return t.stop()}}),t,this,[[2,18]])})));function e(e){return t.apply(this,arguments)}return e}(),toUrl:function(t){return"https://raw.githubusercontent.com/qh73xe/mri-vuewer.dev/master/misc/".concat(t)}}},Qn=Zn,tr=i("1baa"),er=i("e0c7"),ir=Object(u["a"])(Qn,Jn,Yn,!1,null,"824b715a",null),nr=ir.exports;f()(ir,{VCol:St["a"],VIcon:p["a"],VList:g["a"],VListItem:x["a"],VListItemContent:b["b"],VListItemGroup:tr["a"],VListItemIcon:xe["a"],VListItemTitle:b["d"],VSubheader:er["a"]});var rr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("v-switch",{attrs:{label:"croping pngs"},model:{value:t.crop.show,callback:function(e){t.$set(t.crop,"show",e)},expression:"crop.show"}}),t.crop.show?i("v-row",[i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"x"},model:{value:t.crop.x,callback:function(e){t.$set(t.crop,"x",e)},expression:"crop.x"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"y"},model:{value:t.crop.y,callback:function(e){t.$set(t.crop,"y",e)},expression:"crop.y"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"width"},model:{value:t.crop.w,callback:function(e){t.$set(t.crop,"w",e)},expression:"crop.w"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"height"},model:{value:t.crop.h,callback:function(e){t.$set(t.crop,"h",e)},expression:"crop.h"}})],1)],1):t._e(),i("v-text-field",{attrs:{type:"number",label:"frame"},model:{value:t.frame,callback:function(e){t.frame=e},expression:"frame"}}),i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1)],1)],1)},ar=[],or={name:"video-png-converter",components:{MViewLayout:Vi["a"],MVideoInput:Q},data:function(){return{frame:-1,crop:{show:!1,x:0,y:0,w:0,h:0}}},computed:{heading:function(){return"Converter: mp4 to pngs"},desc:function(){return"mp4 ファイルを受け取り各フレーム毎の PNG ファイルを取得するデモです."}},methods:{onLoading:function(){this.$vuewer.loading.start("$vuetify.converting")},onLoaded:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a,o,s,c,l,u,d,f,m,h,v,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.source){t.next=39;break}if(i=this.$vuewer.io.file.toBuff(e.source),this.crop=Object.assign({},this.crop,{x:Math.round(this.crop.x),y:Math.round(this.crop.y),w:Math.round(this.crop.w),h:Math.round(this.crop.h)}),n=this.crop.show?this.crop:null,-1!=this.frame){t.next=37;break}return t.next=7,this.$vuewer.io.video.toPngs(i,e.fps,e.duration,n);case 7:if(r=t.sent,!r.MEMFS){t.next=35;break}a=[],o=Object(ht["a"])(r.MEMFS),t.prev=11,o.s();case 13:if((s=o.n()).done){t.next=22;break}return c=s.value,l=new Blob([c.data],{type:c.type}),t.next=18,this.$vuewer.io.file.toBase64(l);case 18:u=t.sent,a.push({name:c.name,base64:u});case 20:t.next=13;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](11),o.e(t.t0);case 27:return t.prev=27,o.f(),t.finish(27);case 30:return t.next=32,this.$vuewer.io.zip.toZip(a);case 32:d=t.sent,f=e.name.split(".")[0]+".zip",this.$vuewer.io.file.download(d,f);case 35:t.next=39;break;case 37:m=this.$vuewer.io.video.toPng(i,Number(this.frame),e.fps,e.duration,n),m.MEMFS&&(console.log(m.MEMFS.length),h=m.MEMFS[0],v=new Blob([h.data],{type:h.type}),p=e.name.split(".")[0]+".png",this.$vuewer.io.file.download(v,p));case 39:this.$vuewer.loading.end();case 40:case"end":return t.stop()}}),t,this,[[11,24,27,30]])})));function e(e){return t.apply(this,arguments)}return e}()}},sr=or,cr=i("b73d"),lr=Object(u["a"])(sr,rr,ar,!1,null,"55a25e77",null),ur=lr.exports;f()(lr,{VCard:$t["a"],VCardText:_t["c"],VCol:St["a"],VRow:Ct["a"],VSwitch:cr["a"],VTextField:k["a"]});var dr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1)],1)],1)},fr=[],mr={name:"video-wav-converter",components:{MViewLayout:Vi["a"],MVideoInput:Q},computed:{heading:function(){return"Converter: mp4 to wav"},desc:function(){return"mp4 ファイルを受け取り wav ファイルに変換します"}},methods:{onLoading:function(){this.$vuewer.loading.start("$vuetify.converting")},onLoaded:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.source&&(i=this.$vuewer.io.file.toBuff(e.source),this.$vuewer.io.video.toWav(i).then((function(t){if(t.MEMFS.length){var i=t.MEMFS[0],r=new Blob([i.data],{type:i.type}),a=e.name.split(".")[0]+".wav";n.$vuewer.io.file.download(r,a)}})).catch((function(t){return n.$vuewer.snackbar.error(t)})).finally((function(){n.$vuewer.loading.end()})));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},hr=mr,vr=Object(u["a"])(hr,dr,fr,!1,null,"25084551",null),pr=vr.exports;f()(vr,{VCard:$t["a"],VCardText:_t["c"]});var gr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.mVideoInput.title")+"*",accept:".avi,.AVI,video/x-msvideo"},on:{change:t.onChange}})],1)],1)],1)},xr=[],br={name:"avi-wav-converter",components:{MViewLayout:Vi["a"]},computed:{heading:function(){return"Converter: avi to mp4"},desc:function(){return"avi ファイルを受け取り mp4 ファイルに変換します"}},methods:{onChange:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$vuewer.loading.start("$vuetify.converting"),i=e.name,t.next=4,this.$vuewer.io.file.toBase64(e);case 4:if(this.source=t.sent,!e.arrayBuffer){t.next=11;break}return t.next=8,e.arrayBuffer();case 8:n=t.sent,r=this.$vuewer.io.video.toMp4(n),r.MEMFS.length&&(a=r.MEMFS[0],o=new Blob([a.data],{type:a.type}),s=i.split(".")[0]+".mp4",this.$vuewer.io.file.download(o,s),this.$vuewer.loading.end());case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},yr=br,wr=Object(u["a"])(yr,gr,xr,!1,null,"74361da6",null),kr=wr.exports;f()(wr,{VCard:$t["a"],VCardText:_t["c"],VFileInput:Y["a"]});var $r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1),t.video.source?i("video",{attrs:{src:t.video.source,controls:""}}):t._e(),t.baseInfo?i("o-list",{attrs:{obj:t.baseInfo,caption:"基本情報"}}):t._e(),t.video.originSize?i("o-list",{attrs:{obj:t.video.originSize,caption:"画像サイズ"}}):t._e(),t.video.videoStream?i("o-list",{attrs:{obj:t.video.videoStream,caption:"動画コーディック"}}):t._e(),t.video.audioStream?i("o-list",{attrs:{obj:t.video.audioStream,caption:"音声コーディック"}}):t._e()],1),i("m-loading-dialog",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._v(" "+t._s(t.status)+" ")])],1)},_r=[],Sr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",[i("v-subheader",[t._v(t._s(t.caption))]),t._l(t.obj,(function(e,n){return i("v-list-item",{key:n},[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(n)+": "+t._s(e)+" ")])],1)],1)}))],2)},Cr=[],Tr={name:"o-list",props:{obj:{type:Object},caption:{type:String}}},Vr=Tr,Rr=Object(u["a"])(Vr,Sr,Cr,!1,null,"29613f83",null),Ir=Rr.exports;f()(Rr,{VList:g["a"],VListItem:x["a"],VListItemContent:b["b"],VListItemTitle:b["d"],VSubheader:er["a"]});var jr={name:"get-video-info-input",components:{MViewLayout:Vi["a"],MLoadingDialog:Ue["a"],MVideoInput:Q,OList:Ir},data:function(){return{heading:"Example: Get Video Info",desc:"mp4 ファイルを受け取りファイル情報を取得するデモです",isLoading:!1,video:{},status:""}},computed:{baseInfo:function(){return this.video.name?{name:this.video.name,fps:this.video.fps,duration:this.video.duration}:null}},methods:{onLoading:function(){this.isLoading=!0,this.status="ファイル情報を取得中..."},onLoaded:function(t){this.isLoading=!1,this.video=t||{}}}},Dr=jr,Er=Object(u["a"])(Dr,$r,_r,!1,null,"4d046c4c",null),Mr=Er.exports;f()(Er,{VCard:$t["a"],VCardText:_t["c"]});var Or=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-title",[t._v(" MRI-VUEWER で使用するファイルオブジェクト ")]),i("v-divider"),i("pre",[t._v('      {\n        name: String,   // ファイル名\n        source: String, // Base64 形式で文字列化された動画ファイル\n        fps: Number,    // 動画ファイルの FPS\n        duration: Number, // 動画ファイルの長さ\n\n        // 動画サイズ\n        originSize: {\n          width: Number,\n          height: Number\n        },\n\n        // 動画コーディック\n        videoStream: {\n          codec_name: String // h264 (High) (avc1 / 0x31637661)\n          pix_fmt: String    // yuv420p\n          bitrate: Number    // 265\n          fps: Number        // 13.79\n          tbr: Number        // 13.79\n          tbn: Number        // 13792\n          tbc: Number        // 27.58\n        },\n\n        // 音声コーディック\n        audioStream: {\n          codec_name: String     // aac (LC) (mp4a / 0x6134706D)\n          sample_rate: Number    // 44100\n          channel_layout: String // mono\n          sample_fmt: String     // fltp\n          bitrate: Number        // 69\n        },\n\n        // メタ情報\n        meta: {\n          key: String,\n          ...\n        },\n\n        // 画像アノテーション情報\n        frames: [\n          {\n            idx: null,       // フレーム番号\n            time: float,     // 時間\n            points: [\n              {\n                label: String,\n                color: String,\n                x: Number,\n                y: Number\n              },\n              ...\n            ],\n            rects: [\n              {\n                label: String,\n                color: String,\n                width: Number,\n                height: Number,\n                angle: Number\n              },\n              ...\n            ]\n          },\n          ...\n        ],\n\n        // 時間アノテーション情報\n        textgrid: {\n          key: {\n            type: "interval" || "point",\n            values: [ \n              { time: Number, text: String },\n              ...\n            ]\n          },\n          ...\n        }\n      }\n    ')]),i("v-divider")],1)],1)},Lr=[],zr={name:"current",components:{MViewLayout:Vi["a"]},data:function(){return{heading:"Example: Current",desc:"Vuewer が参照するデータの基本形に関して説明をします"}}},Pr=zr,Fr=Object(u["a"])(Pr,Or,Lr,!1,null,"b8c660fa",null),Ar=Fr.exports;f()(Fr,{VCard:$t["a"],VCardTitle:_t["d"],VDivider:Dt["a"]});var Nr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1),i("v-card-text",[i("pre",[t._v(t._s(t.video))])])],1),i("m-loading-dialog",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._v(t._s(t.status))])],1)},Br=[],Gr={name:"get-fo",components:{MViewLayout:Vi["a"],MVideoInput:Q,MLoadingDialog:Ue["a"]},data:function(){return{video:{},isLoading:!1,status:""}},computed:{heading:function(){return"Example: Get F0"},desc:function(){return"mp4 ファイルを受け取り f0 情報を取得するデモです"}},methods:{onLoading:function(){this.isLoading=!0,this.status="ファイル情報を取得中..."},onLoaded:function(t){if(t.source){var e=this.$vuewer.io.file.toBuff(t.source),i=this.$vuewer.io.video.toWav(e);i.MEMFS&&console.log(i.MEMFS[0])}this.isLoading=!1}}},Ur=Gr,qr=Object(u["a"])(Ur,Nr,Br,!1,null,"3578348c",null),Kr=qr.exports;f()(qr,{VCard:$t["a"],VCardText:_t["c"]});var Hr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("m-video-regist-from",{on:{loaded:t.onLoaded}}),i("v-card",[i("v-data-table",{attrs:{headers:t.headers,loading:t.videoLoaing,"loading-text":"Loading... Please wait",items:t.videos},scopedSlots:t._u([{key:"item.video",fn:function(t){var e=t.item;return[i("video",{attrs:{height:"100",src:e.source}})]}},{key:"item.size",fn:function(e){var i=e.item;return[t._v(" "+t._s(i.originSize.width)+" x "+t._s(i.originSize.height)+" ")]}},{key:"item.frame_num",fn:function(e){var i=e.item;return[t._v(" "+t._s(i.frames.length)+" ")]}},{key:"item.tiers",fn:function(e){var i=e.item;return[t._v(" "+t._s(Object.keys(i.textgrid).length)+" ")]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-btn",{attrs:{color:"error",dark:"",fab:""},on:{click:function(e){return t.deleteItem(n)}}},[i("v-icon",[t._v(" mdi-delete ")])],1)]}}])})],1),i("v-snackbar",{attrs:{bottom:"",right:""},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},Wr=[],Xr={name:"video-register",components:{MViewLayout:Vi["a"],MVideoRegistFrom:Pt},data:function(){return{heading:"Example: Video Registration",desc:"mp4 ファイルを受け取り内部 DB に登録するデモです",videos:[],videoLoaing:!1,headers:[{text:"ID",value:"id"},{text:"video",value:"video"},{text:"Name",value:"name"},{text:"FPS",value:"fps"},{text:"Duration",value:"duration"},{text:"Origin Size",value:"size"},{text:"Frame Num",value:"frame_num"},{text:"Tier Num",value:"tiers"},{text:"Actions",value:"actions"}],snackbar:{show:!1,text:""}}},methods:{onLoaded:function(t){t&&(this.loadItems(),this.snackbar.show=!0,this.snackbar.text="Add video: ".concat(t.id,": ").concat(t.name))},loadItems:function(){var t=this;this.videos=[],this.videoLoaing=!0,Bi["a"].files.toArray().then((function(e){var i,n=Object(ht["a"])(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;t.videos.push(r)}}catch(a){n.e(a)}finally{n.f()}t.videoLoaing=!1}))},deleteItem:function(t){Bi["a"].files.delete(t.id),this.loadItems()}},mounted:function(){this.loadItems()}},Jr=Xr,Yr=Object(u["a"])(Jr,Hr,Wr,!1,null,"203133d8",null),Zr=Yr.exports;f()(Yr,{VBtn:v["a"],VCard:$t["a"],VDataTable:Te["a"],VIcon:p["a"],VSnackbar:Fe["a"]});var Qr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.mVideoInput.title")+"*",accept:"video/mp4",rules:t.videoRules,"show-size":""},on:{change:t.onChange}})],1)],1)],1)},ta=[],ea=i("3e95"),ia=ea["a"],na=Object(u["a"])(ia,Qr,ta,!1,null,"28d70244",null),ra=na.exports;f()(na,{VCard:$t["a"],VCardText:_t["c"],VFileInput:Y["a"]});var aa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1),i("m-loading-dialog",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._v(" "+t._s(t.status)+" ")]),i("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"400"}},[t.isLoaded&&t.video.source?i("m-video",{attrs:{controls:"",src:t.video.source,frames:t.frames,originSize:t.video.originSize},on:{click:function(e){return t.onEvent(e,"click")},dblclick:function(e){return t.onEvent(e,"dblclick")},loadeddata:function(e){return t.onEvent(e,"loadeddata")},timeupdate:function(e){return t.onEvent(e,"timeupdate")}}}):t._e()],1)],1)},oa=[],sa=i("89a7"),ca={name:"video-card",components:{MVideoInput:Q,MLoadingDialog:Ue["a"],MVideo:sa["a"],MViewLayout:Vi["a"]},data:function(){return{heading:"Example: VideoCard",desc:"キャンバス付きビデオ表示コンポーネントの例です",status:"",isLoading:!1,isLoaded:!1,video:{},frames:[]}},methods:{onEvent:function(t,e){console.log(e,t)},onLoading:function(){this.isLoading=!0,this.isLoaded=!1,this.video={},this.status="ファイル情報を取得中..."},onLoaded:function(t){if(t){this.video=t;var e=Math.floor(this.video.duration*this.video.fps),i=1/this.video.fps,n=0,r=0;this.frames=[];while(n<e)r+=i,this.frames.push({i:n,time:r,points:[{x:n/e*this.video.originSize.width,y:this.video.originSize.height/2,size:5,color:"red"},{x:n/e*this.video.originSize.width,y:this.video.originSize.height/3,size:5,color:"green"}],rects:[{x:this.video.originSize.width/2,y:this.video.originSize.height/2,width:this.video.originSize.width/10,height:this.video.originSize.height/10,rotation:n/e*360,fill:"blue"}],texts:[{x:10,y:10,text:"Frame: ".concat(n,"/").concat(e),size:20,fontStyle:"bold",color:"yellow"}]}),n++;this.loaded=!0}else this.video={};this.isLoading=!1,this.isLoaded=!0}}},la=ca,ua=Object(u["a"])(la,aa,oa,!1,null,"70db8544",null),da=ua.exports;f()(ua,{VCard:$t["a"]});var fa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("m-window-card",{attrs:{x:100,y:200,title:"window-card","max-width":"400px"}},[i("v-card",{attrs:{tile:"",flat:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}},[i("v-card-title",[t._v("Top 10 Australian beaches")])],1),i("v-card-subtitle",{staticClass:"pb-0"},[t._v("Number 10")]),i("v-card-text",{staticClass:"text--primary"},[i("div",[t._v("Whitehaven Beach")]),i("div",[t._v("Whitsunday Island, Whitsunday Islands")])])],1)],1),i("m-window-card",{attrs:{hide:"",right:"",title:"right-card","max-width":"300px"}},[i("v-card",{attrs:{tile:"",flat:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{src:"https://cdn.vuetifyjs.com/images/cards/house.jpg",gradient:"to bottom, rgba(0,0,0,.5), rgba(0,0,0,.5)",height:"200px"}},[i("v-card-title",[t._v("Pre-fab homes")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-bookmark")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-share-variant")])],1)],1)],1)],1),i("m-window-card",{attrs:{hide:"",bottom:"",title:"bottom-card","max-width":"200px"}},[i("v-card",{attrs:{tile:"",flat:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{src:"https://cdn.vuetifyjs.com/images/cards/house.jpg",height:"100px",gradient:"to bottom, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[i("v-card-title",[t._v("Pre-fab homes")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-bookmark")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-share-variant")])],1)],1)],1)],1),i("m-window-card",{attrs:{hide:"",right:"",bottom:"",title:"bottom-right-card","max-width":"450px"}},[i("v-card",{attrs:{tile:"",flat:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{src:"https://cdn.vuetifyjs.com/images/cards/house.jpg",height:"100px",gradient:"to bottom, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[i("v-card-title",[t._v("Pre-fab homes")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-bookmark")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-share-variant")])],1)],1)],1)],1),i("m-window-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",fab:"",fixed:"",bottom:"",right:""}},"v-btn",r,!1),n),[i("v-icon",{attrs:{dark:""}},[t._v("mdi-menu")])],1)]}}])})],1)},ma=[],ha=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-expand-transition",[i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.isCloseing,expression:"!isCloseing"}],ref:"window",style:t.style,attrs:{tile:!!t.isMaximize||t.tile,elevation:t.isDraging?10:1,"max-width":t.maxWidth,"min-height":""+(t.isMaximize?t.maximizedHeight:"0px"),"min-width":""+(t.isMaximize?t.maximizedWidth:"0px")}},[i("v-system-bar",{attrs:{color:t.color+" darken-"+(t.isDraging?"4":"2"),dark:""},on:{mousedown:t.onMouseDown}},[i("v-spacer"),t.isMaximize?i("div",[i("v-icon",{on:{click:function(e){return e.preventDefault(),t.maximize(e)}}},[t._v(" mdi-window-minimize ")]),i("v-icon",{on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v("mdi-close")])],1):i("div",[i("v-icon",{on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(" mdi-window-minimize ")]),i("v-icon",{on:{click:function(e){return e.preventDefault(),t.maximize(e)}}},[t._v(" mdi-window-maximize ")])],1)],1),i("v-toolbar",{attrs:{dense:"",color:t.color,dark:""}},[t._t("toolbar",[t.title?i("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]):t._e(),i("v-spacer"),t._t("toolbar-actions")])],2),i("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[t._t("default")],2)],1)],1)},va=[],pa={name:"m-window-card",props:{title:{type:String,default:""},color:{type:String,default:"primary"},icon:{type:String,default:""},x:{type:Number,default:0},y:{type:Number,default:0},maxWidth:{type:String,default:"100%"},maximizedWidth:{type:String,default:"100%"},maximizedHeight:{type:String,default:"100%"},tile:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},hide:{type:Boolean,default:!1}},data:function(){return{zIndex:1,id:null,isDraged:!1,isDraging:!1,isCloseing:!0,isMaximize:!1,position:{x:0,y:0},firstPosition:{x:0,y:0},offset:{x:null,y:null,width:null,height:null,top:null,left:null}}},computed:{style:function(){var t={position:"absolute"};return this.right?t.right="".concat(this.position.x,"px"):t.left="".concat(this.position.x,"px"),this.bottom?t.bottom="".concat(this.position.y,"px"):t.top="".concat(this.position.y,"px"),t["z-index"]=this.zIndex,t}},methods:{setZIndex:function(t){this.zIndex=t},close:function(){this.isMaximize=!1,this.isCloseing=!0,this.$store.commit("wcards/closing",this)},open:function(){this.position.x=this.firstPosition.x,this.position.y=this.firstPosition.y,this.isMaximize=!1,this.isCloseing=!1,this.$store.commit("wcards/open",this)},maximize:function(){this.isMaximize?this.isMaximize=!1:(this.position.x=0,this.position.y=0,this.isMaximize=!0)},setOffset:function(t){var e=this.$refs.window.$el.getBoundingClientRect();null==this.offset.x&&(this.offset.x=e.x-t.clientX),null==this.offset.y&&(this.offset.y=e.y-t.clientY),null==this.offset.top&&(this.offset.top=e.y),null==this.offset.left&&(this.offset.left=e.x),null==this.offset.width&&(this.offset.width=e.width),null==this.offset.height&&(this.offset.height=e.height)},setPosition:function(t){if(0==this.isMaximize){var e=t.pageX+this.offset.x-this.offset.left+this.firstPosition.x,i=t.pageY+this.offset.y-this.offset.top+this.firstPosition.y;this.position.x=this.right?-e:e,this.position.y=this.bottom?-i:i}},onMouseDown:function(t){t.preventDefault(),this.setOffset(t),document.body.addEventListener("mousemove",this.onMouseMove,!1),document.body.addEventListener("mouseleave",this.onMouseUp,!1),document.body.addEventListener("mouseup",this.onMouseUp,!1),this.isDraging=!0,this.isDraged=!1},onMouseUp:function(t){t.preventDefault(),document.body.removeEventListener("mousemove",this.onMouseMove,!1),document.body.removeEventListener("mouseleave",this.onMouseUp,!1),document.body.removeEventListener("mouseup",this.onMouseUp,!1),this.isDraging=!1,this.isDraged=!0,this.$store.dispatch("wcards/setZIndex",{id:this.id,zIndex:3})},onMouseMove:function(t){1==this.isDraging&&(t.preventDefault(),this.setPosition(t))}},watch:{hide:function(t,e){t!=e&&(t?this.close():this.open())}},mounted:function(){this.position.x=this.x,this.position.y=this.y,this.firstPosition.x=this.position.x,this.firstPosition.y=this.position.y,this.id=this.$store.state.wcards.cards.length,this.$store.commit("wcards/setCard",this),this.hide?this.close():this.open()}},ga=pa,xa=i("0789"),ba=i("afd9"),ya=Object(u["a"])(ga,ha,va,!1,null,"d2bb5226",null),wa=ya.exports;f()(ya,{VCard:$t["a"],VContainer:Zi["a"],VExpandTransition:xa["a"],VIcon:p["a"],VSpacer:w["a"],VSystemBar:ba["a"],VToolbar:De["a"],VToolbarTitle:$["a"]});var ka=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-bottom-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[i("v-list",[i("v-subheader",[t._v("Open in")]),t._l(t.cards,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){return t.open(e)}}},[e.icon?i("v-list-item-icon",[i("v-icon",[t._v(t._s(e.icon))])],1):t._e(),i("v-list-item-title",[t._v(t._s(e.title.toUpperCase()))])],1)}))],2)],1)},$a=[],_a={name:"m-window-sheet",data:function(){return{cards:[],sheet:!1}},methods:{open:function(t){this.sheet=!1,t.open()}},mounted:function(){this.cards=this.$store.state.wcards.closings},beforeDestroy:function(){this.$store.dispatch("wcards/init")}},Sa=_a,Ca=Object(u["a"])(Sa,ka,$a,!1,null,"6c965158",null),Ta=Ca.exports;f()(Ca,{VBottomSheet:Ce["a"],VIcon:p["a"],VList:g["a"],VListItem:x["a"],VListItemIcon:xe["a"],VListItemTitle:b["d"],VSubheader:er["a"]});var Va={name:"window-card",components:{MViewLayout:Vi["a"],MWindowCard:wa,MWindowSheet:Ta},data:function(){return{heading:"Example: WindowCard",desc:"親要素の中を自由に移動できるカードのデモです"}}},Ra=Va,Ia=Object(u["a"])(Ra,fa,ma,!1,null,"2904c8a8",null),ja=Ia.exports;f()(Ia,{VBtn:v["a"],VCard:$t["a"],VCardActions:_t["a"],VCardSubtitle:_t["b"],VCardText:_t["c"],VCardTitle:_t["d"],VIcon:p["a"],VImg:he["a"],VSpacer:w["a"]});var Da=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-file-input",{attrs:{accept:"image/*",label:"image file"},on:{change:t.onChange}})],1),t.src?i("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"400"}},[i("frame-editor",{attrs:{src:t.src}})],1):t._e()],1)},Ea=[],Ma=i("b874"),Oa={name:"image-edit",components:{MViewLayout:Vi["a"],FrameEditor:Ma["a"]},data:function(){return{heading:"Example: ImageEdit",desc:"画像編集カードの例です",src:null}},methods:{onChange:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.src=null,!e){t.next=5;break}return t.next=4,W["a"].file.toBase64(e);case 4:this.src=t.sent;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},La=Oa,za=Object(u["a"])(La,Da,Ea,!1,null,"62e45e8c",null),Pa=za.exports;f()(za,{VCard:$t["a"],VFileInput:Y["a"]});var Fa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{ref:"stage",attrs:{config:t.stageSize},on:{mousedown:t.handleStageMouseDown,touchstart:t.handleStageMouseDown}},[i("v-layer",{ref:"layer"},[t._l(t.rectangles,(function(e){return i("v-rect",{key:e.id,attrs:{config:e},on:{transformend:t.handleTransformEnd}})})),i("v-transformer",{ref:"transformer"})],2)],1)},Aa=[],Na=(i("cb29"),i("7db0"),i("362d")),Ba=i.n(Na),Ga=window.innerWidth,Ua=window.innerHeight,qa={name:"rects",data:function(){return{stageSize:{width:Ga,height:Ua},rectangles:[{rotation:0,x:10,y:10,width:100,height:100,scaleX:1,scaleY:1,fill:"red",name:"rect1",draggable:!0},{rotation:0,x:150,y:150,width:100,height:100,scaleX:1,scaleY:1,fill:"green",name:"rect2",draggable:!0}],selectedShapeName:""}},methods:{handleTransformEnd:function(t){var e=this,i=this.rectangles.find((function(t){return t.name===e.selectedShapeName}));i.x=t.target.x(),i.y=t.target.y(),i.rotation=t.target.rotation(),i.scaleX=t.target.scaleX(),i.scaleY=t.target.scaleY(),i.fill=Ba.a.Util.getRandomColor()},handleStageMouseDown:function(t){if(t.target===t.target.getStage())return this.selectedShapeName="",void this.updateTransformer();var e="Transformer"===t.target.getParent().className;if(!e){var i=t.target.name(),n=this.rectangles.find((function(t){return t.name===i}));this.selectedShapeName=n?i:"",this.updateTransformer()}},updateTransformer:function(){var t=this.$refs.transformer.getNode(),e=t.getStage(),i=this.selectedShapeName,n=e.findOne("."+i);n!==t.node()&&(n?t.nodes([n]):t.nodes([]),t.getLayer().batchDraw())}}},Ka=qa,Ha=Object(u["a"])(Ka,Fa,Aa,!1,null,"3b539744",null),Wa=Ha.exports,Xa="example",Ja=[Ar,Mr,Zr,ra,da,Kr,ja,Pa,Wa],Ya=Ja.map((function(t){return{path:"/".concat(Xa,"/").concat(t.name),name:"".concat(t.name),component:t,develop:!0}}));n["default"].use(ni["a"]);var Za=[{path:"/",name:"Home",icon:"mdi-home",component:Fi},{path:"/mata",name:"Meta",icon:"mdi-database-search",component:Mn},{path:"/convarters/video2png",component:ur},{path:"/convarters/video2wav",component:pr},{path:"/convarters/avi2mp4",component:kr},{path:"/files/",component:tn},{path:"/files/:id",component:tn},{path:"/demo",name:"Demo",icon:"mdi-code-brackets",component:nr},{path:"/setting",name:"Setting",icon:"mdi-cog",component:Xn},{path:"/about",icon:"mdi-information",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}];Za=Za.concat(Ya);var Qa=new ni["a"]({mode:"history",base:"/mri-vuewer.dev/",routes:Za}),to=Qa,eo=i("2f62"),io={namespaced:!0,state:function(){return{cards:[],closings:[]}},mutations:{setCard:function(t,e){t.cards.push(e)},closing:function(t,e){var i=t.closings.findIndex((function(t){return t._uid==e._uid}));-1==i&&t.closings.push(e)},open:function(t,e){var i=t.closings.findIndex((function(t){return t._uid==e._uid}));i>-1&&t.closings.splice(i,1)}},actions:{init:function(t){t.state.cards=[],t.state.closings=[]},setZIndex:function(t,e){var i=t.state.cards,n=i[e.id];for(var r in n.setZIndex(e.zIndex+i.length),i)r!=e.id&&i[r].setZIndex(1)}}},no=i("d623"),ro=no["a"].snackbar,ao=-1,oo={namespaced:!0,state:function(){return{show:!1,message:"",type:"",color:"",timeout:Number(ro.get("timeout"))||ao}},mutations:{loading:function(t,e){t.loading=e},show:function(t,e){t.show=e},type:function(t,e){t.type=e},message:function(t,e){t.message=e},color:function(t,e){t.color=e},timeout:function(t,e){t.timeout=e,ro.set("timeout",Number(e))}},actions:{init:function(t){t.commit("loading",!1),t.commit("show",!1),t.commit("message",""),t.commit("color",""),t.commit("type",""),t.commit("timeout",ao)},error:function(t,e){t.commit("message",e),t.commit("color","error"),t.commit("type","error"),t.commit("show",!0)},warning:function(t,e){t.commit("message",e),t.commit("color","warning darken-1"),t.commit("type","warning"),t.commit("show",!0)},info:function(t,e){t.commit("message",e),t.commit("color",""),t.commit("type","info"),t.commit("show",!0)},success:function(t,e){t.commit("message",e),t.commit("color","success"),t.commit("type","success"),t.commit("show",!0)}}},so=(i("13d5"),i("5319"),i("498a"),i("ade3")),co=i("2db4"),lo={namespaced:!0,state:function(){return{input:"",keyword:"",params:"",query:{},show:!1}},mutations:{input:function(t,e){t.input=e,t.keyword=co["a"].trim(e),t.params=co["a"].toParam(e),t.query=co["a"].toQuery(t.params)},params:function(t,e){t.params=co["a"].toParam(e),t.query=co["a"].toQuery(t.params)},show:function(t,e){t.show=e}},actions:{init:function(t){t.state.input="",t.state.keyword="",t.state.params="",t.state.query={},t.state.show=!1},show:function(t){t.commit("show",!0),t.commit("input","")}},getters:{args:function(t){return Object.keys(t.query).filter((function(e){return!0===t.query[e]}))},norargs:function(t){var e=Object.keys(t.query).filter((function(e){return~e.indexOf("!")&&!0!==t.query[e]}));return e.reduce((function(e,i){return Object(ci["a"])(Object(ci["a"])({},e),{},Object(so["a"])({},i.replace("!",""),t.query[i]))}),{})},kwargs:function(t){var e=Object.keys(t.query).filter((function(e){return!~e.indexOf("!")&&!0!==t.query[e]}));return e.reduce((function(e,i){return Object(ci["a"])(Object(ci["a"])({},e),{},Object(so["a"])({},i,t.query[i]))}),{})}}},uo={namespaced:!0,state:function(){return{logs:[],errors:[],dbLogs:[],show:!1}},mutations:{show:function(t,e){t.show=e},log:function(t,e){var i={time:Date.now(),msg:e.msg,tag:e.tag||"default"};t.logs.push(i)},dblog:function(t,e){if(e.msg&&e.tag&&e.table){var i={time:Date.now(),tag:e.tag,table:e.table,msg:e.msg};t.dbLogs.push(i)}},error:function(t,e){var i={time:Date.now(),tag:e.tag,msg:e.msg};t.errors.push(i)}},actions:{dblog:function(t,e){t.commit("dblog",e)},error:function(t,e){t.commit("error",e)}}},fo={namespaced:!0,state:function(){return{show:!1,message:""}},mutations:{show:function(t,e){t.show=e,0==e&&(t.message="")},message:function(t,e){t.message=e}},actions:{start:function(t,e){t.commit("message",e),0==t.state.show&&t.commit("show",!0)},finish:function(t){t.commit("show",!1)}}},mo=no["a"].wavesurfer,ho={syncDropbox:!1,addRecordKey:"dbl",cursorColor:"#333",deleteRecordKey:"delete",freqRate:.25,maxVideoSize:5,minPxPerSec:100,playOffset:5,progressColor:"#555",shouldGetFrameInfo:!0,shouldGetVideoInfo:!0,shouldMovePageAferAddingFile:!1,showDev:!1,showFrameInVideo:!0,showPointsInVideo:!0,showRectsInVideo:!0,showFreqLabel:!1,showSpectrogram:!0,showTimeLine:!0,spectrogramHeight:256,targetChannel:0,waveColor:"#333",nameSep:"-",nameFormat:""},vo=ho,po={namespaced:!0,state:function(){return{addRecordKey:mo.get("addRecordKey")||vo.addRecordKey,cursorColor:mo.get("cursorColor")||vo.cursorColor,deleteRecordKey:mo.get("deleteRecordKey")||vo.deleteRecordKey,freqRate:Number(mo.get("freqRate"))||vo.freqRate,maxVideoSize:Number(mo.get("maxVideoSize"))||vo.maxVideoSize,minPxPerSec:Number(mo.get("minPxPerSec"))||vo.minPxPerSec,playOffset:Number(mo.get("playOffset"))||vo.playOffset,progressColor:mo.get("progressColor")||vo.progressColor,syncDropbox:null==mo.get("syncDropbox")?vo.syncDropbox:mo.get("syncDropbox"),shouldGetFrameInfo:null==mo.get("shouldGetFrameInfo")?vo.shouldGetFrameInfo:mo.get("shouldGetFrameInfo"),shouldGetVideoInfo:null==mo.get("shouldGetVideoInfo")?vo.shouldGetVideoInfo:mo.get("shouldGetVideoInfo"),shouldMovePageAferAddingFile:null==mo.get("shouldMovePageAferAddingFile")?vo.shouldMovePageAferAddingFile:mo.get("shouldMovePageAferAddingFile"),showDev:null==mo.get("showDev")?vo.showDev:mo.get("showDev"),showFrameInVideo:null==mo.get("showFrameInVideo")?vo.showFrameInVideo:mo.get("showFrameInVideo"),showPointsInVideo:null==mo.get("showPointsInVideo")?vo.showPointsInVideo:mo.get("showPointsInVideo"),showRectsInVideo:null==mo.get("showRectsInVideo")?vo.showRectsInVideo:mo.get("showRectsInVideo"),showFreqLabel:null==mo.get("showFreqLabel")?vo.showSpectrogram:mo.get("showFreqLabel"),showSpectrogram:null==mo.get("showSpectrogram")?vo.showSpectrogram:mo.get("showSpectrogram"),showTimeLine:null==mo.get("showTimeLine")?vo.showTimeLine:mo.get("showTimeLine"),spectrogramHeight:Number(mo.get("spectrogramHeight"))||vo.spectrogramHeight,targetChannel:Number(mo.get("targetChannel"))||vo.targetChannel,waveColor:mo.get("waveColor")||vo.waveColor,nameFormat:mo.get("nameFormat")||vo.nameFormat,nameSep:mo.get("nameSep")||vo.nameSep}},mutations:{showDev:function(t,e){t.showDev=e,mo.set("showDev",e)},showFrameInVideo:function(t,e){t.showFrameInVideo=e,mo.set("showFrameInVideo",e)},syncDropbox:function(t,e){t.syncDropbox=e,mo.set("syncDropbox",e)},showPointsInVideo:function(t,e){t.showPointsInVideo=e,mo.set("showPointsInVideo",e)},showRectsInVideo:function(t,e){t.showRectsInVideo=e,mo.set("showRectsInVideo",e)},setMaxVideoSize:function(t,e){t.maxVideoSize=Number(e),mo.set("maxVideoSize",Number(e))},setShouldGetVideoInfo:function(t,e){t.shouldGetVideoInfo=e,mo.set("shouldGetVideoInfo",e)},setShouldGetFrameInfo:function(t,e){t.shouldGetFrameInfo=e,mo.set("shouldGetFrameInfo",e)},shouldMovePageAferAddingFile:function(t,e){t.shouldMovePageAferAddingFile=e,mo.set("shouldMovePageAferAddingFile",e)},setMinPxPerSec:function(t,e){t.minPxPerSec=Number(e),mo.set("minPxPerSec",Number(e))},setFreqRate:function(t,e){t.freqRate=Number(e),mo.set("freqRate",Number(e))},setTargetChannel:function(t,e){t.targetChannel=Number(e),mo.set("targetChannel",Number(e))},setSpectrogramHeight:function(t,e){t.spectrogramHeight=Number(e),mo.set("spectrogramHeight",Number(e))},setShowTimeLine:function(t,e){t.showTimeLine=e,mo.set("showTimeLine",e)},setShowSpectrogram:function(t,e){t.showSpectrogram=e,mo.set("showSpectrogram",e)},setShowFreqLabel:function(t,e){t.showFreqLabel=e,mo.set("showFreqLabel",e)},setCursorColor:function(t,e){t.cursorColor=e,mo.set("cursorColor",e)},setWaveColor:function(t,e){t.waveColor=e,mo.set("waveColor",e)},setPlayOffset:function(t,e){t.playOffset=Number(e),mo.set("playOffset",Number(e))},setProgressColor:function(t,e){t.progressColor=e,mo.set("progressColor",e)},setAddRecordKey:function(t,e){var i=["dbl","ctrl","alt"];-1!==i.indexOf(e)&&(t.addRecordKey=e,mo.set("addRecordKey",e))},setDeleteRecordKey:function(t,e){var i=["delete","ctrl","alt"];-1!==i.indexOf(e)&&(t.deleteRecordKey=e,mo.set("deleteRecordKey",e))},nameFormat:function(t,e){t.nameFormat=e,mo.set("nameFormat",e)},nameSep:function(t,e){t.nameSep=e,mo.set("nameSep",e)}},actions:{setDefault:function(t){t.commit("syncDropbox",vo.syncDropbox),t.commit("showDev",vo.showDev),t.commit("showFrameInVideo",vo.showFrameInVideo),t.commit("showPointsInVideo",vo.showPointsInVideo),t.commit("showRectsInVideo",vo.showRectsInVideo),t.commit("setMaxVideoSize",vo.maxVideoSize),t.commit("setShouldGetVideoInfo",vo.shouldGetVideoInfo),t.commit("setShouldGetFrameInfo",vo.shouldGetFrameInfo),t.commit("setMinPxPerSec",vo.minPxPerSec),t.commit("setFreqRate",vo.freqRate),t.commit("setTargetChannel",vo.targetChannel),t.commit("setSpectrogramHeight",vo.spectrogramHeight),t.commit("setShowTimeLine",vo.showTimeLine),t.commit("setShowSpectrogram",vo.showSpectrogram),t.commit("setShowFreqLabel",vo.showFreqLabel),t.commit("setCursorColor",vo.cursorColor),t.commit("setWaveColor",vo.waveColor),t.commit("setProgressColor",vo.progressColor),t.commit("setPlayOffset",vo.playOffset),t.commit("setAddRecordKey",vo.addRecordKey),t.commit("setDeleteRecordKey",vo.deleteRecordKey)}},getters:{fname2meta:function(t){return function(e){if(t.nameFormat){var i=e.split(".")[0].split(t.nameSep),n=t.nameFormat.split(t.nameSep),r={};if(n.length==i.length){for(var a in n)r[n[a]]=i[a];return r}}return null}}}},go={namespaced:!0,state:function(){return{filename:null,source:null,fps:null,duration:null,videoStream:null,audioStream:null,originSize:{width:null,height:null}}},mutations:{fileName:function(t,e){t.filename=e},source:function(t,e){t.source=e},fps:function(t,e){t.fps=e},duration:function(t,e){t.duration=e},videoStream:function(t,e){t.videoStream=e},audioStream:function(t,e){t.audioStream=e},originSize:function(t,e){e.width&&(t.originSize.width=e.width),e.height&&(t.originSize.height=e.height)}},actions:{init:function(t){t.commit("fileName",null),t.commit("source",null),t.commit("fps",null),t.commit("duration",null),t.commit("videoStream",null),t.commit("audioStream",null),t.commit("audioStream",null),t.commit("originSize",{width:null,height:null})}},getters:{bname:function(t){return t.filename?t.filename.split(".")[0]:null},dropboxPath:function(t){return t.filename?"/data/".concat(t.filename.split(".")[0],".json"):null}}},xo={namespaced:!0,state:function(){return{src:null,id:null,idx:null,time:null,ow:null,oh:null,points:[],rects:[],texts:[]}},mutations:{src:function(t,e){t.src=e},id:function(t,e){var i=Number(e);t.id=Math.round(i)},idx:function(t,e){t.idx=Math.round(Number(e))},time:function(t,e){t.time=Number(e)},ow:function(t,e){t.ow=e},oh:function(t,e){t.oh=e},points:function(t,e){t.points=e},rects:function(t,e){t.rects=e},texts:function(t,e){t.texts=e},pushPoint:function(t,e){var i={id:e.id||t.points.length,x:e.x,y:e.y,size:e.size,color:e.color,frameId:e.frameId};t.points.push(i)},pushRect:function(t,e){var i={id:e.id||t.rects.length,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,size:e.size,color:e.color};t.rects.push(i)}},actions:{init:function(t){t.state.src=null,t.state.id=null,t.state.idx=null,t.state.time=null,t.state.ow=null,t.state.oh=null,t.state.points=[],t.state.rects=[],t.state.texts=[]},frame:function(t,e){t.commit("src",e.src||t.state.src),t.commit("idx",e.idx||t.state.idx),t.commit("id",e.id||t.state.id),t.commit("time",e.time||t.state.time),t.commit("points",e.points||t.state.points),t.commit("rects",e.rects||t.state.rects),t.commit("texts",e.texts||t.state.texts)}}},bo={namespaced:!0,state:function(){return{mini:!1,videoCols:6,textgridCols:6}},mutations:{mini:function(t,e){t.mini=e},videoCols:function(t,e){t.videoCols=Number(e)},textgridCols:function(t,e){t.textgridCols=Number(e)}},actions:{init:function(t){t.state.mini=!1,t.state.videoCols=6,t.state.textgridCols=6},videoCols:function(t,e){var i=Number(e),n=i<0?0:i>12?12:i;t.state.videoCols=n,t.state.textgridCols=12-n,t.state.mini=12==n}}},yo={namespaced:!0,state:function(){return{textgrids:[]}},mutations:{textgrids:function(t,e){t.textgrids=e}},actions:{init:function(t){t.commit("textgrids",[])},setTextgrid:function(t,e){var i=JSON.stringify(e),n=t.state.textgrids;if(n.length>0){var r=n[n.length-1];r!=i&&t.state.textgrids.push(i)}else t.state.textgrids.push(i)}},getters:{textgrids:function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=t.textgrids.length-e-1;if(i>-1){var n=t.textgrids[i];return t.textgrids.splice(i),JSON.parse(n)}return null}}}},wo={namespaced:!0,state:function(){return{complates:{}}},mutations:{complates:function(t,e){for(var i in e)n["default"].set(t.complates,i,e[i])}},actions:{init:function(t){t.state.complates={}},updateAutocompletes:function(t,e){t.state.completes=Object.assign(t.state.completes,e)},deleteAutocompletes:function(t,e){n["default"].delete(t.state.complates,e)}},getters:{keys:function(t){var e=Object.keys(t.complates);return e},list:function(t){return t.complates}}},ko={namespaced:!0,state:function(){return{wavesurfer:null,textgrid:null,tab:0,metaData:{},frames:[]}},mutations:{waveSurfer:function(t,e){t.wavesurfer=e},tab:function(t,e){t.tab=e},metaData:function(t,e){t.metaData=e},textGrid:function(t,e){t.textgrid=e},frames:function(t,e){t.frames=e},autocompletes:function(t,e){t.autocompletes=e}},actions:{init:function(t){var e=t.dispatch,i=t.state;e("layout/init",{root:!0}),e("frame/init",{root:!0}),e("complates/init",{root:!0}),e("cache/init",{root:!0}),i.tab=0,i.frames=[],i.wavesurfer=null,i.textgrid=null},loadObj:function(t,e){e.frames&&e.frames.length&&t.commit("frames",e.frames),e.textgrid&&t.dispatch("updateTextGrid",e.textgrid)},updateTextGrid:function(t,e){var i=t.state.wavesurfer;i?i.setTextGrid(e):t.commit("textgrid",e)},updateFrame:function(t,e){var i=t.state.frames.findIndex((function(t){return t.id==e.id}));-1!==i&&(console.log(e),n["default"].set(t.state.frames,i,e))}},getters:{tgTable:function(t){var e=[["tier","type","index","time","text"]];for(var i in t.textgrid){var n=t.textgrid[i];for(var r in n.values){var a=n.values[r],o=[i,n.type,r,a.time,a.text];e.push(o)}}return e},frameTable:function(t){var e,i=[["id","index","time"]],n=Object(ht["a"])(t.frames);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=[r.id,r.idx,r.time];i.push(a)}}catch(o){n.e(o)}finally{n.f()}return i},pointTable:function(t){var e,i=[["id","index","time","label","x","y","color"]],n=Object(ht["a"])(t.frames);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,o=Object(ht["a"])(a.points||[]);try{for(o.s();!(r=o.n()).done;){var s=r.value,c=[s.id,a.idx,a.time,s.label,s.x,s.y,s.color];i.push(c)}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}return i},rectTable:function(t){var e,i=[["id","index","time","label","x","y","width","height","rotation","scaleX","scaleY","color"]],n=Object(ht["a"])(t.frames);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,o=Object(ht["a"])(a.rects||[]);try{for(o.s();!(r=o.n()).done;){var s=r.value,c=[s.id,a.idx,a.time,s.label,s.x,s.y,s.width,s.height,s.rotation,s.scaleX,s.scaleY,s.color];i.push(c)}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}return i}},modules:{video:go,frame:xo,layout:bo,complates:wo,cache:yo}},$o=(i("a630"),i("a15b"),i("6062"),i("3b4d")),_o={namespaced:!0,state:function(){return{files:[],chaches:[],isLoading:!1}},mutations:{chaches:function(t,e){Array.isArray(e)&&(t.chaches=e)},files:function(t,e){Array.isArray(e)&&(t.files=e)},push:function(t,e){t.files.push(e)},update:function(t,e){var i=t.files.findIndex((function(t){return t.id==e.id})),r=t.files;i>-1&&(r[i]=e,r[i].lastModifiedAt=Date.now(),n["default"].set(t.files,i,r[i]))},destroy:function(t,e){var i=t.files.findIndex((function(t){return t.id==e}));i>-1&&t.files.splice(i,1)},isLoading:function(t,e){t.isLoading=e}},actions:{getLog:function(t,e){t.dispatch("logging/dblog",{tag:"GET",table:"files",msg:e},{root:!0})},postLog:function(t,e){t.dispatch("logging/dblog",{tag:"POST",table:"files",msg:e},{root:!0})},deleteLog:function(t,e){t.dispatch("logging/dblog",{tag:"DELETE",table:"files",msg:e},{root:!0})},errorLog:function(t,e){t.dispatch("logging/error",{tag:"store/files",msg:e},{root:!0})},init:function(t){return new Promise((function(e,i){t.commit("isLoading",!0),t.state.files=[],Bi["a"].files.toArray().then((function(i){t.commit("files",i),t.dispatch("getLog","init current status"),t.commit("isLoading",!1),e(!0)})).catch((function(e){t.commit("isLoading",!1),i(e)}))}))},dropbox:function(t){return new Promise((function(e,i){$o["a"].hasToken()?$o["a"].get("/data").then((function(i){var n=i.entries.filter((function(t){return"file"==t[".tag"]}));t.commit("chaches",n),e(!0)})).catch((function(t){return i(t)})):e(!1)}))},load:function(t,e){return new Promise((function(i,n){t.commit("isLoading",!0),Bi["a"].load(e).then((function(e){t.commit("files",e),t.dispatch("getLog","load files"),t.commit("isLoading",!1),i(!0)})).catch((function(e){t.commit("isLoading",!1),n(e)}))}))},dump:function(t){return new Promise((function(e,i){t.commit("isLoading",!0),Bi["a"].dump().then((function(){t.commit("isLoading",!1),e(!0)})).catch((function(e){t.commit("isLoading",!1),i(e)}))}))},clear:function(t){return new Promise((function(e,i){t.commit("isLoading",!0),Promise.all([Bi["a"].points.clear,Bi["a"].rects.clear,Bi["a"].frames.clear,Bi["a"].files.clear]).then((function(){t.commit("files",[]),t.commit("isLoading",!1),e(!0)})).catch((function(e){t.commit("isLoading",!1),i(e)}))}))},push:function(t,e){return new Promise((function(i,n){t.commit("isLoading",!0),Bi["a"].put(e).then((function(e){Bi["a"].files.toArray().then((function(n){t.commit("files",n),t.dispatch("postLog","add a data."),t.commit("isLoading",!1),i(e)})).catch((function(e){t.commit("isLoading",!1),n(e)}))})).catch((function(e){t.commit("isLoading",!1),n(e)}))}))},destroy:function(t,e){return new Promise((function(i,n){e?(t.commit("isLoading",!0),Bi["a"].destory(e).then((function(){Bi["a"].files.toArray().then((function(n){t.commit("files",n),t.dispatch("deleteLog","delete files: ".concat(e)),t.commit("isLoading",!1),i(e)})).catch((function(e){t.commit("isLoading",!1),n(e)}))})).catch((function(e){t.commit("isLoading",!1),n(e)}))):n(new Error("no id"))}))}},getters:{fields:function(t){var e,i=new Set,n=Object(ht["a"])(t.files);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.metaData)for(var a=0,o=Object.keys(r.metaData);a<o.length;a++){var s=o[a];i.add(s)}}}catch(c){n.e(c)}finally{n.f()}return Array.from(i)},records:function(t){var e,i=[],n=0,r=Object(ht["a"])(t.files);try{var a=function(){var t=e.value;for(var r in t.textgrid){var a=t.textgrid[r],o=a.values.length-1,s=function(e){var s=a.values[e],c=0==e?{time:0,text:""}:a.values[e-1],l={};if("interval"==a.type){var u=function(e){l[e]=t.textgrid[e].values.filter((function(i,n){var r=0==n?0:t.textgrid[e].values[n-1].time,a=r<=l.time&&l.time<=i.time,o=c.time<=i.time&&i.time<=s.time;return a||o})).map((function(t){return t.text})).join(" ")};for(var d in t.textgrid)u(d)}else for(var f in t.textgrid){var m=t.textgrid[f];"interval"==m.type?l[f]=t.textgrid[f].values.filter((function(t){return t.time<=s.time&&s.time<=t.time})).map((function(t){return t.text})):l[f]=t.textgrid[f].values.filter((function(t){return t.time==s.time}))}var h={fileId:t.id,fileName:t.name,fps:t.fps,duration:t.duration,src:t.source,tier:r,type:a.type,index:e,id:n,start:c.time,end:s.time,time:s.time,text:s.text,search:Object(ci["a"])({field:r,text:s.text,text__p1:e>0?a.values[Number(e)-1].text:"",text__p2:e>1?a.values[Number(e)-2].text:"",text__p3:e>2?a.values[Number(e)-3].text:"",text__n1:e<o-1?a.values[Number(e)+1].text:"",text__n2:e<o-2?a.values[Number(e)+2].text:"",text__n3:e<o-3?a.values[Number(e)+3].text:""},l)};i.push(h),n++};for(var c in a.values)s(c)}};for(r.s();!(e=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return i}}},So={namespaced:!0,state:function(){return{text:"",info:{}}},mutations:{text:function(t,e){t.text=e},info:function(t,e){t.info=e}},actions:{text:function(t,e){var i=e.replace("#","");t.commit("text",i);var r,a=Object(ht["a"])(i.split("&"));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.split("=");1==s.length?n["default"].set(t.state.info,s[0],!0):n["default"].set(t.state.info,s[0],s[1])}}catch(c){a.e(c)}finally{a.f()}}}};n["default"].use(eo["a"]);var Co=new eo["a"].Store({state:{appName:"MRI Vuewer",appVersion:"2.0",author:"qh73xe",devYear:"2017-2020",github:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2",lang:{t:null},drawer:!1},mutations:{lang:function(t,e){t.lang=e},max_z_index:function(t,e){t.max_z_index=e},drawer:function(t,e){t.drawer=e}},getters:{t:function(t){return function(e){return t.lang.t?t.lang.t(e):e}}},modules:{snackbar:oo,search:lo,wcards:io,logging:uo,loading:fo,setting:po,current:ko,files:_o,hash:So}}),To=(i("5363"),i("f309")),Vo=i("1902"),Ro="新規",Io="削除",jo="編集",Do="記入欄",Eo="転記",Mo="データベース",Oo="動画",Lo={name:"時系列転記",tier:{name:"時系列転記層",option:{name:"転記層名",showRef:"時刻情報をコピーする",ref:"対象転記層",withText:"コピー時に文字を含む",asParent:"コピー元を親にする",type:"転記層の種類"},interval:"境界転記層",point:"イベント転記層",record:{name:"時刻記述",no:"レコードが選択されていません"}}},zo={name:"フレーム転記"},Po={home:"ホーム",meta:"ファイル管理",demo:"ライブデモ",setting:"設定",about:"このアプリについて",logger:"ロガー",dropbox:{auth:"ドロップボックス連携",connected:"連携済み",load:"ファイル取り込み"},db:{clear:"".concat(Mo,"の").concat(Io),dump:"".concat(Mo,"のエクスポート"),load:"".concat(Mo,"のインポート (JSON)"),add:"".concat(Oo,"登録")},on:{destroy:"{0} のデータは".concat(Io,"されました."),dump:"".concat(Mo,"はエクスポートされました."),load:"".concat(Mo,"は更新されました"),clear:"すべてのデータを".concat(Io,"しました")}},Fo={upload:{title:Po.db.add,hint:"時系列転".concat(Eo,"の").concat(Oo,"ファイルをインポートします")},manage:{title:Po.meta,hint:"インポートした".concat(Oo,"のメタデータを管理します")},demo:{title:Po.demo,hint:"サンプルデータを取り込みライブデモを行います"}},Ao=Object(ci["a"])({disc:"\n    MRI Vuewer は ".concat(Oo," 化された rtMRI データの ").concat(Eo," ツールです.\n    </br>\n    音声波形と ").concat(Oo," を同時に閲覧することが可能です.\n    </br>\n    </br>\n    全てのファイルはローカルで処理をされます.\n    </br>\n    まずは <b>").concat(Fo.upload.title,"</b> より\n    御自身の ").concat(Oo," ファイルを登録してみてください.\n    ")},Fo),No=Object(ci["a"])(Object(ci["a"])({},Vo["a"]),{},{validations:{required:"この項目は必須項目です!",positiveInteger:"この項目は正の整数です!",positiveIntegerOrError:"この項目は正の整数または -1 です",positiveFloat:"この項目は正の数値です!",more:"この項目は {0} より大きい必要があります",less:"この項目は {0} より小さい必要があります",times:"この項目は {0} の倍数です",maxVideoSize:"登録可能な ".concat(Oo," ファイルサイズは ").concat(Co.state.setting.maxVideoSize," MB までです!"),hasArrayBuffer:"想定外の ${VIDEO} ファイルです [No Array buffer]!",shorter:"この値は {0} 文字以下です.",alreadyExists:"この値は既に存在しています.",notExist:"この値は存在しません"},table:{file:{name:"".concat(Oo,"名"),fps:"フレームレート (fps)",lastModifiedAt:"最終更新日",duration:"".concat(Oo,"持続時間 (秒)"),size:"".concat(Oo,"サイズ(pixels)"),actions:"".concat(Oo,"操作"),forms:{setTier:{label:"転記階層一括付与 (name:[interval|point] name2:[interval|point]...)",hint:"\n            選択中の".concat(Oo,"に").concat(Lo.tier.name,"を付与します.\n            例えば IPU という").concat(Lo.tier.interval,'をつけるには "IPU-interval" と入力します.\n            その後, 右のアイコンをクリックすると').concat(Lo.tier.name,"が付与されます.\n          ")}}}},forms:{db:{title:"データベース取り込み".concat(Do),warning:"この処理を実行すると既存のデータは失われます.処理を実行しますか?",messages:{stop:"データベースのインポートを停止しました",success:"データベースのインポートに成功しました",outofmemory:"データベースのインポートに失敗しました [out of memory]"}},video:{title:"".concat(Oo," 登録 ").concat(Do),messages:{stop:"".concat(Oo," の登録が中止されました"),success:"".concat(Oo," が登録されました"),outofmemory:"".concat(Oo," の登録に失敗しました [out of memory]")},finish:"".concat(Oo,"の登録に成功しました"),restart:"別の".concat(Oo,"を登録する"),steps:{select:"ファイル選択",confirmation:"コーディック確認",meta:"メタデータ登録"},desc:{select:"\n        解析を行う ".concat(Oo," ファイルを登録します.\n        <br />\n        登録可能な ").concat(Oo,' ファイルは mp4 のみです.\n        <br />\n        <br />\n        "メタデータ抽出用ファイル名テンプレートを表示する" にチェックがついている場合,\n        "メタデータ抽出用テンプレート" を変更できます.\n        <br />\n        これを設定すると, "-" で区切られたメタデータフィールドに, ファイル名の情報を挿入します.\n        <br />\n        例えば, "メタデータ抽出用テンプレート" が "material-speaker" であり,\n        ファイル名が "マテリアル1-被験者2.mp4" であった場合,\n        メタデータは <code>{material: マテリアル1, speaker: 被験者2}</code> になります.\n        <br />\n        この情報は "メタデータ管理" ページで確認および検索することが可能です.\n        <br />\n        <br />\n        "ファイル登録時に ').concat(Oo,' コーディックを確認する." に\n        チェックがついている場合, ').concat(Oo," のエンコーディング情報を自動で取得します.\n        "),confirmation:"以下の情報を確認し問題がなければ <kbd>OK</kbd> をクリックしてください.",meta:"\n        ".concat(Oo,' メタデータの登録を行います.\n        </br></br>\n        例えば発話者情報を登録する場合,\n        </br>\n        <code>New field</code> に "発話者" と入力をして\n        <kbd>ADD</kbd> ボタンをクリックしてください.\n        </br>\n        上記処理に成功すると <code>発話者</code> ').concat(Do," が作成されます.\n        </br></br>\n        登録された <code>field</code> は次回も使用可能です.\n        </br></br>\n        作成された全ての").concat(Do,"に値を入力し\n        </br>\n        <kbd>OK</kbd> ボタンをクリックするとメタデータの登録が完了します.")}},tier:{title:"".concat(Ro).concat(Lo.tier.name).concat(Do)},tierEdit:{title:"".concat(Lo.tier.name).concat(jo).concat(Do),warning:"この処理を実施するとこの階層の".concat(Eo,"情報は初期化されます.処理を実行しますか?")},tierDelete:{title:"".concat(Lo.tier.name).concat(Io).concat(Do)},detail:{title:"".concat(Oo," 詳細情報")},ruler:{title:"フレーム計測ダイアログ"},imageEdit:{title:"フレーム".concat(jo,"モード")}},wVideo:{videoPre:{label:"前画像"},video:{label:"現画像"},videoPos:{label:"後画像"}},io:{db:{json:{title:"".concat(Mo," データを選択してください (json)")}},mVideoInput:{title:"".concat(Oo,"ファイルを選択"),hint:"".concat(Oo," ファイルは mp4 形式のみをサポートしています")},completes:{title:"補完辞書ファイルを選択 (text/plain)",isTextComplated:"テキスト選択モード"}},pages:Po,home:Ao,meta:{disc:"このページでは登録された ".concat(Oo," ファイルの横断検索, 一括操作が実施可能です.")},demo:{disc:"\n    このページではサンプル ".concat(Oo," を使って MRI Vuewer の機能を確認することができます.\n    ")},setting:{disc:"このページでは MRI Vuewer の設定を行うことができます.",form:{app:{label:"システム設定",timeout:{label:"メッセージタイムアウト",hint:"システムメッセージのタイムアウト時間を設定します.この項目が -1 の場合, メッセージの自動非表示処理が抑制されます."},showDev:{label:"開発者用デモページを表示する"},syncDropbox:{label:"ページ遷移時に dropbox へ自動バックアップを行う"}},video:{label:"動画設定",showFrameInVideo:{label:"フレーム情報を動画に表示する"},syncPoints:{label:"ポイントを動画に表示する"},syncRects:{label:"矩形を動画に表示する"}},metadata:{label:"新規フィールド"},loading:{label:"ファイル登録設定",nameFormat:{label:"メタデータ抽出用テンプレート",show:"メタデータ抽出用ファイル名テンプレートを変更する",hint:["動画登録時にメタ情報を付与します.","登録を行う予定のフィールド名を '-' 区切りで登録してください.","拡張子は不要です.","この処理を実施しない場合, 空欄にしてください","ex: material-speaker-date-record_id"].join(" ")},maxVideoSize:{label:"ファイル最大容量.",hint:"この項目が大きい場合, 登録可能なファイル数が減ります. 登録可能なファイル数は使用端末のスペックに依存します."},shouldMovePageAferAddingFile:{label:"ファイル登録後に解析ページに移動する."},shouldGetVideoInfo:{label:"ファイル登録時に".concat(Oo,"コーディックを確認する."),hint:"この項目が false の場合, ".concat(Oo," の時間, fps, 縦横サイズ等を手動で入力することになります.")},shouldGetFrameInfo:{label:"ファイル登録時に全てのフレーム画像を取得する.",hint:"この項目が true の場合, 登録処理に多少の時間がかかります. 一方で解析時には正確なフレーム提示を行います."}},waveform:{label:"波形表示設定",minPxPerSec:{label:"pixels per sec",hint:"\n          1 sec を何ピクセルで表示するか?\n          大まかに時刻方向の拡大比率になります.\n          この値は50 の倍数である必要があり\n          100 - 500 までの値を取ります. \n          "},cursorColor:{label:"カーソル色"},waveColor:{label:"未再生波形色"},progressColor:{label:"再生済み波形色"},showTimeLine:{label:"時間軸を表示する"},showSpectrogram:{label:"スペクトログラムを表示する"}},spectrogram:{label:"スペクトログラム表示設定",targetChannel:{label:"対象チャンネル"},freqRate:{label:"表示周波数率",hint:"周波数表示比率. fft の解析結果を低域何パーセントまで表示するかです. 0.25 - 1 までの値にしてください"},spectrogramHeight:{label:"スペクトル領域の高さ",hint:"スペクトログラム表示領域の高さです. 解析幅ではないことに注意してください."},showFreqLabel:{label:"周波数軸ラベルを表示する"}},textgrid:{label:"".concat(Eo," 設定"),playOffset:{label:"再生オフセット",hint:"".concat(Lo.tier.point," 再生時のオフセットです")},addRecordKey:{label:"レコード追加キー",dbl:"ダブルクリック",ctrl:"CTRL + クリック",alt:"ALT (option) + クリック"},deleteRecordKey:{label:"レコード削除キー",delete:"DELETE",ctrl:"CTRL + DELETE",alt:"ALT + DELETE"}}}},contexts:{denoising:{audio:"音声ノイズ除去"},playPause:"再生/停止",skip:"スキップ",skipBackward:"戻る",skipForward:"進む",zoom:"ズーム",zoom_in:"拡大",zoom_out:"縮小",setting:"設定",save:"保存",saveDropbox:"ドロップボックスに保存",loadDropbox:"ドロップボックスから読み込み",tier:{add:"".concat(Lo.tier.name," を追加"),edit:"".concat(Lo.tier.name," を編集"),delete:"".concat(Lo.tier.name," を削除")},record:{name:"".concat(Lo.tier.record.name," 操作"),play:"現在".concat(Lo.tier.record.name,"を再生"),copy:"現在".concat(Lo.tier.record.name,"をコピー"),paste:"現在".concat(Lo.tier.record.name,"にペースト"),next:"次の".concat(Lo.tier.record.name,"に移動"),prev:"前の".concat(Lo.tier.record.name,"に移動"),toStart:"現在".concat(Lo.tier.record.name,"の始端に移動"),toEnd:"現在".concat(Lo.tier.record.name,"の終端に移動"),extend:"現在".concat(Lo.tier.record.name,"を終端を延長"),shrink:"現在".concat(Lo.tier.record.name,"を終端を短縮"),splitByFrames:"".concat(Lo.tier.record.name,"の分割 (フレーム毎)"),splitByChars:"".concat(Lo.tier.record.name,"の分割 (文字毎)"),splitBySlash:"".concat(Lo.tier.record.name,"の分割 (区切り文字毎: /)"),owakati:"現在".concat(Lo.tier.record.name,"を分かち書き"),oyomi:"現在".concat(Lo.tier.record.name,"をよみに変換"),opronunciation:"現在".concat(Lo.tier.record.name,"を発音系に変換"),obasic:"現在".concat(Lo.tier.record.name,"を代表系に変換"),opos:"現在".concat(Lo.tier.record.name,"を品詞に変換")},frame:{name:"".concat(zo.name),edit:"".concat(zo.name," 画面の表示")}},uploads:{name:"ファイルアップロード",dict:"テキスト補完辞書 (.dict)",textgrid:{title:"".concat(Lo.name," のアップロード"),textgrid:"TextGrid 形式",json:{v1:"JSON 形式 (ver1)",v1left:"JSON 形式 (ver1:left)",v1right:"JSON 形式 (ver1:right)",v2:"JSON 形式 (ver2)"}}},downloads:{name:"ファイルダウンロード",xlsx:"XLSX 形式でダウンロード (ALL)",json:"JSON 形式でダウンロード (ALL)",png:"PNG 形式でダウンロード (現在)",mp4:"MP4 形式でダウンロード (現在)",textgrid:{title:"".concat(Lo.name," のダウンロード"),textgrid:"TextGrid 形式でダウンロード (".concat(Lo.name,")"),json:"JSON 形式でダウンロード (".concat(Lo.name,")"),xlsx:"XLSX 形式でダウンロード (".concat(Lo.name,")")},frame:{title:"".concat(zo.name," のダウンロード"),json:"JSON 形式でダウンロード (".concat(zo.name,")"),xlsx:"XLSX 形式でダウンロード (".concat(zo.name,")")}},textgrid:Lo,frame:zo,prev:"戻る",yet:"この関数は作成中です",loading:"読み込み中 ...",converting:"変換中 ...",loaded:"データの読み込みが終了しました",sending:"データ送信中 (ドロップボックス) ...",sended:"ドロップボックスへのデータ送信が終了しました",notFound:"ファイルは存在しません",notAcceptable:"不正なファイルです",browserError:"このブラウザでは, 該当の機能を使用することはできません.",annotation:Eo,ver1:"MRI Vuewer ver.1 系"}),Bo=i("4b41"),Go={home:"Home",meta:"Meta Data",demo:"Line Demo",setting:"Setting",about:"About",logger:"Logger",dropbox:{auth:"Works with dropbox",connected:"Connected",load:"load dropbox file"},db:{clear:"Clear DB",dump:"Export DB",load:"Load DB (JSON)",add:"Video Registration"},on:{destroy:"{0} was deleted.",dump:"The DB was exported.",load:"The DB was uploaded",clear:"All videos were deleted."}},Uo={upload:{title:Go.db.add,hint:"Import your video file for annotation"},manage:{title:Go.meta,hint:"you can create meta data for video like speaker data"},demo:{title:Go.demo,hint:"Try the annotation function using a sample video"}},qo=Object(ci["a"])({disc:"\n    MRI Vuewer is an annotation tool for movied rtMRI data.\n    </br>\n    You can view the audio waveform and the video at the same time.\n    </br>\n    </br>\n    All files are processed locally.\n    </br>\n    First of all, please register your own video file from <b>".concat(Uo.upload.title,"</b>.\n    ")},Uo),Ko=Object(ci["a"])(Object(ci["a"])({},Bo["a"]),{},{prev:"Previous",table:{file:{name:"Name",fps:"Frame Rate (fps)",lastModifiedAt:"Last modified at",duration:"Video duration (sec)",size:"Video size (pixels)",actions:"File Actions",forms:{setTier:{label:"Set Tiers (name:[interval|point] name2:[interval|point]...)",hint:'Gives some textgrid tiers to the selected files. To add a interval tier called IPU, enter "IPU-interval" in input form. And then, click the icon on the right of input form.\n          '}}}},validations:{required:"This field is required!",positiveInteger:"This is a positive integer field!",positiveIntegerOrError:"This is a positive integer or -1 field!",positiveFloat:"This is a positive float field!",more:"This value is more then {0}",less:"This value is less then {0}",times:"This value is a multiple of {0}",maxVideoSize:"Video size should be less than ".concat(Co.state.setting.maxVideoSize," MB!"),hasArrayBuffer:"This is an unexpected video file [No Array buffer]!",shorter:"This field must be less than {0} characters",alreadyExists:"This value alredy exists",notExist:"This value does not exist"},wVideo:{videoPre:{label:"Previous Image"},video:{label:"Current Image"},videoPos:{label:"Next Image"}},forms:{video:{title:"VIDEO REGISTRATION FORM",finish:"Video registration is complete.",restart:"Add Video.",messages:{stop:"Canceled the video registration.",success:"The video was registered successfully!",outofmemory:"Video registration failed [out of memory]"},steps:{select:"File Selection",confirmation:"Codec Confirmation",meta:"Addtion of Meta Data"},desc:{select:'\n        Register the video file to be analyzed.\n        <br />\n        Only mp4 video files can be registered.\n        <br />\n        <br />\n        If "Get video codec at file upload." is checked,\n        the encoding information will be acquired automatically.\n\n        ',confirmation:"\n        Check the following information and press <kbd>OK</kbd> botton\n        if everything is OK.",meta:'\n        Register the video metadata.\n        </br></br>\n        For example, when registering speaker information,\n        enter "speaker" in <code>New field</code> and click the <kbd>ADD</kbd> button.\n        </br>\n        If the above process is successful,\n        <code>speaker</code> input form will be created.\n        </br></br>\n        The registered <code>field</code> can be used next time.\n        </br></br>\n        Fill in all the forms created.\n        <br />\n        Finally, click the <kbd>OK</kbd> button to register.'}},db:{title:"DB IMPORT FORM",warning:"Existing data will be lost when this process is performed. Do you want to process it?",messages:{stop:"Canceled the db importing.",success:"The db was updating successfully!",outofmemory:"The db updating failed [out of memory]"}},tier:{title:"NEW TIER FORM"},tierEdit:{title:"EDIT TIER FORM",warning:"Performing this process will initialize this tier. Do you want to process it?"},tierDelete:{title:"DELETE TIER FORM"},detail:{title:"VIDEO INFORMATION"},ruler:{title:"RULER DIALOG"},imageEdit:{title:"IMAGE EDIT DIALOG"}},io:{db:{json:{title:"Select your db file (json)"}},mVideoInput:{title:"Select your video file (mp4)",hint:"supported format is mp4"},completes:{title:"Select your dict complete file (text/plain)",isTextComplated:"Text Select Mode"}},pages:Go,home:qo,meta:{disc:"\n    In this page, you can manages the meta information of registered video files.\n    </br>\n    You can set the content to be added as meta information by yourself.\n    </br>\n    The meta information is assumed to be the speaker of the video, the shooting date, the content of the utterance, etc.\n    </br>\n    Meta information is used when searching video files.\n    "},demo:{disc:"In this page, you can check the functions of MRI Vuewer with sample videos."},setting:{disc:"In this page, you can configure the MRI Vuewer.",form:{app:{label:"System settings",timeout:{label:"System message time out",hint:"Sets the timeout period for system messages. Setting this field to -1 will prevent automatic hiding."},showDev:{label:"Show Develop page"},syncDropbox:{label:"Auto backup in dropbox"}},metadata:{label:"New Field"},video:{label:"Video Setting",showFrameInVideo:{label:"Show frame info"},syncPoints:{label:"show points in a video"},syncRects:{label:"show rects in a video"}},loading:{label:"File upload settings",nameFormat:{label:"File Name Format",show:"Change file name format",hint:["Meta data is added when registering a video.","Register some field names you plan to register, separated by'-'.","No extension required.","If you do not want to do this, leave it blank","ex: material-speaker-date-record_id"].join(" ")},maxVideoSize:{label:"Max Video Size",hint:"Registerable video size. If this value is large, the number of data that can be registered will decrease."},shouldMovePageAferAddingFile:{label:"Move analysis page when uploaded a video file."},shouldGetVideoInfo:{label:"Get video codec at file upload.",hint:"If this check box is false, you need to manually input fps, image size, etc."},shouldGetFrameInfo:{label:"Get all frame images at file upload.",hint:"If this check box is true, the file upload will take longer, but an accurate image display will be performed during video analysis."}},waveform:{label:"Wave form settings",minPxPerSec:{label:"pixels per sec",hint:"How many pixels do you want to display 1 sec? It is roughly the enlargement ratio in the time direction."},cursorColor:{label:"Cursor Color"},waveColor:{label:"Wave Color"},progressColor:{label:"Progress Color"},showTimeLine:{label:"Display Time Axis"},showSpectrogram:{label:"Display spectrogram"}},spectrogram:{label:"Spectrogram Settings",targetChannel:{label:"Target Channel"},freqRate:{label:"Frequency Rate",hint:"Frequency display ratio. What percentage of the fft analysis result is displayed.Set a value between 0.25 and 1."},spectrogramHeight:{label:"Max Spectrogram Height",hint:"The height of the spectrogram display area. Note that it is not the parsing width."},showFreqLabel:{label:"Display Frequency Axis Label"}},textgrid:{label:"Annotation Settings",playOffset:{label:"play offset",hint:"Offset time for playing the point record."},addRecordKey:{label:"Record add opetetion",dbl:"DOUBLE CLICK",ctrl:"CTRL + CLICK",alt:"ALT + CLICK"},deleteRecordKey:{label:"Record delete opetetion",delete:"DELETE",ctrl:"CTRL + DELETE",alt:"ALT + DELETE"}}}},converting:"Now Converting ...",loading:"Now Loading ...",loaded:"The data was loaded",sending:"Sending the data to dropbox ...",sended:"Sended the data to dropbox",notAcceptable:"The data is not acceptable!!",notFound:"Your file is not founded.",yet:"This function is under construction",textgrid:{name:"TextGrid",tier:{name:"Tier",option:{name:"Tier Name",showRef:"Copy Times",ref:"Ref Tier Name",withText:"With Texts",asParent:"Make the copy source as a parent",type:"Tier Type"},interval:"Interval Tier",point:"Point Tier",record:{name:"Time Record",no:"No record was selected!"}}},contexts:{denoising:{audio:"Audio Noise Reduction"},playPause:"play or pause",skip:"skip",skipBackward:"skip backward",skipForward:"skip forward",zoom:"zoom",zoom_in:"zoom in",zoom_out:"zoom out",setting:"setting",save:"save",saveDropbox:"save the data to dropbox",loadDropbox:"load the data from dropbox",tier:{add:"Add a Tier",edit:"Edit a Tier",delete:"Delete a Tier"},record:{name:"Record",play:"play a current record",copy:"copy a text of the current record",paste:"paste a text of the current record",next:"move to a next record",prev:"move to a prev record",toStart:"move to start time of a current record",toEnd:"move to end time of a current record",extend:"extend end time of a current record",shrink:"shrink end time of a current record",splitByFrames:"split a current record by frames.",splitByChars:"split a current record by chars.",splitBySlash:"split a current record by slash.",owakati:"word-separation for the current record",oyomi:"Convert current record to reading",opronunciation:"Convert current record to pronunciation",obasic:"Convert current record to representative type",opos:"Convert current record to part of speech"},frame:{name:"Image Annotation",edit:"Show an Image Annotation Dialog"}},uploads:{name:"Upload File",dict:"complement dictionary (.dict)",textgrid:{title:"TEXTGRID",textgrid:"TextGrid",json:{v1:"JSON (ver1)",v1left:"JSON (ver1:left)",v1right:"JSON (ver1:right)",v2:"JSON (ver2)"}}},downloads:{name:"Download File",xlsx:"Download as xlsx file (ALL)",json:"Download as json file (ALL)",png:"Download as png file (CURRENT)",mp4:"Download as mp4 file (CURRENT)",textgrid:{title:"Download of TextGrid Data.",textgrid:"Download as textgrid file",json:"Download as json file",xlsx:"Download as xlsx file"},frame:{title:"Download of Frame Data.",json:"Download as json file",xlsx:"Download as xlsx file"}},annotation:"annotation",frame:"frames",browserError:"This feature is not available in this browser.",ver1:"MRI Vuewer ver.1"});n["default"].use(To["a"]);var Ho=new To["a"]({icons:{iconfont:"mdi"},lang:{locales:{ja:No,en:Ko},current:"ja"}}),Wo=i("ed08"),Xo={install:function(t){var e=function(t){return Co.getters.t(t)},i={log:function(t,e){var i={msg:e,tag:t||"default"};Co.commit("logging/log",i)},error:function(t,e){var i={tag:t};e instanceof Error?(i.msg=e.message,console.error(t,e)):i.msg=e,Co.commit("logging/error",i)}};t.prototype.$vuewer={t:e,io:W["a"],download:{blob:W["a"].file.download,url:W["a"].file.downloadURL},math:Wo["a"].math,text:Wo["a"].text,image:Wo["a"].image,dropbox:Wo["a"].dropbox,console:i,db:{log:function(t,e,i){if(-1!==["GET","POST","PUT","DELETE"].indexOf(e)&&t&&e){var n={msg:i,table:t,tag:e};Co.commit("logging/dblog",n)}},gets:Bi["a"].gets,get:Bi["a"].get,add:Bi["a"].add,put:Bi["a"].put,destory:Bi["a"].destory,files:Bi["a"].files,frames:Bi["a"].frames,points:Bi["a"].points,rects:Bi["a"].rects},snackbar:{error:function(t){t instanceof Error?(Co.dispatch("snackbar/error",t.message),i.log(t)):Co.dispatch("snackbar/error",e(t))},warn:function(t){Co.dispatch("snackbar/warning",e(t))},warning:function(t){Co.dispatch("snackbar/warning",e(t))},success:function(t){Co.dispatch("snackbar/success",e(t))},info:function(t){Co.dispatch("snackbar/info",e(t))}},loading:{start:function(t){return Co.dispatch("loading/start",t)},end:function(){return Co.dispatch("loading/finish")}},key:{summary:function(t){var e=t.key?t.key.toLowerCase():t.keycode,i={text:"ctrl",val:t.ctrlKey||t.ctrl},n={text:"alt",val:t.altKey||t.alt},r={text:"shift",val:t.shiftKey||t.shift},a={text:"meta",val:t.metaKey||t.meta},o=[i,n,r,a],s=o.filter((function(t){return 1==t.val})).map((function(t){return t.text})),c=o.every((function(t){return!0!==t.val}))?"default":s.join("+");return{key:e,xKey:c}}}}}},Jo=Xo,Yo=i("7591"),Zo=i.n(Yo);n["default"].config.productionTip=!1,n["default"].use(Zo.a),n["default"].use(Jo),new n["default"]({router:to,store:Co,vuetify:Ho,vuewer:Jo,render:function(t){return t(ti)}}).$mount("#app")},"56ee":function(t,e,i){"use strict";var n=i("9f3b"),r=i.n(n);r.a},"59bd":function(t,e,i){},"5c65":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-download")])],1)]}}])},[i("m-video-download-list",{on:{click:function(e){return t.$emit("click",e)}}})],1)},r=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",{attrs:{dense:""}},[i("v-list-item",{on:{click:function(e){return t.$emit("click","XLSX")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-google-spreadsheet")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.xlsx"))+" ")])],1),i("v-list-item",{on:{click:function(e){return t.$emit("click","JSON")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-code-json")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.json"))+" ")])],1),i("v-list-item",{on:{click:function(e){return t.$emit("click","PNG")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-file-image")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.png"))+" ")])],1),i("v-list-item",{on:{click:function(e){return t.$emit("click","MP4")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-file-video")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.mp4"))+" ")])],1),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.textgrid.name"))+" ")])],1)]},proxy:!0}]),model:{value:t.showTextGrid,callback:function(e){t.showTextGrid=e},expression:"showTextGrid"}},t._l(t.textgrid,(function(e,n){return i("v-list-item",{key:"t-"+n,on:{click:function(i){return t.$emit("click","TEXTGRID/"+e.value)}}},[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1)})),1),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.frame.name"))+" ")])],1)]},proxy:!0}]),model:{value:t.showFrame,callback:function(e){t.showFrame=e},expression:"showFrame"}},t._l(t.frame,(function(e,n){return i("v-list-item",{key:"t-"+n,on:{click:function(i){return t.$emit("click","FRAME/"+e.value)}}},[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1)})),1)],1)},o=[],s={name:"m-video-download-list",data:function(){return{showTextGrid:!1,showFrame:!1,textgrid:[{text:"$vuetify.downloads.textgrid.xlsx",value:"TEXTGRID"},{text:"$vuetify.downloads.textgrid.json",value:"JSON"},{text:"$vuetify.downloads.textgrid.xlsx",value:"XLSX"}],frame:[{text:"$vuetify.downloads.frame.json",value:"JSON"},{text:"$vuetify.downloads.frame.xlsx",value:"XLSX"}]}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("132d"),m=i("8860"),h=i("56b0"),v=i("da13"),p=i("5d23"),g=i("34c3"),x=Object(l["a"])(c,a,o,!1,null,"ea0a9c2e",null),b=x.exports;d()(x,{VIcon:f["a"],VList:m["a"],VListGroup:h["a"],VListItem:v["a"],VListItemContent:p["b"],VListItemIcon:g["a"],VListItemTitle:p["d"]});var y={name:"m-video-download-menu",components:{MVideoDownloadList:b}},w=y,k=i("8336"),$=i("e449"),_=Object(l["a"])(w,n,r,!1,null,"569d9c70",null);e["a"]=_.exports;d()(_,{VBtn:k["a"],VIcon:f["a"],VMenu:$["a"]})},6:function(t,e){},"612b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"pa-0 transparent fill-height",attrs:{fluid:""}},[i("v-col",{staticClass:"pa-0"},[i("v-card",{attrs:{flat:"",tile:""}},[i("v-row",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],attrs:{dense:""}},[i("v-col",{ref:"videoArray",staticClass:"pa-0 mr-2",attrs:{cols:t.$videoCols,dense:""}},[t._t("video")],2),i("v-col",{staticClass:"pa-0  mr-2",attrs:{cols:t.$textgridCols}},[t.$mini?t._e():i("v-card",{staticClass:"overflow-y-auto",attrs:{tile:"",flat:""}},[t._t("table")],2)],1)],1)],1),i("v-card",{staticClass:"d-flex mt-3 overflow-y-auto overflow-x-hidden",style:"max-height: "+t.wsMaxHeight+"px",attrs:{flat:"",tile:""}},[i("v-row",[i("v-col",{staticClass:"py-0 pr-0"},[t._t("default")],2)],1)],1)],1),t._t("bottom")],2)},r=[],a=i("b85c"),o={name:"WVuewerLayout",data:function(){return{maxHeight:0,wsMaxHeight:0}},computed:{$videoCols:{get:function(){return this.$store.state.current.layout.videoCols},set:function(t){this.$store.dispatch("current/layout/videoCols",t)}},$textgridCols:function(){return this.$store.state.current.layout.mini},$mini:function(){return this.$store.state.current.layout.mini},arrayHeight:function(){return this.$refs.videoArray.clientHeight}},watch:{"$refs.videoArray.clientHeight":function(){console.log("clientHeight")},"$vuetify.breakpoint.mdAndUp":function(t){this.$videoCols=0==t?12:6},"$store.state.current.wavesurfer":function(t){t&&0==this.maxHeight&&this.onResize()},$mini:function(t,e){if(0==e&&1==t){var i=10,n=this;setInterval(n.onResize,1e3),setTimeout((function(){clearInterval(n.onResize)}),1e3*i)}}},methods:{onResize:function(){var t=this;this.$nextTick((function(){if(t.$refs.videoArray){var e=t.$refs.videoArray.children;if(e){var i,n=0,r=Object(a["a"])(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.clientHeight&&(n+=o.clientHeight)}}catch(s){r.e(s)}finally{r.f()}t.maxHeight=Math.round(n),t.wsMaxHeight=Math.round(window.innerHeight-n-128),t.$emit("resize",t.maxHeight)}}}))}},mounted:function(){this.$videoCols=0==this.$vuetify.breakpoint.mdAndUp?12:6},beforeDestroy:function(){this.$store.dispatch("current/layout/init")}},s=o,c=i("2877"),l=i("6544"),u=i.n(l),d=i("b0af"),f=i("62ad"),m=i("a523"),h=i("0fd9"),v=i("269a"),p=i.n(v),g=i("dc22"),x=Object(c["a"])(s,n,r,!1,null,"19494fcc",null);e["a"]=x.exports;u()(x,{VCard:d["a"],VCol:f["a"],VContainer:m["a"],VRow:h["a"]}),p()(x,{Resize:g["a"]})},"643d":function(t,e,i){"use strict";i("4d63"),i("ac1f"),i("25f0");var n=i("53ca"),r="$vuetify.validations",a={positiveInteger:new RegExp(/^[0-9]+$/),positiveIntegerOrError:new RegExp(/^([0-9]+|-1)$/),positiveFloat:new RegExp(/^([1-9]\d*|0)(\.\d+)?$/)},o=function(t,e){return t.$vuetify?t.$vuetify.lang.t(e):"no vuetify"},s=function(t,e){return void 0!==e[t]};e["a"]={computed:{videoRules:function(){if(this.$vuetify){var t=this,e=this.$store.state.setting.maxVideoSize,i=1e6,n="arrayBuffer";return[function(e){return!!e||o(t,"".concat(r,".required"))},function(n){return!n||n.size<e*i||o(t,"".concat(r,".maxVideoSize"))},function(e){return!e||s(n,e)||o(t,"".concat(r,".hasArrayBuffer"))}]}return[]},rules:function(){var t=this;if(this.$vuetify){var e=function(){var e=t,i={videoRules:t.videoRules},n=function(t){i["".concat(t,"Rules")]=[function(t){return!!t||o(e,"".concat(r,".required"))},function(i){return a[t].test(i)||o(e,"".concat(r,".").concat(t))}]};for(var s in a)n(s);return{v:i}}();if("object"===Object(n["a"])(e))return e.v}return{}}}}},"68f8":function(t,e,i){"use strict";var n=i("6c94"),r=i.n(n);r.a},"6b13":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"context",attrs:{tabindex:"0"},on:{keyup:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("keyup",e)},keydown:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("keydown",e)}}},[t._t("default")],2)},r=[],a={name:"m-key-context",methods:{focus:function(){this.$refs.context.focus()},blur:function(){this.$refs.context.blur()}}},o=a,s=(i("b606"),i("2877")),c=Object(s["a"])(o,n,r,!1,null,"772e8981",null);e["a"]=c.exports},"6c94":function(t,e,i){},7:function(t,e){},"70f3":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-speed-dial",{attrs:{fixed:"",bottom:"",right:"",direction:"left",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?i("v-icon",[t._v("mdi-close")]):i("v-icon",[t._v("mdi-apps")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},t._l(t.btns,(function(e,n){return i("v-btn",{key:n,attrs:{fab:"",dark:"",small:"",color:e.color},on:{click:function(i){return t.$emit(e.event)}}},[i("v-icon",[t._v(t._s(e.icon))])],1)})),1)},r=[],a={name:"m-speed-dial",props:{value:{type:Boolean,default:!1}},computed:{fab:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},btns:function(){return this.$vuetify.breakpoint.smAndUp?[{event:"click-detail",color:"black",icon:"mdi-eye"},{event:"click-setting",color:"black",icon:"mdi-cog"},{event:"click-save",color:"black",icon:"mdi-content-save"},{event:"click-ruler",color:"orange",icon:"mdi-ruler",hideSM:!0},{event:"click-image-edit",color:"orange",icon:"mdi-selection-drag"},{event:"click-tier-edit",color:"green",icon:"mdi-pencil"},{event:"click-tier-add",color:"indigo",icon:"mdi-plus"},{event:"click-tier-delete",color:"red",icon:"mdi-delete"}]:[{event:"click-ruler",color:"orange",icon:"mdi-ruler",hideSM:!0},{event:"click-image-edit",color:"orange",icon:"mdi-selection-drag"},{event:"click-tier-edit",color:"green",icon:"mdi-pencil"},{event:"click-tier-add",color:"indigo",icon:"mdi-plus"},{event:"click-tier-delete",color:"red",icon:"mdi-delete"}]}}},o=a,s=i("2877"),c=i("6544"),l=i.n(c),u=i("8336"),d=i("132d"),f=i("c73b"),m=Object(s["a"])(o,n,r,!1,null,"59c1ff68",null);e["a"]=m.exports;l()(m,{VBtn:u["a"],VIcon:d["a"],VSpeedDial:f["a"]})},7987:function(t,e,i){"use strict";var n=i("7fdb"),r=i.n(n);r.a},"7bfa":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",fullscreen:t.$store.state.current.layout.mini,titleColor:t.color,title:t.$vuetify.lang.t(t.title),"max-width":"700"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("m-video-upload-menu",{on:{click:function(e){return t.$emit("upload-click",e)}}}),i("m-video-download-menu",{on:{click:function(e){return t.$emit("download-click",e)}}}),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){t.detail=!t.detail}}},[i("v-icon",[t._v(t._s(t.icon))])],1),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){t.dialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("m-text-grid",{attrs:{frames:t.frames,textgrid:t.textgrid,"video-height":t.height,color:t.color},on:{"click-image-edit":t.onClickImageEdit,"click-ruler":t.onClickRuler}}),t.detail?i("v-divider",{attrs:{inset:""}}):t._e(),t.detail?i("m-video-stream-list",{attrs:{"video-stream":t.videoStream}}):t._e(),t.detail?i("v-divider",{attrs:{inset:""}}):t._e(),t.detail?i("m-audio-stream-list",{attrs:{"audio-stream":t.audioStream}}):t._e()],1)],1)},r=[],a=i("9621"),o=i("3aaa"),s=i("94d2"),c=i("0bad"),l=i("5c65"),u=i("41e7"),d=i("4009"),f={name:"m-textgrid-dialog",mixins:[d["a"]],components:{MCardDialog:a["a"],MTextGrid:o["a"],MVideoDownloadMenu:l["a"],MVideoUploadMenu:u["a"],MVideoStreamList:s["a"],MAudioStreamList:c["a"]},props:{value:{type:Boolean},textgrid:{type:Object,default:function(){return{}}},frames:{type:Array,default:function(){return[]}}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},icon:function(){return this.detail?"mdi-chevron-up":"mdi-chevron-down"},height:function(){var t=window.innerHeight;return this.detail?t-336:t}},data:function(){return{title:"$vuetify.forms.detail.title",detail:!1,color:"grey darken-4"}},methods:{onClickImageEdit:function(t){this.$emit("click-image-edit",t),this.dialog=!1},onClickRuler:function(t){this.$emit("click-ruler",t),this.dialog=!1}}},m=f,h=i("2877"),v=i("6544"),p=i.n(v),g=i("8336"),x=i("b0af"),b=i("ce7e"),y=i("132d"),w=Object(h["a"])(m,n,r,!1,null,"69a2d0d4",null);e["a"]=w.exports;p()(w,{VBtn:g["a"],VCard:x["a"],VDivider:b["a"],VIcon:y["a"]})},"7c54":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form"},[i("div",[i("label",[t._v(t._s(t.t(t.locale+".waveform.label")))]),i("v-text-field",{attrs:{suffix:"px/sec",rules:t.minPxPerSecRule,label:t.t(t.locale+".waveform.minPxPerSec.label"),hint:t.t(t.locale+".waveform.minPxPerSec.hint")},model:{value:t.$minPxPerSec,callback:function(e){t.$minPxPerSec=e},expression:"$minPxPerSec"}}),t.$vuetify.breakpoint.smAndUp?i("v-row",[i("v-col",{staticClass:"text-truncate",attrs:{sm:"4"}},[i("label",[t._v(" "+t._s(t.t(t.locale+".waveform.cursorColor.label"))+": "+t._s(t.$cursorColor)+" ")]),i("v-color-picker",{attrs:{"show-swatches":""},model:{value:t.$cursorColor,callback:function(e){t.$cursorColor=e},expression:"$cursorColor"}})],1),i("v-col",{staticClass:"text-truncate",attrs:{sm:"4"}},[i("label",[t._v(" "+t._s(t.t(t.locale+".waveform.waveColor.label"))+": "+t._s(t.$waveColor)+" ")]),i("v-color-picker",{attrs:{"show-swatches":""},model:{value:t.$waveColor,callback:function(e){t.$waveColor=e},expression:"$waveColor"}})],1),i("v-col",{staticClass:"text-truncate",attrs:{sm:"4"}},[i("label",[t._v(" "+t._s(t.t(t.locale+".waveform.progressColor.label"))+": "+t._s(t.$progressColor)+" ")]),i("v-color-picker",{attrs:{"show-swatches":""},model:{value:t.$progressColor,callback:function(e){t.$progressColor=e},expression:"$progressColor"}})],1)],1):t._e(),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".waveform.showTimeLine.label")},model:{value:t.$showTimeLine,callback:function(e){t.$showTimeLine=e},expression:"$showTimeLine"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".waveform.showSpectrogram.label")},model:{value:t.$showSpectrogram,callback:function(e){t.$showSpectrogram=e},expression:"$showSpectrogram"}})],1),i("v-divider"),t.$showSpectrogram?i("div",{staticClass:"my-5"},[i("label",[t._v(t._s(t.t(t.locale+".spectrogram.label")))]),i("v-select",{attrs:{items:[0,1],label:t.t(t.locale+".spectrogram.targetChannel.label")},model:{value:t.$targetChannel,callback:function(e){t.$targetChannel=e},expression:"$targetChannel"}}),i("v-text-field",{attrs:{suffix:"* 512",rules:t.rules.positiveFloatRules,label:t.t(t.locale+".spectrogram.freqRate.label"),hint:t.t(t.locale+".spectrogram.freqRate.hint")},model:{value:t.$freqRate,callback:function(e){t.$freqRate=e},expression:"$freqRate"}}),i("v-text-field",{attrs:{suffix:"px",rules:t.rules.positiveIntegerRules,label:t.t(t.locale+".spectrogram.spectrogramHeight.label"),hint:t.t(t.locale+".spectrogram.spectrogramHeight.hint")},model:{value:t.$spectrogramHeight,callback:function(e){t.$spectrogramHeight=e},expression:"$spectrogramHeight"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".spectrogram.showFreqLabel.label")},model:{value:t.$showFreqLabel,callback:function(e){t.$showFreqLabel=e},expression:"$showFreqLabel"}})],1):t._e(),i("v-divider"),i("div",{staticClass:"my-5"},[i("label",[t._v(t._s(t.t(t.locale+".textgrid.label")))]),i("v-text-field",{attrs:{suffix:"frame",rules:t.rules.positiveIntegerRules,label:t.t(t.locale+".textgrid.playOffset.label"),hint:t.t(t.locale+".textgrid.playOffset.hint")},model:{value:t.$playOffset,callback:function(e){t.$playOffset=e},expression:"$playOffset"}}),i("v-select",{attrs:{"item-text":"text","item-value":"val",items:t.addRecordKeyChoice,label:""+t.t(t.locale+".textgrid.addRecordKey.label")},model:{value:t.$addRecordKey,callback:function(e){t.$addRecordKey=e},expression:"$addRecordKey"}}),i("v-select",{attrs:{"item-text":"text","item-value":"val",items:t.deleteRecordKeyChoice,label:""+t.t(t.locale+".textgrid.deleteRecordKey.label")},model:{value:t.$deleteRecordKey,callback:function(e){t.$deleteRecordKey=e},expression:"$deleteRecordKey"}})],1),i("v-divider"),i("div",{staticClass:"my-5"},[i("label",[t._v(t._s(t.t(t.locale+".video.label")))]),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.showFrameInVideo.label")},model:{value:t.$showFrameInVideo,callback:function(e){t.$showFrameInVideo=e},expression:"$showFrameInVideo"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.syncPoints.label")},model:{value:t.$showPointsInVideo,callback:function(e){t.$showPointsInVideo=e},expression:"$showPointsInVideo"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.syncRects.label")},model:{value:t.$showRectsInVideo,callback:function(e){t.$showRectsInVideo=e},expression:"$showRectsInVideo"}})],1)],1)},r=[],a=(i("a9e3"),i("b85c")),o=i("ee5b"),s=i("643d"),c={name:"m-setting-form",mixins:[o["a"],s["a"]],data:function(){return{locale:"$vuetify.setting.form"}},methods:{t:function(t){return this.$vuetify.lang.t(t)}},computed:{minPxPerSecRule:function(){var t,e=this,i=[],n=Object(a["a"])(this.rules.positiveIntegerRules);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.push(r)}}catch(o){n.e(o)}finally{n.f()}return i.push((function(t){return!t||Number(t)>100||e.$vuetify.lang.t("$vuetify.validations.more",100)})),i.push((function(t){return!t||Number(t)<700||e.$vuetify.lang.t("$vuetify.validations.less",700)})),i.push((function(t){return!t||Number(t)%50==0||e.$vuetify.lang.t("$vuetify.validations.times",50)})),i},addRecordKeyChoice:function(){return[{text:this.t("$vuetify.setting.form.textgrid.addRecordKey.dbl"),val:"dbl"},{text:this.t("$vuetify.setting.form.textgrid.addRecordKey.ctrl"),val:"ctrl"},{text:this.t("$vuetify.setting.form.textgrid.addRecordKey.alt"),val:"alt"}]},deleteRecordKeyChoice:function(){return[{text:this.t("$vuetify.setting.form.textgrid.deleteRecordKey.delete"),val:"delete"},{text:this.t("$vuetify.setting.form.textgrid.deleteRecordKey.ctrl"),val:"ctrl"},{text:this.t("$vuetify.setting.form.textgrid.deleteRecordKey.alt"),val:"alt"}]}}},l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("ac7c"),h=i("62ad"),v=i("03a4"),p=i("ce7e"),g=i("4bd4"),x=i("0fd9"),b=i("b974"),y=i("8654"),w=Object(u["a"])(l,n,r,!1,null,"a837ef86",null);e["a"]=w.exports;f()(w,{VCheckbox:m["a"],VCol:h["a"],VColorPicker:v["a"],VDivider:p["a"],VForm:g["a"],VRow:x["a"],VSelect:b["a"],VTextField:y["a"]})},"7fdb":function(t,e,i){},8:function(t,e){},"84c5":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{attrs:{color:t.color,dark:""}},[i("v-card-text",{staticClass:"pt-3"},[t._t("default"),t.value>-1?i("v-progress-linear",{staticClass:"mb-0",attrs:{value:t.value,color:t.progressColor,striped:""}}):i("v-progress-linear",{staticClass:"mb-0",attrs:{color:t.progressColor,indeterminate:""}})],2)],1)},r=[],a=(i("a9e3"),{name:"m-loading-card",props:{value:{type:Number,default:-1},color:{type:String,default:"primary"},progressColor:{type:String,default:"white"}}}),o=a,s=i("2877"),c=i("6544"),l=i.n(c),u=i("b0af"),d=i("99d9"),f=i("8e36"),m=Object(s["a"])(o,n,r,!1,null,"42647c8e",null);e["a"]=m.exports;l()(m,{VCard:u["a"],VCardText:d["c"],VProgressLinear:f["a"]})},"89a7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],style:t.canvasWrapperStyle,attrs:{flat:t.flat,tile:t.tile,tabindex:"0"},on:{mouseover:function(e){return t.$emit("mouseover")}}},[i("m-key-context",{ref:"keycontext",style:t.canvasWrapperStyle,on:{keyup:t.onKeyup}},[i("video",{ref:"video",style:t.videoStyle,attrs:{src:t.src},domProps:{muted:t.muted},on:{loadeddata:t.onLoaded,timeupdate:t.onTimeupdate}}),i("v-stage",{ref:"stage",style:t.canvasStyle,attrs:{config:t.canvas},on:{click:function(e){return t.onClickEvent(e,"click")},dblclick:function(e){return t.onClickEvent(e,"dblclick")}}},[t.$store.state.setting.showPointsInVideo?i("v-layer",t._l(t.frame.circles,(function(t,e){return i("v-circle",{key:e,attrs:{config:t}})})),1):t._e(),t.$store.state.setting.showRectsInVideo?i("v-layer",t._l(t.frame.rects,(function(t,e){return i("v-rect",{key:e,attrs:{config:t}})})),1):t._e(),i("v-layer",t._l(t.frame.texts,(function(t,e){return i("v-text",{key:e,attrs:{config:t}})})),1),t.$store.state.setting.showFrameInVideo?i("v-layer",[i("v-text",{attrs:{config:t.label}})],1):t._e()],1)],1),t.controls?i("v-card-actions",[i("v-btn",{attrs:{dark:"",icon:"",color:"primary"},on:{click:t.downloadImage}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-file-download")])],1),i("v-spacer"),i("v-btn",{attrs:{dark:"",icon:"",color:"primary"},on:{click:t.play}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-play")])],1),i("v-btn",{attrs:{dark:"",icon:"",color:"primary"},on:{click:t.pause}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-pause")])],1)],1):t._e()],1)},r=[],a=(i("99af"),i("c740"),i("d81d"),i("d3b7"),i("96cf"),i("1da1")),o=i("ed08"),s=i("6b13"),c={name:"m-video",components:{MKeyContext:s["a"]},props:{src:{type:String,required:!0},frames:{type:Array,default:function(){return[]}},originSize:{type:Object,default:function(){return{width:null,height:null}}},defaultPointColor:{type:String,default:"white"},defaultRectColor:{type:String,default:"white"},muted:{type:Boolean,default:!1},controls:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},tile:{type:Boolean,default:!1}},data:function(){return{show:!0,video:{image:null},frame:{idx:null,time:null,circles:[],rects:[],texts:[]},canvas:{width:0,height:0},videoStyle:{width:"100%",height:"auto"},canvasWrapperStyle:{position:"relative"},canvasStyle:{position:"absolute",top:0,left:0}}},watch:{frames:function(){var t=this.getCurrentTime();this.syncFrame(t)}},computed:{label:function(){var t=this.$vuewer.math.padding(this.frame.idx,3),e=Math.round(this.canvas.height/15);return{x:e/2,text:"".concat(t," / ").concat(this.frames.length),y:this.canvas.height-e,fontSize:e,fontFamily:"Arial",fontStyle:"normal",shadowColor:"black",shadowBlur:1,fill:o["a"].color.toCss("green",this.$vuetify)}},$frames:function(){var t=this,e=this.originSize.width,i=this.originSize.height,n=this.canvas.width,r=this.canvas.height;return this.frames.map((function(a){return{id:a.id,idx:a.idx,time:a.time,circles:a.points?a.points.map((function(a){return{stroke:"white",strokeWidth:1,x:e?a.x*n/e:a.x,y:i?a.y*r/i:a.y,radius:3,fill:o["a"].color.toCss(a.color||t.defaultPointColor,t.$vuetify)}})):[],rects:a.rects?a.rects.map((function(a){return{x:e?a.x*n/e:a.x,y:i?a.y*r/i:a.y,width:e?a.width*n/e:a.width,height:i?a.height*r/i:a.height,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1,strokeWidth:2,stroke:o["a"].color.toCss(a.color||t.defaultRectColor,t.$vuetify)}})):[],texts:a.texts?a.texts.map((function(n){return{x:e?n.x*t.canvas.width/e:n.x,y:i?n.y*t.canvas.height/i:n.y,text:n.text,fontSize:n.size,fontFamily:n.fontFamily||"Arial",fontStyle:n.fontStyle||"normal",shadowColor:"black",shadowBlur:1,fill:o["a"].color.toCss(n.color||t.defaultRectColor,t.$vuetify)}})):[]}}))}},methods:{focus:function(){this.$refs.keycontext.focus()},setPlaybackRate:function(t){this.$refs.video.defaultPlaybackRate=t},play:function(){this.$refs.video.play()},pause:function(){this.$refs.video.pause()},setCurrentTime:function(t){this.$refs.video.currentTime=t},getCurrentTime:function(){return this.$refs.video?this.$refs.video.currentTime:0},getDuration:function(){return this.$refs.video.duration},copyImage:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.toDataURL();case 2:return e=t.sent,i=this.$vuewer.io.file.toBlob(e),t.next=6,navigator.clipboard.write([new ClipboardItem({"image/png":i})]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downloadImage:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="time-".concat(this.getCurrentTime(),".png"),this.frames.length>0&&(e="frame-".concat(this.frame.idx,".png")),t.next=4,this.toDataURL();case 4:i=t.sent,n=document.createElement("a"),n.href=i,n.download=e,n.click();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getVideoDataURL:function(){var t=this.$refs.video;if(t){var e=document.createElement("canvas");return e.width=this.originSize.width,e.height=this.originSize.height,e.getContext("2d").drawImage(t,0,0,e.width,e.height),e.toDataURL()}return null},toDataURL:function(){var t=this;return new Promise((function(e,i){if(t.$refs.stage){var n=t.$refs.stage.getStage(),r=t.$refs.video;if(r){var a=document.createElement("canvas");a.width=t.originSize.width,a.height=t.originSize.height,a.getContext("2d").drawImage(r,0,0,a.width,a.height);var o=n.toDataURL(),s=new Image;s.src=o,s.onload=function(){a.getContext("2d").drawImage(s,0,0,a.width,a.height),e(a.toDataURL())},s.onerror=function(t){return i(t)}}else i(Error("No video"))}}))},setCanvasSize:function(){var t=this.$refs.video;if(t){var e=this.$refs.video.clientWidth,i=this.$refs.video.clientHeight;this.canvas.width=e,this.canvas.height=i}},syncFrame:function(t){if(this.$frames.length>0&&t){var e=this.$vuewer.math.nearest(this.$frames,"time",t);if(e.time>=t){this.frame=e;var i=this.frames.findIndex((function(t){return t.id==e.id}));-1!==i&&this.$emit("frame-updated",this.frames[i])}}},onLoaded:function(){this.setCanvasSize(),this.$frames.length>0&&(this.frame=this.$frames[0]),this.$emit("loadeddata",this.$refs.video),this.show=!1},onResize:function(){this.setCanvasSize()},onKeyup:function(t){var e=this.$vuewer.key.summary(event),i=e.key,n=e.xKey;"c"==i&&"ctrl"==n?this.copyImage():this.$emit("keyup",t)},onTimeupdate:function(){var t=this;setTimeout((function(){var e=t.getCurrentTime();t.$emit("timeupdate",e),t.syncFrame(e)}))},onClickEvent:function(t,e){var i={event:t,frame:this.frame,origin:this.originSize,canvas:this.canvas};this.$emit(e,i)}}},l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("8336"),h=i("b0af"),v=i("99d9"),p=i("132d"),g=i("2fa4"),x=i("269a"),b=i.n(x),y=i("dc22"),w=Object(u["a"])(l,n,r,!1,null,"4af4e26a",null);e["a"]=w.exports;f()(w,{VBtn:m["a"],VCard:h["a"],VCardActions:v["a"],VIcon:p["a"],VSpacer:g["a"]}),b()(w,{Resize:y["a"]})},"8c19":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",titleColor:"warning darken-1",fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title),"max-width":t.maxWidth},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("span",[t._v(" "+t._s(t.header)+" ")]),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("div",[i("m-ruler-editor",{ref:"editor",attrs:{"origin-size":t.originSize},on:{"update-max-width":t.onUpdateMaxWidth,skip:t.onSkip}})],1)])},r=[],a=(i("99af"),i("9621")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{ref:"card",staticClass:"mx-auto",attrs:{color:"grey"}},[i("v-toolbar",{attrs:{dense:""}},[i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[i("v-btn",{attrs:{text:""}},[i("v-icon",[t._v("mdi-map-marker-distance")])],1),i("v-btn",{attrs:{text:""}},[i("v-icon",[t._v("mdi-map-marker")])],1),i("v-btn",{attrs:{text:""}},[i("v-icon",[t._v("mdi-eraser")])],1)],1),i("div",{staticClass:"mx-1"}),i("m-color-menu",{attrs:{icon:""},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),i("v-spacer"),i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"}},[i("v-btn",{attrs:{icon:""},on:{click:t.skipPrev}},[i("v-icon",[t._v("mdi-skip-previous")])],1),i("v-btn",{attrs:{icon:""},on:{click:t.skipNext}},[i("v-icon",[t._v("mdi-skip-next")])],1)],1),i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"}},[i("v-btn",{attrs:{text:""},on:{click:t.zoomOut}},[i("v-icon",[t._v("mdi-magnify-minus")])],1),i("v-btn",{attrs:{text:""},on:{click:t.zoomIn}},[i("v-icon",[t._v("mdi-magnify-plus")])],1)],1),i("v-btn",{attrs:{text:""},on:{click:t.downloadImage}},[t._v(" png "),i("v-icon",[t._v("mdi-download")])],1),i("v-btn",{attrs:{text:""},on:{click:t.downloadSheet}},[t._v(" xlsx "),i("v-icon",[t._v("mdi-download")])],1)],1),i("v-card",{staticClass:"overflow-y-auto",style:"max-height: "+t.canvasMaxHeight+"px",attrs:{flat:""}},[i("v-stage",{ref:"stage",attrs:{config:t.canvas},on:{dblclick:t.onDblClick}},[i("v-layer",{ref:"layer"},[i("v-image",{attrs:{config:t.background}})],1),i("v-layer",{ref:"layer"},t._l(t.points,(function(e,n){return i("v-circle",{key:n,attrs:{config:{x:e.x,y:e.y,stroke:"white",strokeWidth:1,opacity:e.opacity||1,radius:e.size,fill:e.color}},on:{click:t.onPointClick,mouseenter:t.onPointMouseEnter,mouseleave:t.onPointMouseLeave}})})),1),1!=t.mode?i("v-layer",{ref:"layer"},t._l(t.lines,(function(e,n){return i("v-line",{key:n,attrs:{config:{points:e.points,stroke:e.color,strokeWidth:e.size,lineCap:"round",lineJoin:"round",dash:[5,10]}},on:{click:t.onLineClick,mouseenter:t.onLineMouseEnter,mouseleave:t.onLineMouseLeave}})})),1):t._e()],1)],1),i("v-tabs",{attrs:{"fixed-tabs":"","background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab",[t._v(" Points ")]),i("v-tab",[t._v(" Distance ")])],1),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",[i("m-point-table",{attrs:{"show-frame":"",points:t.points,"origin-size":t.originSize,"canvas-size":t.canvas},on:{"update-point":t.onUpdatePoint}})],1),i("v-tab-item",[i("m-line-table",{attrs:{"show-frame":"",lines:t.lines,"origin-size":t.originSize,"canvas-size":t.canvas},on:{"update-line":t.onUpdateLine}})],1)],1)],1)},s=[],c=(i("c740"),i("a434"),i("ac1f"),i("1276"),i("96cf"),i("1da1")),l=i("b85c"),u=i("27a3"),d=i("f4a9"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{headers:t.headers,items:t.lines},scopedSlots:t._u([{key:"item.label",fn:function(e){return[i("v-edit-dialog",{attrs:{"return-value":e.item.label},on:{"update:returnValue":function(i){return t.$set(e.item,"label",i)},"update:return-value":function(i){return t.$set(e.item,"label",i)},close:function(i){return t.close(e.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[i("v-text-field",{attrs:{rules:[t.max25chars],label:"Edit","single-line":"",counter:""},model:{value:e.item.label,callback:function(i){t.$set(e.item,"label",i)},expression:"props.item.label"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.item.label)+" ")])]}},{key:"item.time",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.frame.time))+" ")]}},{key:"item.x1",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.points[0]/t.cw*t.ow))+" ")]}},{key:"item.y1",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.points[1]/t.cw*t.ow))+" ")]}},{key:"item.x2",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.points[2]/t.cw*t.ow))+" ")]}},{key:"item.y2",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.points[3]/t.cw*t.ow))+" ")]}},{key:"item.distance",fn:function(e){return[t._v(" "+t._s(Math.round(t.getDistance(e.item.points)))+" ")]}},{key:"item.color",fn:function(e){return[i("m-color-menu",{attrs:{icon:""},on:{input:function(i){return t.close(e.item)}},model:{value:e.item.color,callback:function(i){t.$set(e.item,"color",i)},expression:"props.item.color"}})]}}])})},m=[],h=i("b8b8"),v={name:"m-line-table",components:{MColorMenu:h["a"]},props:{showFrame:{type:Boolean,default:!1},lines:{type:Array,require:!0},originSize:{type:Object,require:!0},canvasSize:{type:Object,require:!0}},computed:{ow:function(){return this.originSize.width?this.originSize.width:0},oh:function(){return this.originSize.height?this.originSize.height:0},cw:function(){return this.canvasSize.width?this.canvasSize.width:0},ch:function(){return this.canvasSize.height?this.canvasSize.width:0},headers:function(){return this.showFrame?[{text:"label",value:"label"},{text:"frame",value:"frame.idx"},{text:"time",value:"time"},{text:"x1",value:"x1"},{text:"y1",value:"y1"},{text:"x2",value:"x2"},{text:"y2",value:"y2"},{text:"distance",value:"distance"},{text:"color",value:"color"}]:[{text:"label",value:"label"},{text:"x1",value:"x1"},{text:"y1",value:"y1"},{text:"x2",value:"x2"},{text:"y2",value:"y2"},{text:"distance",value:"distance"},{text:"color",value:"color"}]}},data:function(){return{max25chars:function(t){return t.length<=25||"Input too long!"},pagination:{}}},methods:{getDistance:function(t){var e={x:t[0]/this.cw*this.ow,y:t[1]/this.ch*this.oh},i={x:t[2]/this.cw*this.ow,y:t[3]/this.ch*this.oh};return this.$vuewer.math.distance(e,i)},close:function(t){this.$emit("update-line",t)}}},p=v,g=i("2877"),x=i("6544"),b=i.n(x),y=i("8fea"),w=i("7679"),k=i("8654"),$=Object(g["a"])(p,f,m,!1,null,"3639f07e",null),_=$.exports;b()($,{VDataTable:y["a"],VEditDialog:w["a"],VTextField:k["a"]});var S={name:"m-ruler-editor",mixins:[u["a"]],components:{MColorMenu:h["a"],MPointTable:d["a"],MLineTable:_},props:{originSize:{type:Object}},data:function(){return{mode:0,color:"#F44336",oldColors:["#FF7043","#FF8A65","#FFAB91","#FFCCBC","#FBE9E7"],canvasMaxHeight:600,size:5,scale:0,widthRate:0,heightRate:0,tab:null,points:[],lines:[],background:{image:null},canvas:{width:600,height:600},mouse:{x:null,y:null}}},computed:{src:function(){return this.$store.state.current.frame.src},id:function(){return this.$store.state.current.frame.id},idx:function(){return this.$store.state.current.frame.idx},time:function(){return this.$store.state.current.frame.time}},methods:{close:function(){this.scale=0,this.points=[],this.lines=[]},downloadImage:function(){var t=this.$store.state.current.video.filename.split(".")[0],e="".concat(t,"-f").concat(this.idx,".png"),i=this.$refs.stage.getStage(),n=i.toDataURL();this.$vuewer.download.url(n,e)},downloadSheet:function(){var t,e=this.originSize.width,i=this.originSize.height,n=this.canvas.width,r=this.canvas.height,a=[["label","frame","time","x","y","color"]],o=Object(l["a"])(this.points||[]);try{for(o.s();!(t=o.n()).done;){var s=t.value,c=[s.label,s.frame.idx,s.frame.time,Math.round(s.x/n*e),Math.round(s.y/r*i),s.color];a.push(c)}}catch(w){o.e(w)}finally{o.f()}var u,d=[["label","frame","time","x1","y1","x2","y2","distance","color"]],f=Object(l["a"])(this.lines||[]);try{for(f.s();!(u=f.n()).done;){var m=u.value,h={x:m.points[0]/n*e,y:m.points[1]/r*i},v={x:m.points[2]/n*e,y:m.points[3]/r*i},p=this.$vuewer.math.distance(h,v),g=[m.label,m.frame.idx,m.frame.time,h.x,h.y,v.x,v.y,p,m.color];d.push(g)}}catch(w){f.e(w)}finally{f.f()}var x={points:a,lines:d},b=this.$vuewer.io.xlsx.dump(x),y=this.$store.state.current.video.filename.split(".")[0];this.$vuewer.download.blob(b,"".concat(y,"-measurement.xlsx"))},skipNext:function(){this.skipForward(),this.$emit("skip")},skipPrev:function(){this.skipBackward(),this.$emit("skip")},zoomIn:function(){this.scale<0&&(this.scale=0);var t=this.$refs.card.$el.clientWidth||500,e=t+100*this.scale;e<1e3&&(this.scale=this.scale+.5,this.loadImage(this.src))},zoomOut:function(){this.scale>0&&(this.scale=0);var t=this.$refs.card.$el.clientWidth||500,e=t+100*this.scale;e>500&&(this.scale=this.scale-.5,this.loadImage(this.src))},addPoint:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i,n,r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={mode:this.mode,id:this.points.length+1,label:"point-".concat(this.points.length+1),frame:{time:this.time,idx:this.idx},x:e,y:i,size:r,color:n},this.id&&(o=this.points.length,a.id=o+1,a.label="points-".concat(o+1)),this.points.push(a);case 3:case"end":return t.stop()}}),t,this)})));function e(e,i,n,r){return t.apply(this,arguments)}return e}(),onPointClick:function(t){if(2==this.mode){var e=t.target.index;if(0==this.points[e].mode){var i=this.lines.findIndex((function(t){return t.ref[0]==e||t.ref[1]==e}));this.points.splice(this.lines[i].ref[0],2),this.lines.splice(i,1)}else this.points.splice(e,1)}},onPointMouseEnter:function(t){var e=t.target.index;2==this.mode&&(this.points[e].size=this.size+2)},onPointMouseLeave:function(t){var e=t.target.index;2==this.mode&&(this.points[e].size=this.size)},resizePoints:function(t,e,i,n){for(var r in this.points||[]){var a=this.points[r];this.points[r].x=a.x*t/i,this.points[r].y=a.y*e/n}},addLine:function(t,e){var i=this.points[t],n=this.points[e];this.points[t].color=this.color,this.points[e].color=this.color;var r=this.lines.length;this.lines.push({id:r+1,points:[i.x,i.y,n.x,n.y],ref:[t,e],size:5,color:this.color,frame:{time:this.time,idx:this.idx},label:"lines-".concat(r+1)})},resizeLines:function(t,e,i,n){for(var r in this.lines||[]){var a=this.lines[r],o=[a.points[0]*t/i,a.points[1]*e/n,a.points[2]*t/i,a.points[3]*e/n];this.lines[r].points=o}},onLineClick:function(t){if(2==this.mode){var e=t.target.index;this.points.splice(this.lines[e].ref[0],2),this.lines.splice(e,1)}},onLineMouseEnter:function(t){var e=t.target.index;2==this.mode&&(this.lines[e].size=this.size+2,this.points[this.lines[e].ref[0]]=this.size+2,this.points[this.lines[e].ref[1]]=this.size+2)},onLineMouseLeave:function(t){var e=t.target.index;2==this.mode&&(this.lines[e].size=this.size,this.points[this.lines[e].ref[0]]=this.size,this.points[this.lines[e].ref[1]]=this.size)},loadImage:function(t){var e=this,i=new Image;i.src=t,i.onload=function(){e.onResize(),e.background.image=i}},onDblClick:function(){if(2!=this.mode&&(this.mouse=this.$refs.stage.getNode().getPointerPosition(),this.addPoint(this.mouse.x,this.mouse.y,this.color,this.size),0==this.mode)){var t=this.points.length;t%2==0&&this.addLine(t-2,t-1)}},onUpdatePoint:function(t){var e=this.points.findIndex((function(e){return e.id==t.id}));this.points[e].label=t.label,this.points[e].color=t.color},onUpdateLine:function(t){var e=this.lines.findIndex((function(e){return e.id==t.id}));this.lines[e].label=t.label,this.lines[e].color=t.color,this.points[t.ref[0]].color=t.color,this.points[t.ref[1]].color=t.color},onResize:function(){var t=this.$refs.card.$el.clientWidth||500,e=this.originSize.height*t/this.originSize.width,i=t+100*this.scale,n=e+100*this.scale;this.resizePoints(i,n,this.canvas.width,this.canvas.height),this.resizeLines(i,n,this.canvas.width,this.canvas.height),this.canvas.width=i,this.canvas.height=n,this.background.height=i,this.background.width=n,this.widthRate=i/this.originSize.width,this.heightRate=n/this.originSize.height,this.canvasMaxHeight=e-128,this.$emit("update-max-width",String(i+16))}},watch:{mode:function(t){void 0==t&&(this.mode=0)},src:function(t){if(t){for(var e in this.scale=0,this.loadImage(t),this.points){var i=this.idx-this.points[e].frame.idx;0==i&&(this.points[e].color=this.color),this.points[e].color=i<6?this.oldColors[i-1]:"#9E9E9E"}for(var n in this.lines){var r=this.idx-this.points[n].frame.idx;this.lines[n].color=r<6?this.oldColors[r-1]:"#9E9E9E"}}}},mounted:function(){this.scale=0,this.loadImage(this.src)}},C=S,T=i("8336"),V=i("a609"),R=i("b0af"),I=i("132d"),j=i("2fa4"),D=i("71a3"),E=i("c671"),M=i("fe57"),O=i("aac8"),L=i("71d9"),z=Object(g["a"])(C,o,s,!1,null,"4ae33ddb",null),P=z.exports;b()(z,{VBtn:T["a"],VBtnToggle:V["a"],VCard:R["a"],VIcon:I["a"],VSpacer:j["a"],VTab:D["a"],VTabItem:E["a"],VTabs:M["a"],VTabsItems:O["a"],VToolbar:L["a"]});var F={name:"m-ruler-dialog",components:{MCardDialog:a["a"],MRulerEditor:P},data:function(){return{maxWidth:"700"}},props:{value:{type:Boolean,required:!0},originSize:{type:Object,required:!0}},methods:{onUpdateMaxWidth:function(t){this.maxWidth!=t&&(this.maxWidth=t)},onSkip:function(){this.maxWidth="700"},close:function(){this.$refs.editor.close(),this.maxWidth="700",this.dialog=!1}},computed:{title:function(){return"$vuetify.forms.ruler.title"},header:function(){var t=this.$store.state.current.frame.time,e=this.$store.state.current.frame.id;return e?"FRAME: ".concat(e,": ").concat(this.$vuewer.math.round(t,3)," sec"):"".concat(this.$vuewer.math.round(t,3)," sec")},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},A=F,N=Object(g["a"])(A,n,r,!1,null,"1c269326",null);e["a"]=N.exports;b()(N,{VBtn:T["a"],VIcon:I["a"]})},"8e30":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[t.showJumbotron?i("v-row",[i("v-col",[i("m-jumbotron",{attrs:{heading:t.heading,desc:t.desc}})],1)],1):t._e(),i("v-row",{class:t.colClass},[i("v-col",{class:t.colClass},[t._t("default")],2)],1)],1)},r=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"text-center"},[i("h1",{staticClass:"font-weight-light display-3 text-truncate",domProps:{textContent:t._s(""+t.heading)}}),t.desc?i("div",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}],staticClass:"font-weight-light subtitle-1",domProps:{innerHTML:t._s(t.desc)}}):t._e()])},o=[],s={name:"WJumbotron.vue",props:{heading:{type:String,default:""},desc:{type:String,default:""}}},c=s,l=i("2877"),u=Object(l["a"])(c,a,o,!1,null,"4ac22fc9",null),d=u.exports,f={name:"MViewLayout",components:{MJumbotron:d},props:{heading:{type:String},desc:{type:String}},computed:{showJumbotron:function(){return!!this.heading&&this.desc},colClass:function(){return this.$vuetify.breakpoint.smAndUp?"":"ma-0 pa-0"}}},m=f,h=i("6544"),v=i.n(h),p=i("62ad"),g=i("a523"),x=i("0fd9"),b=Object(l["a"])(m,n,r,!1,null,"9ed1254e",null);e["a"]=b.exports;v()(b,{VCol:p["a"],VContainer:g["a"],VRow:x["a"]})},9:function(t,e){},"94d2":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",[i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"indigo"}},[t._v("mdi-file-video")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.videoStream.codec_name)+" ")])],1)],1),i("v-list-item",[i("v-list-item-icon"),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.videoStream.pix_fmt)+" ")])],1)],1),i("v-list-item",[i("v-list-item-icon"),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.videoStream.bitrate)+" kb/s, "+t._s(t.videoStream.tbr)+" tbr, "+t._s(t.videoStream.tbn)+" tbn, "+t._s(t.videoStream.tbc)+" tbc ")])],1)],1)],1)},r=[],a={name:"m-video-stream-list",props:{videoStream:{type:Object,required:!0}}},o=a,s=i("2877"),c=i("6544"),l=i.n(c),u=i("132d"),d=i("8860"),f=i("da13"),m=i("5d23"),h=i("34c3"),v=Object(s["a"])(o,n,r,!1,null,"70be4f6e",null);e["a"]=v.exports;l()(v,{VIcon:u["a"],VList:d["a"],VListItem:f["a"],VListItemContent:m["b"],VListItemIcon:h["a"],VListItemTitle:m["d"]})},9621:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{fullscreen:t.fullscreen,"hide-overlay":t.hideOverlay,transition:t.transition,persistent:t.persistent,"max-width":t.maxWidth},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("m-t-card",{attrs:{title:t.title,"title-color":t.titleColor,prependIcon:t.prependIcon,prependIconColor:t.prependIconColor,"toolbar-actions":t.toolbarActions,dense:t.dense},scopedSlots:t._u([{key:"toolbar-actions",fn:function(){return[t._t("toolbar-actions")]},proxy:!0}],null,!0)},[t._t("default")],2)],1)},r=[],a=(i("a623"),i("d81d"),i("531d")),o={name:"MDialog",components:{MTCard:a["a"]},props:{value:{type:Boolean,default:!1},title:{type:String},fullscreen:{type:Boolean,default:!1},hideOverlay:{type:Boolean,default:function(){return this.fullscreen}},transition:{type:String,default:function(){return this.fullscreen?"dialog-bottom-transition":"dialog-transition"}},dense:{type:Boolean,default:!1},prependIcon:{type:String,default:""},titleColor:{type:String,default:"primary"},prependIconColor:{type:String,default:""},toolbarActions:{type:Array,validator:function(t){if(0==t.length)return!0;var e=t.map((function(t){return"icon"in t&&"action"in t}));return e.every((function(t){return t}))},default:function(){var t=this,e=function(){t.dialog=!1};return this.fullscreen?[{icon:"mdi-close",action:e}]:[]}},persistent:{type:Boolean,default:!1},maxWidth:{type:String,default:"600px"}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1},open:function(){this.dialog=!0}}},s=o,c=i("2877"),l=i("6544"),u=i.n(l),d=i("169a"),f=Object(c["a"])(s,n,r,!1,null,"1e14076c",null);e["a"]=f.exports;u()(f,{VDialog:d["a"]})},"99cd":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-context-menu",{scopedSlots:t._u([{key:"menus",fn:function(){return[i("v-card",{ref:"card",staticClass:"mx-auto overflow-y-auto",attrs:{"min-width":"400","max-height":"600"}},[i("v-toolbar",{attrs:{dense:"",color:"primary",dark:""}},[i("v-toolbar-title",[t._v("VUWER-MENU")])],1),i("input",{ref:"input",staticStyle:{display:"none"},attrs:{accept:t.accept,type:"file"},on:{change:t.onChange}}),i("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"",subheader:"","max-height":"450"}},t._l(t.items,(function(e,n){return i("div",{key:n},[e.subheader?i("v-subheader",{staticClass:"grey--text text--darken-3"},[t._v(" "+t._s(t.$vuetify.lang.t(e.subheader))+" ")]):i("v-divider"),e.items?i("v-list-group",{attrs:{"prepend-icon":e.icon},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1)]},proxy:!0}],null,!0),model:{value:e.show,callback:function(i){t.$set(e,"show",i)},expression:"item.show"}},t._l(e.items,(function(e,n){return i("v-list-item",{key:n,on:{click:e.click}},[i("v-list-item-icon",[i("v-icon")],1),i("v-list-item-content",[i("v-list-item-title",[e.icon?i("v-icon",[t._v(" "+t._s(e.icon)+" ")]):t._e(),t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")],1)],1),e.kbd?i("v-list-item-action",[i("v-spacer"),i("v-list-item-action-text",{domProps:{textContent:t._s(e.kbd)}})],1):t._e()],1)})),1):e.text?i("v-list-item",{on:{click:e.click}},[i("v-list-item-icon",[i("v-icon",[t._v(" "+t._s(e.icon)+" ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1),e.kbd?i("v-list-item-action",[i("v-list-item-action-text",{domProps:{textContent:t._s(e.kbd)}})],1):t._e()],1):t._e()],1)})),0)],1)]},proxy:!0}])},[t._t("default")],2)},r=[],a=(i("a9e3"),i("53ca")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{absolute:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-card",t._b({on:{contextmenu:function(t){return t.preventDefault(),n.click(t)},keydown:n.keydown}},"v-card",r,!1),[t._t("default")],2)]}}],null,!0),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._t("menus")],2)},s=[],c={name:"MContextMenu",data:function(){return{menu:!1}}},l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("b0af"),h=i("e449"),v=Object(u["a"])(l,o,s,!1,null,"7b805942",null),p=v.exports;f()(v,{VCard:m["a"],VMenu:h["a"]});var g={computed:{frameSource:{get:function(){return this.$store.state.current.frame.source},set:function(t){this.$store.commit("current/frame/setSource",t)}},frameIdx:{get:function(){return this.$store.state.current.frame.idx},set:function(t){this.$store.commit("current/frame/setIdx",Math.round(Number(t)))}},frameTime:{get:function(){return this.$store.state.current.frame.time},set:function(t){this.$store.commit("current/frame/setTime",Number(t))}}}},x=i("27a3"),b={name:"m-w-context-menu",mixins:[g,x["a"]],components:{MContextMenu:p},data:function(){return{accept:"",clicked:null}},computed:{fps:function(){return this.$store.state.current.video.fps},$minPxPerSec:{get:function(){return this.$store.state.setting.minPxPerSec},set:function(t){var e=Object(a["a"])(t),i=null;"number"==e?i=t:"string"==e&&(i=Number(t)),i&&this.$store.commit("setting/setMinPxPerSec",i)}},items:function(){var t=this,e=this.$vuewer.dropbox.hasToken(),i=e?"$vuetify.contexts.saveDropbox":"$vuetify.contexts.save";return[{text:"$vuetify.contexts.playPause",kbd:"TAB",icon:"mdi-play-pause",click:this.playPause},{text:"$vuetify.contexts.skip",show:!1,icon:"mdi-skip-next",items:[{text:"$vuetify.contexts.skipBackward",icon:"mdi-skip-previous",kbd:"J",click:this.skipBackward},{text:"$vuetify.contexts.skipForward",icon:"mdi-skip-next",kbd:"K",click:this.skipForward}]},{text:"$vuetify.contexts.zoom",show:!1,icon:"mdi-magnify-plus",items:[{text:"$vuetify.contexts.zoom_in",icon:"mdi-magnify-plus",kbd:"CTRL + +",click:this.incPxPerSec},{text:"$vuetify.contexts.zoom_out",icon:"mdi-magnify-minus",kbd:"CTRL + -",click:this.decPxPerSec}]},{text:"$vuetify.contexts.denoising.audio",icon:"mdi-headphones-settings",show:!1,items:[{text:"AFFTDN FILTER",icon:"",click:function(){setTimeout((function(){var e={type:"afftdn"};t.$emit("click-noise-reduction",e)}),10)}},{text:"NON-LOCAL MEANS FILTER",icon:"",click:function(){setTimeout((function(){var e={type:"anlmdn"};t.$emit("click-noise-reduction",e)}),10)}},{text:"BANDPASS FILTER",icon:"",click:function(){setTimeout((function(){var e={type:"bandpass",low:300,heigh:100};t.$emit("click-noise-reduction",e)}),10)}}]},{text:"$vuetify.contexts.setting",icon:"mdi-cog",click:function(){setTimeout((function(){t.$emit("click-setting")}),10)}},{text:i,icon:"mdi-content-save",kbd:"CTRL + S",click:function(){setTimeout((function(){t.$emit("click-save")}),10)}},{text:"$vuetify.contexts.loadDropbox",icon:"mdi-dropbox",kbd:"CTRL + R",click:function(){setTimeout((function(){t.$emit("click-load-dropbox")}),10)}},{text:"$vuetify.uploads.name",show:!1,icon:"mdi-upload",items:[{text:"$vuetify.uploads.dict",icon:"",click:function(){setTimeout((function(){t.$emit("click-complate")}),10)}},{text:"$vuetify.uploads.textgrid.textgrid",icon:"",click:function(){t.accept=".TextGrid,.textgrid,.Textgrid",t.clicked="TEXTGRID/TEXTGRID",t.$nextTick((function(){return t.$refs.input.click()}))}},{text:"$vuetify.uploads.textgrid.json.v2",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON",t.$nextTick((function(){return t.$refs.input.click()}))}},{text:"$vuetify.uploads.textgrid.json.v1",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON/VER1",t.$nextTick((function(){return t.$refs.input.click()}))}},{text:"$vuetify.uploads.textgrid.json.v1left",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON/VER1/LEFT",t.$nextTick((function(){return t.$refs.input.click()}))}},{text:"$vuetify.uploads.textgrid.json.v1left",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON/VER1/RIGHT",t.$nextTick((function(){return t.$refs.input.click()}))}}]},{text:"$vuetify.downloads.name",show:!1,icon:"mdi-download",items:[{text:"$vuetify.downloads.xlsx",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","XLSX")}),10)}},{text:"$vuetify.downloads.textgrid.xlsx",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","TEXTGRID/XLSX")}),10)}},{text:"$vuetify.downloads.frame.xlsx",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","FRAME/XLSX")}),10)}},{text:"$vuetify.downloads.json",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","JSON")}),10)}},{text:"$vuetify.downloads.textgrid.json",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","TEXTGRID/JSON")}),10)}},{text:"$vuetify.downloads.frame.json",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","FRAME/JSON")}),10)}},{text:"$vuetify.downloads.png",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","PNG")}),10)}},{text:"$vuetify.downloads.mp4",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","MP4")}),10)}},{text:"$vuetify.downloads.textgrid.textgrid",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","TEXTGRID/TEXTGRID")}),10)}}]},{subheader:"$vuetify.textgrid.name"},{text:"$vuetify.contexts.tier.add",icon:"mdi-plus",kbd:"CTRL + SHIFT + C",click:function(){setTimeout((function(){t.$emit("click-tier-add")}),10)}},{text:"$vuetify.contexts.tier.edit",icon:"mdi-pencil",click:function(){setTimeout((function(){t.$emit("click-tier-edit")}),10)}},{text:"$vuetify.contexts.tier.delete",icon:"mdi-delete",kbd:"CTRL + SHIFT + DELETE",click:function(){setTimeout((function(){t.$emit("click-tier-delete")}),10)}},{text:"$vuetify.contexts.record.name",show:!1,icon:"mdi-movie-edit",items:[{text:"$vuetify.contexts.record.play",icon:"",kbd:"TAB",click:function(){setTimeout((function(){t.$emit("click-record","play")}),10)}},{text:"$vuetify.contexts.record.copy",icon:"",kbd:"CTRL + C",click:function(){setTimeout((function(){t.$emit("click-record","copy")}),10)}},{text:"$vuetify.contexts.record.paste",icon:"",kbd:"CTRL + V",click:function(){setTimeout((function(){t.$emit("click-record","paste")}),10)}},{text:"$vuetify.contexts.record.prev",kbd:"CTRL + J",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","prev")}),10)}},{text:"$vuetify.contexts.record.next",icon:"",kbd:"CTRL + K",click:function(){setTimeout((function(){t.$emit("click-record","next")}),10)}},{text:"$vuetify.contexts.record.toEnd",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","to-end")}),10)}},{text:"$vuetify.contexts.record.toStart",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","to-start")}),10)}},{text:"$vuetify.contexts.record.shrink",kbd:"CTRL + SHIFT + J",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","shrink")}),10)}},{text:"$vuetify.contexts.record.extend",kbd:"CTRL + SHIFT + K",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","extend")}),10)}},{text:"$vuetify.contexts.record.splitByFrames",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","split-by-frames")}),10)}},{text:"$vuetify.contexts.record.splitByChars",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","split-by-chars")}),10)}},{text:"$vuetify.contexts.record.splitBySlash",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","split-by-slash")}),10)}},{text:"$vuetify.contexts.record.owakati",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","owakati")}),10)}},{text:"$vuetify.contexts.record.oyomi",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","oyomi")}),10)}},{text:"$vuetify.contexts.record.opronunciation",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","opronunciation")}),10)}},{text:"$vuetify.contexts.record.obasic",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","obasic")}),10)}},{text:"$vuetify.contexts.record.opos",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","opos")}),10)}}]},{subheader:"$vuetify.contexts.frame.name",divider:!0},{text:"$vuetify.contexts.frame.edit",icon:"mdi-selection-drag",kbd:"CTRL + SHIFT + i",click:function(){setTimeout((function(){t.$emit("click-image-edit")}),10)},divider:!0}]}},methods:{onChange:function(){var t={click:this.clicked,files:this.$refs.input.files};this.$emit("click-upload",t)},incPxPerSec:function(){this.$minPxPerSec<700&&(this.$minPxPerSec=this.$minPxPerSec+50)},decPxPerSec:function(){this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50)}}},y=b,w=i("ce7e"),k=i("132d"),$=i("8860"),_=i("56b0"),S=i("da13"),C=i("1800"),T=i("5d23"),V=i("34c3"),R=i("2fa4"),I=i("e0c7"),j=i("71d9"),D=i("2a7f"),E=Object(u["a"])(y,n,r,!1,null,"69dd7df1",null);e["a"]=E.exports;f()(E,{VCard:m["a"],VDivider:w["a"],VIcon:k["a"],VList:$["a"],VListGroup:_["a"],VListItem:S["a"],VListItemAction:C["a"],VListItemActionText:T["a"],VListItemContent:T["b"],VListItemIcon:V["a"],VListItemTitle:T["d"],VSpacer:R["a"],VSubheader:I["a"],VToolbar:j["a"],VToolbarTitle:D["a"]})},"9de5":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:t.width},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("m-loading-card",{attrs:{color:t.color,"progress-color":t.progressColor}},[t._t("default")],2)],1)},r=[],a=(i("a9e3"),i("84c5")),o={name:"MLoadingDialog",components:{MLoadingCard:a["a"]},props:{value:{type:Boolean,default:!1},color:{type:String,default:"primary"},progressColor:{type:String,default:"white"},width:{type:Number,default:300}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1},open:function(){this.dialog=!0}}},s=o,c=i("2877"),l=i("6544"),u=i.n(l),d=i("169a"),f=Object(c["a"])(s,n,r,!1,null,"4a4aa042",null);e["a"]=f.exports;u()(f,{VDialog:d["a"]})},"9f3b":function(t,e,i){},a009:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{flat:"",tile:""}},[i("v-card-text",[t.dialog?i("m-tier-form",{ref:"form",attrs:{tiers:t.tiers,current:t.current},on:{validated:t.onValidated}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("ok")])],1)],1)],1)},r=[],a=(i("b0c0"),i("9621")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.nameRule,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("v-autocomplete",{attrs:{items:t.typeChoice,filter:t.autocomplete,"item-text":"name","item-value":"val",label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.type")},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),i("v-checkbox",{attrs:{label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.showRef")},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}}),t.checkbox?i("v-autocomplete",{attrs:{rules:t.refRule,items:t.tiers,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.ref")},model:{value:t.refName,callback:function(e){t.refName=e},expression:"refName"}}):t._e(),t.checkbox?i("v-checkbox",{attrs:{label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.withText")},model:{value:t.withText,callback:function(e){t.withText=e},expression:"withText"}}):t._e(),t.checkbox?i("v-checkbox",{attrs:{label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.asParent")},model:{value:t.asParent,callback:function(e){t.asParent=e},expression:"asParent"}}):t._e()],1)},s=[],c=(i("c975"),i("2ca0"),{name:"WTierFrom",data:function(){return{checkbox:!1,valid:!1,name:"",type:"",refName:"",withText:!1,asParent:!1}},props:{tiers:{type:Array},current:{type:String}},watch:{current:function(t,e){if(t!==e&&t){this.refName=t;var i=this.$store.state.current.textgrid[this.current];this.name="".concat(this.current,"-copy"),this.type=i.type,this.checkbox=!0,this.refName=this.current}}},computed:{typeChoice:function(){var t=this.$vuetify.lang.current;return[{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.interval"),rubi:"ja"==t?"kyoukaitenkisou":"interval tier",val:"interval"},{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.point"),rubi:"ja"==t?"eventtenkisou":"point tier",val:"point"}]},nameRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkName(e)}];return e},refRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkNameNotExist(e)}];return e},required:function(){var t=this;return this.$vuetify?[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")}]:[]}},methods:{autocomplete:function(t,e){var i=t.rubi.toLowerCase(),n=t.val.toLowerCase(),r=e.toLowerCase();return i.startsWith(r)||n.startsWith(r)},checkName:function(t){return t?!(this.tiers.indexOf(t)>-1)||this.$vuetify.lang.t("$vuetify.validations.alreadyExists"):this.$vuetify.lang.t("$vuetify.validations.required")},checkNameNotExist:function(t){return t?-1!=this.tiers.indexOf(t)||this.$vuetify.lang.t("$vuetify.validations.notExist"):this.$vuetify.lang.t("$vuetify.validations.required")},validate:function(){if(this.$refs.form.validate(),this.valid){var t={name:this.name,type:this.type};this.checkbox&&(t.ref=this.refName||null,t.withText=this.withText,t.parent=this.asParent?this.refName:null),this.$emit("validated",t)}},reset:function(){this.resetValidation()},resetValidation:function(){this.$refs.form.resetValidation()}},mounted:function(){if(this.current){var t=this.$store.state.current.textgrid[this.current];this.name="".concat(this.current,"-copy"),this.type=t.type,this.checkbox=!0,this.refName=this.current}}}),l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("c6a6"),h=i("ac7c"),v=i("4bd4"),p=i("8654"),g=Object(u["a"])(l,o,s,!1,null,"c4da4848",null),x=g.exports;f()(g,{VAutocomplete:m["a"],VCheckbox:h["a"],VForm:v["a"],VTextField:p["a"]});var b=i("27a3"),y={name:"m-tier-dialog",components:{MCardDialog:a["a"],MTierForm:x},mixins:[b["a"]],data:function(){return{title:"$vuetify.forms.tier.title"}},props:{value:{type:Boolean},current:{type:String},tiers:{type:Array}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){t.ref?this.copyTier(t.ref,t.name,t.type,t.parent,t.withText):this.addTier(t.name,t.type,t.parent),this.close()}}},w=y,k=i("8336"),$=i("b0af"),_=i("99d9"),S=i("2fa4"),C=Object(u["a"])(w,n,r,!1,null,"930259e0",null);e["a"]=C.exports;f()(C,{VBtn:k["a"],VCard:$["a"],VCardActions:_["a"],VCardText:_["c"],VSpacer:S["a"]})},a57c:function(t,e,i){"use strict";(function(t){i("99af"),i("ac1f"),i("841c"),i("1276"),i("498a");var n=i("ea1e"),r=i("ee5b"),a=i("21f0"),o=i("edc0");e["a"]={name:"m-file-point-table",components:{MVideoDialog:n["a"]},mixins:[r["a"]],data:function(){return{headers:[{text:"File Name",value:"fileName"},{text:"Tier Name",value:"tier"},{text:"Index",value:"index"},{text:"Time",value:"time"},{text:"Text",value:"text"},{text:"Actions",value:"actions"}],dialog:!1,src:"",start:0,end:0}},props:{items:{type:Array}},computed:{$keyword:function(){return this.$store.state.search.keyword}},methods:{playItem:function(t){this.src=t.src;var e=this.$playOffset*(1/t.fps),i=t.time-e,n=t.time+e;this.start=i>0?i:0,this.end=n<t.duration?n:t.duration,this.dialog=!0},trimItem:function(e){var i=this.$playOffset*(1/e.fps),n=e.src,r=e.fileName.split(".")[0],s=e.time-i,c=e.time+i,l=s>0?s:0,u=c<e.duration?c:e.duration,d=String(o["a"].round(l,3))+"-"+String(o["a"].round(u,3)),f="".concat(r,"-").concat(d,".mp4"),m=a["a"].file.toBuff(n),h=a["a"].video.trim(m,l,u),v=h.MEMFS[0],p=a["a"].video.toBlob(t(v.data));a["a"].file.download(p,f)},openItem:function(t){this.$router.push({path:"/files/".concat(t.fileId,"?start=").concat(t.time)})}}}}).call(this,i("1c35").Buffer)},ac99:function(t,e,i){"use strict";i("c975"),i("d81d"),i("b0c0"),i("a9e3"),i("b64b"),i("d3b7"),i("ac1f"),i("1276"),i("ddb0");var n=i("b85c"),r=(i("96cf"),i("1da1")),a=i("4dec"),o=i("a669"),s=i.n(o),c=i("21f0"),l=new a["default"]("mri_vuewer",{addons:[s.a]});l.version(1).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,meta,frames,textgrid"}),l.version(2).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,frames,textgrid"}),l.version(3).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,textgrid",frames:"++id, idx, time, fileId -> files.id",points:"++id, x, y, size, color, frameId -> frames.id",rects:"++id, x, y, width, height, rotation, scaleX, scaleY, size, color, frameId -> frames.id"}),l.version(4).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,textgrid",frames:"++id, idx, time, fileId -> files.id",points:"++id, x, y, size, color, label, frameId -> frames.id",rects:"++id, x, y, width, height, rotation, scaleX, scaleY, size, color, label, frameId -> frames.id"}),l.version(5).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,textgrid,lastModifiedAt",frames:"++id, idx, time, fileId -> files.id",points:"++id, x, y, size, color, label, frameId -> frames.id",rects:"++id, x, y, width, height, rotation, scaleX, scaleY, size, color, label, frameId -> frames.id"}).upgrade((function(t){var e=Date.now();return t.files.toCollection().modify((function(t){t.lastModifiedAt=e}))})),l.open();var u=function(){return new Promise((function(t,e){l.files.toArray().then((function(e){var i=JSON.stringify(e),n=new Blob([i],{type:"application/json"});c["a"].file.download(n,"corpora.json"),t(!0)})).catch((function(t){return e(t)}))}))},d=function(t){return new Promise((function(e,i){try{var n=JSON.parse(t);l.files.clear().then((function(){l.files.bulkPut(n).then((function(){l.files.toArray().then((function(t){e(t)})).catch((function(t){return i(t)}))})).catch((function(t){return i(t)}))})).catch((function(t){return i(t)}))}catch(r){i(r)}}))},f=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.files.get(Number(e));case 2:return i=t.sent,t.next=5,l.frames.where({fileId:i.id}).with({points:"points",rects:"rects"});case 5:return i.frames=t.sent,i.bname=i.name.split(".")[0],t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.map((function(t){var e=t.data,i=t.frameId;return{x:e.x,y:e.y,size:e.size,color:e.color,frameId:i}})),t.next=3,l.points.bulkPut(i);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.map((function(t){var e=t.data,i=t.frameId;return{x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,scaleX:e.scaleX,scaleY:e.scaleY,size:e.size,color:e.color,frameId:i}})),t.next=3,l.points.bulkPut(i);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,i){var r,a,o,s,c,u,d,f,v,p,g,x,b,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=[],!i.frames){t.next=17;break}a=[],o=[],s=0,c=Object(n["a"])(i.frames);try{for(c.s();!(u=c.n()).done;)d=u.value,d.idx&&d.time&&(i.points&&a.push({data:i.points,idx:s}),i.rects&&o.push({data:i.rects,idx:s}),r.push({idx:d.idx,time:d.time,fileId:e}),s++)}catch(w){c.e(w)}finally{c.f()}if(!(o.length>0||a.length>0)){t.next=15;break}return t.next=10,l.frames.where({fileId:e}).toArray();case 10:f=t.sent,v=a.map((function(t){return{data:t.data,frameId:f[t.idx].id}})),p=o.map((function(t){return{data:t.data,frameId:f[t.idx].id}})),m(v),h(p);case 15:t.next=22;break;case 17:g=0,x=0,b=Math.floor(i.duration*i.fps),y=1/i.fps;while(g<b)g++,x+=y,r.push({idx:g,time:x,fileId:e});case 22:return t.next=24,l.frames.bulkPut(r);case 24:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),p=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,n,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.lastModifiedAt=Date.now(),n=Object.keys(e),!e.name||!e.source){t.next=20;break}if(a=!1,-1===n.indexOf("fps")&&(a=!0),-1===n.indexOf("duration")&&(a=!0),-1===n.indexOf("originSize")&&(a=!0),-1===n.indexOf("videoStream")&&(a=!0),-1===n.indexOf("audioStream")&&(a=!0),!a){t.next=14;break}o=c["a"].file.toBuff(e.source),c["a"].video.info(o,function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={name:e.name,source:e.source,metaData:e.metaData||{},textgrid:e.textgrid||{},fps:n.videoStream.fps,duration:n.duration,originSize:n.size,videoStream:n.videoStream,audioStream:n.audioStream},t.next=3,l.files.put(r);case 3:i=t.sent,v(i,{frames:e.frames,fps:r.fps,duration:r.duration});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=20;break;case 14:return s={name:e.name,source:e.source,metaData:e.metaData||{},textgrid:e.textgrid||{},fps:e.fps,duration:e.duration,originSize:e.originSize,videoStream:e.videoStream,audioStream:e.audioStream},t.next=17,l.files.put(s);case 17:return i=t.sent,t.next=20,v(i,{frames:e.frames,fps:s.fps,duration:s.duration});case 20:return t.abrupt("return",i);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.frames.where({fileId:e}).toArray();case 2:i=t.sent,t.t0=regeneratorRuntime.keys(i);case 4:if((t.t1=t.t0()).done){t.next=20;break}return n=t.t1.value,t.next=8,l.points.where({frameId:n.id}).toArray();case 8:return r=t.sent,t.next=11,l.rects.where({frameId:n.id}).toArray();case 11:if(a=t.sent,!(r.length>0)){t.next=15;break}return t.next=15,l.points.bulkDelete(r.map((function(t){return t.id})));case 15:if(!(a.length>0)){t.next=18;break}return t.next=18,l.rects.bulkDelete(a.map((function(t){return t.id})));case 18:t.next=4;break;case 20:return t.next=22,l.frames.bulkDelete(i.map((function(t){return t.id})));case 22:return t.next=24,l.files.delete(e);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.files.where({name:e.name}).toArray();case 2:if(i=t.sent,!(i.length>0)){t.next=6;break}return t.next=6,g(i[0].id);case 6:return t.next=8,p(e);case 8:return n=t.sent,t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.files.toArray();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e["a"]={files:l.files,frames:l.frames,points:l.points,rects:l.rects,dump:u,load:d,get:f,gets:b,destory:g,put:x,add:p}},b39c:function(t,e,i){"use strict";(function(t){i("99af"),i("a623"),i("4de4"),i("c975"),i("a15b"),i("d81d"),i("a9e3"),i("b64b"),i("d3b7"),i("07ac"),i("ac1f"),i("6062"),i("3ca3"),i("841c"),i("1276"),i("498a"),i("ddb0");var n=i("b85c"),r=(i("96cf"),i("1da1")),a=i("2909"),o=i("ea1e"),s=i("21f0"),c=i("edc0");e["a"]={name:"m-file-interval-table",components:{MVideoDialog:o["a"]},data:function(){return{selected:[],headers:[{text:"File Name",value:"fileName"},{text:"Tier Name",value:"tier"},{text:"Index",value:"index"},{text:"Start Time",value:"start"},{text:"End Time",value:"end"},{text:"Text",value:"text"},{text:"Actions",value:"actions"}],dialog:!1,src:"",start:0,end:0}},props:{items:{type:Array}},computed:{query:function(){return{args:this.$store.getters["search/args"],kwargs:this.$store.getters["search/kwargs"],norargs:this.$store.getters["search/norargs"]}},$items:function(){if(this.items){var t=this.items,e=this.query.args,i=this.query.kwargs;return e.length&&(t=t.filter((function(t){var i=Object(a["a"])(new Set(Object.values(t.search))).join(" ");return e.map((function(t){return-1!==i.indexOf(t)})).every((function(t){return!0===t}))}))),Object.keys(i).length&&(t=t.filter((function(t){return Object.keys(i).map((function(e){return e in t.search&&t.search[e]==i[e]})).every((function(t){return!0===t}))}))),t}return[]}},methods:{playItem:function(t){this.src=t.src,this.start=Number(t.start),this.end=Number(t.end),this.dialog=!0},trimItem:function(e){var i=e.src,n=e.fileName.split(".")[0],r=e.start,a=e.end,o=String(c["a"].round(r,3))+"-"+String(c["a"].round(a,3)),l="".concat(n,"-").concat(o,".mp4"),u=s["a"].file.toBuff(i),d=s["a"].video.trim(u,r,a),f=d.MEMFS[0],m=s["a"].video.toBlob(t(f.data));s["a"].file.download(m,l)},openItem:function(t){this.$router.push({path:"/files/".concat(t.fileId,"?start=").concat(t.start)})},resynthesis:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,r,a,o,c,l,u,d,f,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],i=Object(n["a"])(this.selected),t.prev=2,i.s();case 4:if((r=i.n()).done){t.next=17;break}return a=r.value,o=s["a"].file.toBuff(a.src),c=s["a"].video.trim(o,a.start,a.end),l=c.MEMFS[0],u=new Blob([l.data],{type:"video/mp4"}),t.next=12,s["a"].file.toBase64(u);case 12:d=t.sent,f="".concat(a.fileName,"-").concat(a.start,"-").concat(a.end,".mp4"),e.push({name:f,base64:d});case 15:t.next=4;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](2),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:return t.next=27,s["a"].zip.toZip(e);case 27:m=t.sent,s["a"].file.download(m,"result.zip");case 29:case"end":return t.stop()}}),t,this,[[2,19,22,25]])})));function e(){return t.apply(this,arguments)}return e}()}}}).call(this,i("1c35").Buffer)},b606:function(t,e,i){"use strict";var n=i("ca7e"),r=i.n(n);r.a},b874:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{ref:"card",staticClass:"mx-auto",attrs:{color:"grey"}},[i("v-toolbar",{attrs:{dense:""}},[i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},t._l(t.modes,(function(e){return i("v-btn",{key:e.val,attrs:{value:e.val,text:""}},[i("v-icon",[t._v(t._s(e.icon))])],1)})),1),i("div",{staticClass:"mx-1"}),i("m-color-menu",{attrs:{icon:""},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),i("v-spacer"),i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"}},[i("v-btn",{attrs:{icon:""},on:{click:t.skipPrev}},[i("v-icon",[t._v("mdi-skip-previous")])],1),i("v-btn",{attrs:{icon:""},on:{click:t.skipNext}},[i("v-icon",[t._v("mdi-skip-next")])],1)],1),i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"}},[i("v-btn",{attrs:{text:""},on:{click:t.zoomOut}},[i("v-icon",[t._v("mdi-magnify-minus")])],1),i("v-btn",{attrs:{text:""},on:{click:t.zoomIn}},[i("v-icon",[t._v("mdi-magnify-plus")])],1)],1),i("v-btn",{attrs:{text:""},on:{click:t.threshold}},[t._v(" 二値化 ")]),i("v-btn",{attrs:{text:""},on:{click:t.downloadImage}},[t._v(" png "),i("v-icon",[t._v("mdi-download")])],1)],1),i("v-card",{staticClass:"overflow-y-auto",style:"max-height: "+t.canvasMaxHeight+"px",attrs:{flat:""}},[i("m-key-context",{ref:"context",on:{keyup:t.onKeyup}},[i("v-stage",{ref:"stage",attrs:{config:t.canvas},on:{mousemove:t.onStageMouseMove,mousedown:t.onStageMouseDown,touchstart:t.onStageMouseDown}},[i("v-layer",{ref:"layer"},[i("v-image",{ref:"background",attrs:{config:t.background},on:{dblclick:t.onDblClick}})],1),i("v-layer",{ref:"layer"},t._l(t.ruler.points,(function(e,n){return i("v-circle",{key:n,attrs:{config:{x:e.x,y:e.y,stroke:"white",strokeWidth:1,radius:t.ruler.conf.size,fill:t.ruler.conf.color}}})})),1),i("v-layer",{ref:"layer"},t._l(t.ruler.lines,(function(e,n){return i("v-line",{key:n,attrs:{config:{points:e.points,stroke:t.ruler.active==e.id?t.ruler.conf.activeColor:t.ruler.conf.color,strokeWidth:t.ruler.active==e.id?t.ruler.conf.activeSize:t.ruler.conf.size,lineCap:"round",lineJoin:"round",dash:[5,10]}},on:{mouseenter:t.onRulerMouseEnter,mouseleave:t.onRulerMouseLeave,click:t.onRulerClick}})})),1),i("v-layer",{ref:"layer"},[t._l(t.rects,(function(e){return i("v-rect",{key:e.name,attrs:{config:{name:e.name,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation||1,scaleX:e.scaleX||1,scaleY:e.scaleY||1,stroke:e.color,strokeWidth:e.size||1,opacity:e.opacity||1,draggable:"rect"==t.mode}},on:{click:t.onRectClick,dragstart:t.onRectDragStart,dragend:t.onRectDragEnd,transformend:t.onTransformEnd}})})),t._l(t.points,(function(e,n){return i("v-circle",{key:n,attrs:{config:{x:e.x,y:e.y,stroke:"white",strokeWidth:1,opacity:e.opacity||1,radius:e.size,fill:e.color,draggable:"circ"==t.mode}},on:{click:t.onPointClick,mouseenter:t.onPointMouseEnter,mouseleave:t.onPointMouseLeave,dragstart:t.onPointDragStart,dragend:t.onPointDragEnd}})})),"rect"==t.mode?i("v-transformer",{ref:"transformer"}):t._e()],2),t.cursor.show?i("v-layer",{ref:"layer"},[i("v-line",{attrs:{config:{points:[this.cursor.x||0,0,this.cursor.x||0,this.canvas.height],stroke:t.cursor.color,strokeWidth:1,lineCap:"round",lineJoin:"round",dash:[2,5]}}}),i("v-line",{attrs:{config:{points:[0,this.cursor.y||0,this.canvas.width,this.cursor.y||0],stroke:t.cursor.color,strokeWidth:1,lineCap:"round",lineJoin:"round",dash:[2,5]}}})],1):t._e()],1)],1)],1),i("v-tabs",{attrs:{"fixed-tabs":"","background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab",[t._v(" Points ")]),i("v-tab",[t._v(" Rects ")])],1),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",[i("m-point-table",{attrs:{points:t.points,"origin-size":t.originSize,"canvas-size":t.canvas},on:{"update-point":t.onUpdatePoint}})],1),i("v-tab-item",[i("m-rect-table",{attrs:{rects:t.rects,"origin-size":t.originSize,"canvas-size":t.canvas},on:{"update-rect":t.onUpdateRect}})],1)],1)],1)},r=[],a=(i("99af"),i("7db0"),i("c740"),i("d81d"),i("a434"),i("b0c0"),i("ac1f"),i("1276"),i("b85c")),o=(i("96cf"),i("1da1")),s=i("27a3"),c=i("b8b8"),l=i("f4a9"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{headers:t.headers,items:t.rects},scopedSlots:t._u([{key:"item.label",fn:function(e){return[i("v-edit-dialog",{attrs:{"return-value":e.item.label},on:{"update:returnValue":function(i){return t.$set(e.item,"label",i)},"update:return-value":function(i){return t.$set(e.item,"label",i)},close:function(i){return t.close(e.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[i("v-text-field",{attrs:{rules:[t.max25chars],label:"Edit","single-line":"",counter:""},model:{value:e.item.label,callback:function(i){t.$set(e.item,"label",i)},expression:"props.item.label"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.item.label)+" ")])]}},{key:"item.x",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.x/t.cw*t.ow))+" ")]}},{key:"item.y",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.y/t.ch*t.oh))+" ")]}},{key:"item.width",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.width/t.cw*t.ow)+" ")])]}},{key:"item.height",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.height/t.ch*t.oh)+" ")])]}},{key:"item.rotation",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.rotation)+" ")])]}},{key:"item.scaleX",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.scaleX)+" ")])]}},{key:"item.scaleY",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.scaleY)+" ")])]}},{key:"item.color",fn:function(e){return[i("m-color-menu",{attrs:{icon:""},on:{input:function(i){return t.close(e.item)}},model:{value:e.item.color,callback:function(i){t.$set(e.item,"color",i)},expression:"props.item.color"}})]}}])})},d=[],f={name:"m-rect-table",components:{MColorMenu:c["a"]},props:{rects:{type:Array},originSize:{type:Object},canvasSize:{type:Object}},computed:{ow:function(){return this.originSize.width?this.originSize.width:0},oh:function(){return this.originSize.height?this.originSize.height:0},cw:function(){return this.canvasSize.width?this.canvasSize.width:0},ch:function(){return this.canvasSize.height?this.canvasSize.width:0}},data:function(){return{max25chars:function(t){return t.length<=25||"Input too long!"},pagination:{},headers:[{text:"label",value:"label"},{text:"x",value:"x"},{text:"y",value:"y"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"rotation",value:"rotation"},{text:"scale (x)",value:"scaleX"},{text:"scale (y)",value:"scaleY"},{text:"color",value:"color"}]}},methods:{close:function(t){this.$emit("update-rect",t)}}},m=f,h=i("2877"),v=i("6544"),p=i.n(v),g=i("8fea"),x=i("7679"),b=i("8654"),y=Object(h["a"])(m,u,d,!1,null,"327a5769",null),w=y.exports;p()(y,{VDataTable:g["a"],VEditDialog:x["a"],VTextField:b["a"]});var k=i("6b13"),$=i("ac99"),_={name:"m-frame-editor",mixins:[s["a"]],components:{MKeyContext:k["a"],MColorMenu:c["a"],MPointTable:l["a"],MRectTable:w},props:{originSize:{type:Object}},computed:{src:{get:function(){return this.$store.state.current.frame.src},set:function(t){this.$store.commit("current/frame/src",t)}},id:function(){return this.$store.state.current.frame.id},idx:function(){return this.$store.state.current.frame.idx},modes:function(){return[{val:"circ",icon:"mdi-shape-circle-plus"},{val:"rect",icon:"mdi-shape-rectangle-plus"},{val:"ruler",icon:"mdi-ruler-square"},{val:"eras",icon:"mdi-eraser"}]}},data:function(){return{color:"#F44336",size:5,mode:"circ",scale:0,canvasMaxHeight:600,background:{image:null},ruler:{active:null,conf:{size:3,color:"#607D8B",activeSize:5,activeColor:"#FFC107"},points:[],lines:[]},points:[],rects:[],selectedShapeName:"",canvas:{width:600,height:600},cursor:{x:null,y:null,show:!1,color:"#00B8D4"},tab:null}},methods:{focus:function(){this.$refs.context.focus()},blur:function(){this.$refs.context.blur()},zoomIn:function(){this.scale<0&&(this.scale=0);var t=this.$refs.card.$el.clientWidth||500,e=t+100*this.scale;e<1e3&&(this.scale=this.scale+.5,this.loadImage(this.src))},zoomOut:function(){this.scale>0&&(this.scale=0);var t=this.$refs.card.$el.clientWidth||500,e=t+100*this.scale;e>300&&(this.scale=this.scale-.5,this.loadImage(this.src))},skipNext:function(){this.skipForward(),this.$emit("skip")},skipPrev:function(){this.skipBackward(),this.$emit("skip")},loadImage:function(t){var e=this,i=new Image;i.src=t,i.onload=function(){e.onResize(),e.background.image=i,e.syncPoints(),e.syncRects(),e.focus()}},copyImage:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$refs.stage.getStage(),i=e.toDataURL(),n=this.$vuewer.io.file.toBlob(i),t.next=5,navigator.clipboard.write([new ClipboardItem({"image/png":n})]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downloadImage:function(){var t=this.$store.state.current.video.filename.split(".")[0],e="".concat(t,"-f").concat(this.idx,".png"),i=this.$refs.stage.getStage(),n=i.toDataURL(),r=document.createElement("a");r.href=n,r.download=e,r.click()},threshold:function(){var t=this;this.$vuewer.image.adaptiveThreshold(this.src,this.originSize).then((function(e){return t.src=e}))},syncPoints:function(){this.points=[];var t=this.$store.state.current.frame.points;if(t.length){var e,i=this.canvas.width,n=this.originSize.width,r=this.canvas.height,o=this.originSize.height,s=Object(a["a"])(t||[]);try{for(s.s();!(e=s.n()).done;){var c=e.value;this.points.push({id:c.id||t.length+1,label:c.label||"point-".concat(c.id),x:c.x*i/n,y:c.y*r/o,size:c.size,color:c.color})}}catch(l){s.e(l)}finally{s.f()}}},syncRects:function(){this.rects=[];var t=this.$store.state.current.frame.rects;if(t.length){var e,i=this.canvas.width,n=this.originSize.width,r=this.canvas.height,o=this.originSize.height,s=Object(a["a"])(t||[]);try{for(s.s();!(e=s.n()).done;){var c=e.value;this.rects.push({id:c.id||t.length,name:"rect-".concat(c.id||t.length),label:c.label||"rect-".concat(c.id),x:c.x*i/n,y:c.y*r/o,width:c.width*i/n,height:c.height*r/o,rotation:c.rotation||1,scaleX:c.scaleX||1,scaleY:c.scaleY||1,size:c.size,color:c.color})}}catch(l){s.e(l)}finally{s.f()}}},emitUpdatePoints:function(){var t=this,e=this.originSize.width,i=this.originSize.width,n=this.canvas.width,r=this.canvas.height;setTimeout((function(){var a=t.points.map((function(t){return{id:t.id,label:t.label,x:t.x/n*e,y:t.y/r*i,size:t.size,color:t.color}}));t.$emit("points-updated",a)}),1)},emitUpdateRects:function(){var t=this,e=this.originSize.width,i=this.originSize.width,n=this.canvas.width,r=this.canvas.height;setTimeout((function(){var a=t.rects.map((function(t){return{id:t.id,label:t.label,x:t.x/n*e,y:t.y/r*i,width:t.width/n*e,height:t.height/r*i,rotation:t.rotation||1,scaleX:t.scaleX||1,scaleY:t.scaleY||1,size:t.size,color:t.color}}));t.$emit("rects-updated",a)}),1)},addRulerPoint:function(t,e){var i=this.ruler.points.length+1,n="ruler-point-".concat(i);this.ruler.points.push({id:i,label:n,x:t,y:e}),i%2==0&&this.addRulerLine(i)},addRulerLine:function(t){var e=this.ruler.points.findIndex((function(e){return e.id==t})),i=this.ruler.points[e-1],n=this.ruler.points[e],r=(n.y-i.y)/(n.x-i.x),a=i.y-r*i.x,o={x:0,y:a},s={x:this.canvas.width,y:this.canvas.width*r+a},c=[o.x,o.y,s.x,s.y],l=this.ruler.lines.length;this.ruler.lines.push({id:l,points:c,t:r,i:a})},addPoint:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i,n,r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={id:this.points.length+1,label:"point-".concat(this.points.length+1),x:e,y:i,size:r,color:n},!this.id){t.next=7;break}return t.next=4,$["a"].points.count();case 4:o=t.sent,a.id=o+1,a.label="points-".concat(o+1);case 7:this.points.push(a),this.emitUpdatePoints();case 9:case"end":return t.stop()}}),t,this)})));function e(e,i,n,r){return t.apply(this,arguments)}return e}(),addRect:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i,n,r,a,o,s){var c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c={id:this.rects.length+1,name:"rect-".concat(this.rects.length+1),label:"rect-".concat(this.rects.length+1),x:e,y:i,width:n,height:r,rotation:a,size:s,color:o},!this.id){t.next=8;break}return t.next=4,$["a"].rects.count();case 4:l=t.sent,c.id=l+1,c.name="rect-".concat(l+1),c.label="rect-".concat(l+1);case 8:this.rects.push(c),this.emitUpdateRects();case 10:case"end":return t.stop()}}),t,this)})));function e(e,i,n,r,a,o,s){return t.apply(this,arguments)}return e}(),onResize:function(){var t=this.$refs.card.$el.clientWidth||500,e=this.originSize.height*t/this.originSize.width,i=t+100*this.scale,n=e+100*this.scale;this.canvas.width=i,this.canvas.height=n,this.background.height=i,this.background.width=n,this.canvasMaxHeight=e-128},onKeyup:function(t){var e=this;console.log("FrameEditor:onKeyup",t);var i=this.$vuewer.key.summary(t),n=i.key,r=i.xKey;if("tab"==n&&"default"==r){var a=this.modes.findIndex((function(t){return t.val==e.mode}));a+1==this.modes.length?this.mode=this.modes[0].val:this.mode=this.modes[a+1].val}else"c"==n&&"ctrl"==r?this.copyImage():"s"==n&&"ctrl"==r?this.downloadImage():"i"==n&&"default"==r?this.cursor.show=!0:"["==n&&"ctrl"==r||"Escape"==n&&"default"==r?this.cursor.show=!1:"j"==n&&"default"==r?this.cursor.show&&(this.cursor.x=this.cursor.x-this.canvas.width/100):"j"==n&&"ctrl"==r?this.cursor.show&&(this.cursor.y=this.cursor.y-this.canvas.height/100):"k"==n&&"default"==r?this.cursor.show&&(this.cursor.x=this.cursor.x+this.canvas.width/100):"k"==n&&"ctrl"==r?this.cursor.show&&(this.cursor.y=this.cursor.y+this.canvas.height/100):" "==n&&"default"==r?this.cursor.show&&this.onDblClick():this.$emit("keyup",t)},onDblClick:function(){if("circ"==this.mode)this.addPoint(this.cursor.x,this.cursor.y,this.color,this.size);else if("rect"==this.mode){var t=this.canvas.width/5,e=this.canvas.height/5,i=this.cursor.x-t/2,n=this.cursor.y-e/2;this.addRect(i,n,t,e,0,this.color,this.size)}else"ruler"==this.mode&&this.addRulerPoint(this.cursor.x,this.cursor.y)},onRulerClick:function(t){var e=t.target.index,i=this.ruler.lines[0];if("eras"==this.mode){var n=this.ruler.points.findIndex((function(t){return t.x==i.points[0]})),r=this.ruler.points.findIndex((function(t){return t.x==i.points[2]}));this.ruler.points.splice(n,1),this.ruler.points.splice(r,1),this.ruler.lines.splice(e,1)}else if("rect"==this.mode){var a=this.canvas.width/5,o=this.canvas.height/5,s=t.evt.offsetX,c=t.evt.offsetY,l=180*i.t/Math.PI;console.log(180*l,Math.PI),this.addRect(s,c,a,o,l,this.color,this.size)}else this.addPoint(t.evt.offsetX,t.evt.offsetY,this.color,this.size)},onRulerMouseEnter:function(t){var e=t.target.index;this.ruler.active=this.ruler.lines[e].id},onRulerMouseLeave:function(){this.ruler.active=null},onPointClick:function(t){if("eras"==this.mode){var e=t.target.index;this.$emit("point-deleted",this.points[e]),this.points.splice(e,1)}},onPointMouseEnter:function(t){var e=t.target.index;"eras"!=this.mode&&"circ"!=this.mode||(this.points[e].size=this.size+2)},onPointMouseLeave:function(t){var e=t.target.index;"eras"!=this.mode&&"circ"!=this.mode||(this.points[e].size=this.size)},onPointDragStart:function(t){var e=t.target.index;this.points[e].size=this.size+2,this.points[e].opacity=.5},onPointDragEnd:function(t){var e=t.target.index;this.points[e].x=t.target.x(),this.points[e].y=t.target.y(),this.points[e].opacity=1,this.points[e].size=this.size,this.emitUpdatePoints()},onUpdatePoint:function(t){var e=this.points.findIndex((function(e){return e.id==t.id}));this.points[e].label=t.label,this.points[e].color=t.color,this.emitUpdatePoints()},onRectClick:function(t){if("circ"==this.mode)this.addPoint(t.evt.offsetX,t.evt.offsetY,this.color,this.size);else if("eras"==this.mode){var e=t.target.index;this.$emit("rect-deleted",this.rects[e]),this.rects.splice(e,1)}},onRectDragStart:function(t){var e=t.target.index;this.rects[e].opacity=.5},onRectDragEnd:function(t){var e=t.target.index;this.rects[e].x=t.target.x(),this.rects[e].y=t.target.y(),this.rects[e].opacity=1,this.emitUpdateRects()},onUpdateRect:function(t){var e=this.rects.findIndex((function(e){return e.id==t.id}));this.rects[e].label=t.label,this.rects[e].color=t.color,this.emitUpdateRects()},onStageMouseMove:function(){var t=this.$refs.stage.getNode().getPointerPosition();this.cursor.x=t.x,this.cursor.y=t.y},onStageMouseDown:function(t){if(t.target===t.target.getStage())return this.selectedShapeName="",void this.updateTransformer();var e="Transformer"===t.target.getParent().className;if(!e){var i=t.target.name(),n=this.rects.find((function(t){return t.name===i}));this.selectedShapeName=n?i:"",this.updateTransformer()}},onTransformEnd:function(t){var e=this,i=this.rects.findIndex((function(t){return t.name==e.selectedShapeName}));-1!==i&&(this.rects[i].rotation=t.target.rotation(),console.log(t.target.rotation()),this.rects[i].width=t.target.width(),this.rects[i].scaleX=t.target.scaleX(),this.rects[i].height=t.target.height(),this.rects[i].scaleY=t.target.scaleY(),this.emitUpdateRects())},updateTransformer:function(){if("rect"==this.mode){var t=this.$refs.transformer.getNode(),e=t.getStage(),i=this.selectedShapeName,n=e.findOne("."+i);if(n===t.node())return;n?t.nodes([n]):t.nodes([]),t.getLayer().batchDraw()}},close:function(){this.scale=0}},watch:{mode:function(t){void 0==t&&(this.mode=0)},src:function(t){t&&(this.scale=0,this.loadImage(t))}},mounted:function(){this.scale=0,this.loadImage(this.src)}},S=_,C=i("8336"),T=i("a609"),V=i("b0af"),R=i("132d"),I=i("2fa4"),j=i("71a3"),D=i("c671"),E=i("fe57"),M=i("aac8"),O=i("71d9"),L=Object(h["a"])(S,n,r,!1,null,"1222706c",null);e["a"]=L.exports;p()(L,{VBtn:C["a"],VBtnToggle:T["a"],VCard:V["a"],VIcon:R["a"],VSpacer:I["a"],VTab:j["a"],VTabItem:D["a"],VTabs:E["a"],VTabsItems:M["a"],VToolbar:O["a"]})},b8b8:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("div",[0==t.icon?i("v-btn",t._g(t._b({attrs:{text:t.text,color:t.picker,dark:""}},"v-btn",r,!1),n),[t._v(" color "),i("v-icon",[t._v("mdi-palette")])],1):i("v-btn",t._g(t._b({attrs:{dark:"",icon:"",color:t.picker}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-palette")])],1)],1)]}}])},[i("v-color-picker",{attrs:{flat:"","show-swatches":""},model:{value:t.picker,callback:function(e){t.picker=e},expression:"picker"}})],1)},r=[],a={name:"m-color-menu",props:{value:{type:String},text:{type:Boolean,default:!1},icon:{type:Boolean,default:!1}},computed:{picker:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},o=a,s=i("2877"),c=i("6544"),l=i.n(c),u=i("8336"),d=i("03a4"),f=i("132d"),m=i("e449"),h=Object(s["a"])(o,n,r,!1,null,"d4ce9042",null);e["a"]=h.exports;l()(h,{VBtn:u["a"],VColorPicker:d["a"],VIcon:f["a"],VMenu:m["a"]})},c437:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-video-array-layout",{scopedSlots:t._u([{key:"prev",fn:function(){return[i("m-video",{ref:"prev",style:t.videoStyle,attrs:{muted:"",flat:"","origin-size":t.originSize,src:t.src,frames:t.frames},on:{keyup:function(e){return t.onKeyup("prev",e)},mouseover:function(e){return t.$emit("mouseover")}}})]},proxy:!0},{key:"next",fn:function(){return[i("m-video",{ref:"next",style:t.videoStyle,attrs:{flat:"",muted:"",src:t.src,"origin-size":t.originSize,frames:t.frames},on:{keyup:function(e){return t.onKeyup("prev",e)},mouseover:function(e){return t.$emit("mouseover")}}})]},proxy:!0}])},[i("m-video",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],ref:"video",style:t.videoStyle,attrs:{flat:"","origin-size":t.originSize,src:t.src,frames:t.frames},on:{loadeddata:t.onLoadeddata,timeupdate:t.onTimeupdate,"frame-updated":t.onFrameUpdated,keyup:function(e){return t.onKeyup("prev",e)},mouseover:function(e){return t.$emit("mouseover")}}})],1)},r=[],a=(i("a9e3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"py-0 transparent",attrs:{fluid:""}},[i("v-row",[i("v-col",{staticClass:"pa-0"},[i("v-card",{staticClass:"mb-0",attrs:{tile:"",flat:"",color:"transparent"}},[t._t("prev")],2)],1),i("v-col",{staticClass:"pa-0"},[i("v-card",{attrs:{tile:"",flat:"",color:"transparent"}},[t._t("default")],2)],1),i("v-col",{staticClass:"pa-0"},[i("v-card",{attrs:{tile:"",flat:"",color:"transparent"}},[t._t("next")],2)],1)],1)],1)}),o=[],s={name:"m-video-array-layout"},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("b0af"),m=i("62ad"),h=i("a523"),v=i("0fd9"),p=Object(l["a"])(c,a,o,!1,null,"551b88be",null),g=p.exports;d()(p,{VCard:f["a"],VCol:m["a"],VContainer:h["a"],VRow:v["a"]});var x=i("89a7"),b={name:"WVideo",components:{MVideoArrayLayout:g,MVideo:x["a"]},props:{src:{type:String,required:!0},frames:{type:Array,default:function(){return[]}},fps:{type:Number,required:!0},originSize:{type:Object,required:!0},frameOffset:{type:Number,default:1}},data:function(){return{el:null,systemBarClass:"caption text-truncate",videoStyle:{width:"100%",height:"auto"}}},computed:{frameRate:function(){return 1/this.fps}},methods:{t:function(t){return this.$vuetify.lang.t("$vuetify.wVideo.".concat(t))},focus:function(){this.$refs.video.focus()},setPlaybackRate:function(t){this.$refs.video.setPlaybackRate(t)},syncVideos:function(t){if(this.$refs.video){var e=this.frameOffset*this.frameRate;if(t-e>0){var i=t-e;this.$refs.prev.setCurrentTime(i)}if(e+t<this.getDuration()){var n=t+e;this.$refs.next.setCurrentTime(n)}}},onFrameUpdated:function(t){var e=this.$refs.video;if(e){var i=e.getVideoDataURL();t&&(t.src=i,this.$store.dispatch("current/frame/frame",t),this.$emit("frame-updated",t))}},getDuration:function(){if(this.$refs.video)return this.$refs.video.getDuration()},getCurrentTime:function(){if(this.$refs.video)return this.$refs.video.getCurrentTime()},onKeyup:function(t,e){var i={ref:t,event:e};this.$emit("keyup",i)},onLoadeddata:function(t){this.$refs.video.setCurrentTime(0),this.$emit("loadeddata",t)},onTimeupdate:function(t){this.$emit("timeupdate",t),this.syncVideos(t)},onResize:function(){this.$emit("resize")},downloadImage:function(){this.$refs.video.downloadImage()}}},y=b,w=i("269a"),k=i.n(w),$=i("dc22"),_=Object(l["a"])(y,n,r,!1,null,null,null);e["a"]=_.exports;k()(_,{Resize:$["a"]})},ca7e:function(t,e,i){},d1eb:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"error",title:t.$vuetify.lang.t(t.title),fullscreen:t.$store.state.current.layout.mini},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[t.dialog?i("m-tier-delete-form",{ref:"form",attrs:{tiers:t.tiers,current:t.current},on:{validated:t.onValidated}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("ok")])],1)],1)],1)},r=[],a=i("b85c"),o=i("9621"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-autocomplete",{attrs:{rules:t.nameRule,items:t.tiers||[],label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name"),multiple:""},model:{value:t.names,callback:function(e){t.names=e},expression:"names"}})],1)},c=[],l=(i("c740"),i("c975"),{name:"WTierDeleteFrom",data:function(){return{valid:!1,names:[]}},props:{tiers:{type:Array},current:{type:String}},computed:{nameRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkName(e)}];return e}},methods:{checkName:function(t){if(t){var e,i=Object(a["a"])(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(-1==this.tiers.indexOf(n))return this.$vuetify.lang.t("$vuetify.validations.notExist")}}catch(r){i.e(r)}finally{i.f()}return!0}return this.$vuetify.lang.t("$vuetify.validations.required")},validate:function(){if(this.$refs.form.validate(),this.valid){var t={names:this.names};this.$emit("validated",t)}},reset:function(){this.resetValidation()},resetValidation:function(){this.$refs.form.resetValidation()}},watch:{current:function(t,e){t!=e&&t&&-1==this.names.findIndex((function(e){return e==t}))&&this.names.push(t)}},mounted:function(){this.current&&this.names.push(this.current)}}),u=l,d=i("2877"),f=i("6544"),m=i.n(f),h=i("c6a6"),v=i("4bd4"),p=Object(d["a"])(u,s,c,!1,null,"4ba8474a",null),g=p.exports;m()(p,{VAutocomplete:h["a"],VForm:v["a"]});var x=i("27a3"),b={name:"m-tier-delete-dialog",components:{MCardDialog:o["a"],MTierDeleteForm:g},mixins:[x["a"]],data:function(){return{title:"$vuetify.forms.tierDelete.title"}},props:{value:{type:Boolean},current:{type:String},tiers:{type:Array}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){var e,i=t.names,n=Object(a["a"])(i);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.deleteTier(r)}}catch(o){n.e(o)}finally{n.f()}this.close()}}},y=b,w=i("8336"),k=i("b0af"),$=i("99d9"),_=i("2fa4"),S=Object(d["a"])(y,n,r,!1,null,"74ae6452",null);e["a"]=S.exports;m()(S,{VBtn:w["a"],VCard:k["a"],VCardActions:$["a"],VCardText:$["c"],VSpacer:_["a"]})},d623:function(t,e,i){"use strict";i("99af");for(var n="mri-vuewer",r=["wavesurfer","snackbar","metadata","dropbox"],a=function(t,e){var i="".concat(n,"-").concat(t,"-").concat(e),r=localStorage.getItem(i);return"true"==r||"false"!=r&&r},o=function(t,e,i){var r="".concat(n,"-").concat(t,"-").concat(e);localStorage.setItem(r,i)},s={},c=function(){var t=u[l];s[t]={get:function(e){var i=t;return a(i,e)},set:function(e,i){var n=t;o(n,e,i)}}},l=0,u=r;l<u.length;l++)c();e["a"]=s},da38:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",titleColor:"warning darken-1",fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title),"max-width":t.maxWidth},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("span",[t._v(" "+t._s(t.header)+" ")]),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("m-frame-editor",{ref:"editor",attrs:{"origin-size":t.originSize},on:{skip:t.onSkip,"update-max-width":t.onUpdateMaxWidth,"rects-updated":function(e){return t.$emit("rects-updated",e)},"points-updated":function(e){return t.$emit("points-updated",e)},"rect-deleted":function(e){return t.$emit("rect-deleted",e)},"point-deleted":function(e){return t.$emit("point-deleted",e)}}})],1)},r=[],a=(i("99af"),i("9621")),o=i("b874"),s={name:"m-image-edit-dialog",components:{MCardDialog:a["a"],MFrameEditor:o["a"]},props:{value:{type:Boolean,required:!0},originSize:{type:Object,required:!0}},data:function(){return{maxWidth:"700"}},methods:{onUpdateMaxWidth:function(t){this.maxWidth!=t&&(this.maxWidth=t)},onSkip:function(){this.maxWidth="700"},close:function(){this.$refs.editor.close(),this.maxWidth="700",this.dialog=!1}},computed:{title:function(){return"$vuetify.forms.imageEdit.title"},header:function(){var t=this.$store.state.current.frame.time,e=this.$store.state.current.frame.id;return e?"FRAME: ".concat(e,": ").concat(this.$vuewer.math.round(t,3)," sec"):"".concat(this.$vuewer.math.round(t,3)," sec")},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("8336"),m=i("132d"),h=Object(l["a"])(c,n,r,!1,null,"40cc8bc5",null);e["a"]=h.exports;d()(h,{VBtn:f["a"],VIcon:m["a"]})},e770:function(t,e,i){"use strict";(function(t){i("99af"),i("7db0"),i("c740"),i("c975"),i("a15b"),i("a434"),i("a9e3"),i("b64b"),i("d3b7"),i("ac1f"),i("1276"),i("498a"),i("ddb0"),i("96cf");var n=i("1da1"),r=i("1037"),a=i.n(r),o=i("612b"),s=i("c437"),c=i("3aaa"),l=i("edbd"),u=i("4a48"),d=i("99cd"),f=i("548c"),m=i("a009"),h=i("2a04"),v=i("d1eb"),p=i("8c19"),g=i("da38"),x=i("209a"),b=i("7bfa"),y=i("3377"),w=i("70f3"),k=i("ee5b");e["a"]={name:"WVuwer",mixins:[k["a"]],components:{MVuwerLayout:o["a"],MVideoArray:s["a"],MTextGrid:c["a"],WaveSurfer:a.a,MWContextMenu:d["a"],MSpeedDial:w["a"],MComplatesDialog:y["a"],MDetailDialog:f["a"],MImageEditDialog:g["a"],MRulerDialog:p["a"],MSettingDialog:x["a"],MTextgridDialog:b["a"],MTierDeleteDialog:v["a"],MTierDialog:m["a"],MTierEditDialog:h["a"],MRecordTextField:u["a"],MVuwerActions:l["a"]},props:{src:{type:String,required:!0},fps:{type:Number,required:!0},originSize:{type:Object,required:!0},textgrid:{type:Object,default:function(){return{}}},frames:{type:Array,default:function(){return[]}},frameOffset:{type:Number,default:1}},data:function(){return{tag:"WVuwer",videoElm:null,videoHeight:null,isLoading:!1,isSyncing:!1,lazyRular:!1,lazyImageEdit:!1,lazyFocusTextField:!1,minPxPerSec:100,drawingContextAttributes:{desynchronized:!1},fab:!1,where:null,dialog:{detail:{show:!1},textgrid:{show:!1},tier:{show:!1},tierEdit:{show:!1},tierDelete:{show:!1},ruler:{show:!1},imageEdit:{show:!1},setting:{show:!1},complates:{show:!1}},keybuffer:{time:null,keycode:null,key:null,xKey:null,from:null},current:{tier:{key:null,values:[],record:{idx:0,text:"",time:0}},frame:{idx:null,time:null,src:null,points:[],rects:[],texts:[]}},tiers:[]}},computed:{wavesurfer:{get:function(){return this.$store.state.current.wavesurfer},set:function(t){this.$store.commit("current/waveSurfer",t)}},$textgrid:{get:function(){return this.$store.state.current.textgrid},set:function(t){this.$store.commit("current/textGrid",t),this.$store.dispatch("current/cache/setTextgrid",t)}},$frameIdx:function(){return this.$store.state.current.frame.idx},$frames:{get:function(){return this.$store.state.current.frames},set:function(t){this.$store.commit("current/frames",t)}},frameRate:function(){return 1/this.fps},skipLength:function(){return this.frameOffset*this.frameRate},showTextField:function(){return!(!this.videoElm||!this.$textgrid||this.isLoading)&&Object.keys(this.$textgrid).length>0}},watch:{$textgrid:{handler:function(t,e){if(t&&t!=e)for(var i in this.tiers=[],t)this.tiers.push(i)},deep:!0},$minPxPerSec:function(t){t>100&t<700&&t%50==0&&this.wavesurfer.zoom(t)},"dialog.imageEdit.show":function(t){0==t&&this.$refs.videoArray.focus()}},methods:{rebaseTextgrid:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.$store.getters["current/cache/textgrids"](t);null!==e&&this.wavesurfer.setTextGrid(e)},playPause:function(){var t=this.current.tier.key||null,e=this.current.tier.record.idx||null,i=this.current.tier.record.time||null,n=this.wavesurfer.getCurrentTime();t&&e&&i>n?this.playRecord(t,e):this.wavesurfer.playPause()},addRecord:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n={time:e,text:i};this.wavesurfer.addTierValue(t,n),this.isSyncing||this.$vuewer.console.log(this.tag,"add a record (key: ".concat(t,", time: ").concat(e,")"))},deleteRecord:function(t,e){if(e>-1){var i=this.$textgrid[t].type,n=this.$textgrid[t].values.length;("interval"!=i||n>1)&&(this.wavesurfer.deleteTierValue(t,e),this.isSyncing||this.$vuewer.console.log(this.tag,"delete a record (key: ".concat(t," idx: ").concat(e,")")))}},updateRecordText:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this.$textgrid[t].values[e].time,r={time:n,text:i};this.wavesurfer.setTierValue(t,e,r)},deleteRecordText:function(t,e){var i=this.$textgrid[t].values[e];i.text?(this.copyRecord(t,e),i.text="",this.wavesurfer.setTierValue(t,e,i),this.current.tier.record.text=null):this.deleteRecord(t,e)},playRecord:function(t,e){if(this.wavesurfer.isPlaying())this.wavesurfer.pause();else{var i=this.$textgrid[t].values[e];if("interval"==this.$textgrid[t].type)if(e>0){var n=this.$textgrid[t].values[e-1];i.time&&n.time&&this.wavesurfer.play(n.time,i.time)}else this.wavesurfer.play(0,i.time);else{var r=this.wavesurfer.getDuration(),a=this.$playOffset*this.frameRate,o=i.time-a>0?i.time-a:0,s=i.time+a<r?i.time+a:r;this.wavesurfer.play(o,s)}}},copyRecord:function(t,e){var i=this.$textgrid[t].values[e];navigator.clipboard?navigator.clipboard.writeText(i.text):this.showBrowserError()},copyRecords:function(t){if(navigator.clipboard){var e=this.$textgrid[t],i=e.values,n={"x-special":"vuewer:tier",type:e.type,parent:null,key:t,values:i},r=JSON.stringify(n);navigator.clipboard.writeText(r)}else this.showBrowserError()},paste:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!navigator.clipboard){e.next=5;break}return e.next=3,navigator.clipboard.readText();case 3:i=e.sent;try{n=JSON.parse(i),"vuewer:tier"==n["x-special"]&&(r=t.$textgrid,r["".concat(n.key,"-copy")]={type:n.type,parent:n.parent,values:n.values},t.wavesurfer.setTextGrid(r),a=Object.keys(t.$textgrid),t.focusRecord(a[a.length-1]))}catch(o){t.pasteRecord(t.current.key,t.current.tier.record.idx)}case 5:case"end":return e.stop()}}),e)})))()},pasteRecord:function(t,e){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=i.$textgrid[t].values[e],a=r.time,n.next=4,navigator.clipboard.readText();case 4:o=n.sent,s={time:a,text:o},i.wavesurfer.setTierValue(t,e,s),i.current.tier.record.text=o,i.isSyncing||(c="update text a record (key: ".concat(t," idx: ").concat(e,")"),i.$vuewer.console.log(i.tag,c));case 9:case"end":return n.stop()}}),n)})))()},focusRecord:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.wavesurfer.wavesurfer.textgrid,i=this.wavesurfer.getCurrentTime(),n=null!==t?t:this.current.key||Object.keys(this.$textgrid)[0];if(n){var r=this.$textgrid[n].values;if(r){var a=r.sort((function(t,e){return t.time>e.time})).find((function(t){return t.time>i}));e.setCurrent(t,a),e.tiers[t].canvas.focus()}}},nextRecord:function(t,e,i){if(e+1<this.$textgrid[t].values.length){var n=this.$textgrid[t].values[e+1];if(n){i&&(this.lazyFocusTextField=!0);var r=this.wavesurfer.wavesurfer.textgrid;r.setCurrent(t,n),this.seekTo(n.time,!0)}}else{var a=this.$textgrid[t].values[0];if(a){i&&(this.lazyFocusTextField=!0);var o=this.wavesurfer.wavesurfer.textgrid;o.setCurrent(t,a),this.seekTo(a.time,!0)}}},prevRecord:function(t,e,i){if(e-1>-1){var n=this.$textgrid[t].values[e-1];if(n){i&&(this.lazyFocusTextField=!0);var r=this.wavesurfer.wavesurfer.textgrid;r.setCurrent(t,n),this.seekTo(n.time,!0)}}else{var a=this.$textgrid[t].values,o=this.$textgrid[t].values[a.length-1];if(o){i&&(this.lazyFocusTextField=!0);var s=this.wavesurfer.wavesurfer.textgrid;s.setCurrent(t,o),this.seekTo(o.time,!0)}}},toStartRecord:function(t,e){if("interval"==this.$textgrid[t].type){if(e-1>-1){var i=this.$textgrid[t].values[e-1];this.seekTo(i.time,!0)}}else{var n=this.$textgrid[t].values[e];this.seekTo(n.time,!0)}this.focusTier(t)},toEndRecord:function(t,e){var i=this.$textgrid[t].values[e];this.seekTo(i.time,!0),this.focusTier(t)},extendRecord:function(t,e){var i=this.$textgrid[t],n=i.values[e],r=this.wavesurfer.getDuration(),a=e+1==i.length?r:i.values[e+1].time,o=n.time+this.frameRate;if(o<a){var s={text:n.text,time:o};this.wavesurfer.setTierValue(t,e,s),this.isSyncing||this.$vuewer.console.log(this.tag,"update time a record (key: ".concat(t," idx: ").concat(e,")")),this.seekTo(o)}},shrinkRecord:function(t,e){var i=this.$textgrid[t].values[e],n=0==e?0:this.$textgrid[t].values[e-1].time,r=this.$textgrid[t].type,a=i.time-this.frameRate;if(a>n){var o={text:i.text,time:a};if("interval"==r&&e==this.$textgrid[t].values.length-1)return;this.wavesurfer.setTierValue(t,e,o),this.isSyncing||this.$vuewer.console.log(this.tag,"update time a record (key: ".concat(t," idx: ").concat(e,")")),this.seekTo(a)}},splitRecord:function(t,e,i){this.$vuewer.console.log(this.tag,"split a record (key: ".concat(t," idx: ").concat(e,")")),"frames"==i?this.wavesurfer.splitTierValue(t,e,this.frameRate):"chars"==i?this.wavesurfer.splitTierValue(t,e):this.wavesurfer.splitTierValue(t,e,i)},tokenizeRecord:function(t,e,i){var n=this,r=this.$textgrid[t].values[e],a=this.$vuewer.text[i];a&&r.text&&a(r.text).then((function(i){if(i){var a={text:i.join("/"),time:r.time};n.wavesurfer.setTierValue(t,e,a)}}))},nextTier:function(){var t=this.current.tier.key,e=Object.keys(this.$textgrid),i=e.findIndex((function(e){return e==t}));-1!=i&&i+1<e.length&&this.focusTier(e[i+1])},prevTier:function(){var t=this.current.tier.key,e=Object.keys(this.$textgrid),i=e.findIndex((function(e){return e==t}));-1!=i&&i-1>-1&&this.focusTier(e[i-1])},focusTier:function(t){var e=this;setTimeout((function(){var i=e.wavesurfer.wavesurfer.textgrid;if(t!=e.current.tier.key){var n=e.$vuewer.math.nearest(e.$textgrid[t].values,"time",e.wavesurfer.getCurrentTime());i.setCurrent(t,n)}i.tiers[t].canvas.focus()}))},deleteTier:function(t){this.copyRecords(t),this.wavesurfer.deleteTier(t)},seekTo:function(t,e){var i=this.wavesurfer.getDuration(),n=t/i,r=n>1?1:n<0?0:n;e?this.wavesurfer.seekAndCenter(r):this.wavesurfer.seekTo(r)},fireUpdateTextGrid:function(){this.isSyncing||this.$emit("textgrid-updated",this.$textgrid)},fireUpdateData:function(){var t={textgrid:this.$textgrid,frames:this.$frames};this.$emit("data-updated",t)},onResize:function(t){this.$vuewer.console.log(this.tag,"on resize"),this.videoHeight=t},onDownloadClick:function(e){this.$vuewer.console.log(this.tag,"on download");var i=this.$store.state.current.video.filename.split(".")[0];if("XLSX"==e){var n={records:this.$store.getters["current/tgTable"],frames:this.$store.getters["current/frameTable"],points:this.$store.getters["current/pointTable"],rects:this.$store.getters["current/rectTable"]},r=this.$vuewer.io.xlsx.dump(n);this.$vuewer.io.file.download(r,"".concat(i,".xlsx"))}else if("JSON"==e)this.$emit("download-json");else if("PNG"==e)this.$refs.videoArray&&this.$refs.videoArray.downloadImage();else if("MP4"==e){var a=this.current.tier.key||Object.keys(this.$textgrid)[0];if(a){var o=this.$textgrid[a],s=this.current.tier.record.idx||0,c=o.values[s],l=this.wavesurfer.getDuration(),u=0,d=l;if("interval"==o.type)u=0==s?0:o.values[s-1].time,d=c.time;else{var f=c.time-this.playOffset,m=c.time+this.playOffset;u=f<0?0:f,d=m>l?l:m}var h=this.$store.state.current.video.filename.split(".")[0],v="".concat(h,".mp4"),p=this.$vuewer.io.file.toBuff(this.src),g=this.$vuewer.io.video.trim(p,u,d),x=g.MEMFS[0],b=this.$vuewer.io.video.toBlob(t(x.data));this.$vuewer.io.file.download(b,v)}}else if("TEXTGRID/JSON"==e){var y=new Blob([JSON.stringify(this.$textgrid,null,"  ")],{type:"application/json"});this.$vuewer.io.file.download(y,"".concat(i,"-records.json"))}else if("TEXTGRID/TEXTGRID"==e)this.wavesurfer.downloadTextGrid("".concat(i,".TextGrid"));else if("TEXTGRID/XLSX"==e){var w={records:this.$store.getters["current/tgTable"]},k=this.$vuewer.io.xlsx.dump(w);this.$vuewer.io.file.download(k,"".concat(i,"-records.xlsx"))}else if("FRAME/JSON"==e){var $=new Blob([JSON.stringify(this.$frames,null,"  ")],{type:"application/json"});this.$vuewer.io.file.download($,"".concat(i,"-frame.json"))}else if("FRAME/XLSX"==e){var _={frames:this.$store.getters["current/frameTable"],points:this.$store.getters["current/pointTable"],rects:this.$store.getters["current/rectTable"]},S=this.$vuewer.io.xlsx.dump(_);this.$vuewer.io.file.download(S,"".concat(i,".xlsx"))}else this.$vuewer.snackbar.warning("$vuetify.yet")},onUploadClick:function(t){var e=this;this.$vuewer.console.log(this.tag,"on upload: ".concat(t.click));var i=t.files[0];i&&("TEXTGRID/JSON"==t.click?this.$vuewer.io.json.read(i).then((function(t){e.wavesurfer.setTextGrid({});var i=e.$vuewer.io.obj.ver2.loadTextGrid(t);e.wavesurfer.setTextGrid(i),e.$vuewer.snackbar.success("$vuetify.loaded")})):"TEXTGRID/JSON/VER1"==t.click?this.$vuewer.io.json.read(i).then((function(t){e.wavesurfer.setTextGrid({});var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"both");e.wavesurfer.setTextGrid(i),e.$vuewer.snackbar.success("$vuetify.loaded")})):"TEXTGRID/JSON/VER1/LEFT"==t.click?this.$vuewer.io.json.read(i).then((function(t){e.wavesurfer.setTextGrid({});var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"left");e.wavesurfer.setTextGrid(i),e.$vuewer.snackbar.success("$vuetify.loaded")})):"TEXTGRID/JSON/VER1/RIGHT"==t.click?this.$vuewer.io.json.read(i).then((function(t){e.wavesurfer.setTextGrid({});var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"right");e.wavesurfer.setTextGrid(i),e.$vuewer.snackbar.success("$vuetify.loaded")})):"TEXTGRID/JSON/VER1/UP-DOWN"==t.click?this.$vuewer.io.json.read(i).then((function(t){e.wavesurfer.setTextGrid({});var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"up-down");e.wavesurfer.setTextGrid(i),e.$vuewer.snackbar.success("$vuetify.loaded")})):"TEXTGRID/TEXTGRID"==t.click?(this.wavesurfer.setTextGrid({}),this.wavesurfer.loadTextGrid(i),this.$vuewer.snackbar.success("$vuetify.loaded")):this.$vuewer.snackbar.warning("$vuetify.notAcceptable"))},onLoadeddata:function(t){var e=this;t&&(this.$vuewer.console.log(this.tag,"on loaded"),this.videoElm=t,this.$nextTick((function(){e.wavesurfer=e.$refs.wavesurfer,e.$refs.layout.onResize()})))},onFrameUpdated:function(t){this.$vuewer.console.log(this.tag,"on frame updated"),this.current.frame=t,this.lazyRular&&(this.dialog.ruler.show=!0,this.lazyRular=!1),this.lazyImageEdit&&(this.dialog.imageEdit.show=!0,this.lazyImageEdit=!1)},onSpectrogramRenderStart:function(){this.$vuewer.console.log(this.tag,"on spectrogram render start"),this.isLoading=!0},onSpectrogramRenderEnd:function(){if(this.$vuewer.console.log(this.tag,"on spectrogram render end"),this.textgrid){this.isSyncing=!0,this.wavesurfer.setTextGrid(this.textgrid);var t=Number(this.$route.query.start)||this.$frames[1].time;this.seekTo(t),this.current.tier.key=null,this.current.tier.values=[],this.current.tier.record.idx=0,this.current.tier.record.text="",this.current.tier.record.time=0,this.isSyncing=!1}this.isLoading=!1},onTextGridClick:function(t){this.wavesurfer.isPlaying()&&this.wavesurfer.pause(),this.current.key=t.key,this.current.time=t.time,t.ctrl&&"ctrl"==this.$addRecordKey&&1==t.detail&&this.addRecord(t.key,t.time),t.alt&&"alt"==this.$addRecordKey&&1==t.detail&&this.addRecord(t.key,t.time),t.item&&(this.current.text=t.item.text,this.current.time=t.item.time)},onTextGridDblClick:function(t){"dbl"==this.$addRecordKey&&this.addRecord(t.key,t.time)},onTextGridKeydown:function(t){var e=Number(Date.now()-this.keybuffer.time),i="textgrid"==this.keybuffer.from&e<150,n=i?this.keybuffer.keycode:null,r=this.$vuewer.key.summary(t),a=r.key,o=r.xKey,s=t.current;~[8,46].indexOf(a)?(this.$deleteRecordKey==o&&this.deleteRecord(s.key,s.index),this.$deleteRecordKey+"+shift"==o&&this.onClickTierDelete()):68==a&&(null==n&&"default"==o?this.deleteRecordText(s.key,s.index):68==n&&"default"==o&&this.deleteTier(s.key)),32==a&&"ctrl"==o&&this.addRecord(s.key,this.wavesurfer.getCurrentTime(),""),9==a&&"default"==o&&this.playRecord(s.key,s.index),187==a&&"ctrl+shift"==o&&(this.$minPxPerSec=this.$minPxPerSec+50),189==a&&"ctrl"==o&&this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50),~[37,74].indexOf(a)?"default"==o?this.wavesurfer.skipBackward():"ctrl"==o?this.prevRecord(s.key,s.index,!1):"ctrl+shift"==o?this.shrinkRecord(s.key,s.index):"ctrl+alt"==o&&this.toStartRecord(s.key,s.index):~[38,72].indexOf(a)&&"default"==o?this.prevTier():~[39,75].indexOf(a)?"default"==o?this.wavesurfer.skipForward():"ctrl"==o?this.nextRecord(s.key,s.index,!1):"ctrl+shift"==o?this.extendRecord(s.key,s.index):"ctrl+alt"==o&&this.toEndRecord(s.key,s.index):~[40,76].indexOf(a)&&"default"==o&&this.nextTier(),54==a&&"shift"==o?this.toStartRecord(s.key,s.index):52==a&&"shift"==o&&this.toEndRecord(s.key,s.index),67==a&&"ctrl"==o?this.copyRecord(s.key,s.index):67==a&&"ctrl+shift"==o&&this.onClickTierAdd(),86==a&&"ctrl"==o&&this.pasteRecord(s.key,s.index),89==a&&"default"==o?null==n?this.copyRecord(s.key,s.index):89==n&&this.copyRecords(s.key):80==a&&"default"==o&&this.paste(),83==a&&"ctrl"==o&&this.fireUpdateData(),(90==a&&"ctrl"==o||85==a&&"default"==o)&&this.rebaseTextgrid(),82==a&&"ctrl"==o&&this.onClickLoadDropbox(),73==a&&"default"==o&&(73==n?this.onClickImageEdit():this.$refs.input.focus()),79==n&&68==a&&"default"==o&&this.onClickComplate(),this.keybuffer.time=Date.now(),this.keybuffer.from="textgrid",this.keybuffer.keycode=t.keycode,this.keybuffer.xKey=o},onWaveSurferKeyup:function(t){var e=this,i=this.$vuewer.key.summary(t),n=i.key,r=i.xKey,a={key:this.current.tier.key,idx:this.current.tier.record.idx||0};"tab"==n&&"default"==r?this.playPause():"j"==n&&"default"==r?this.wavesurfer.skipBackward():"j"==n&&"ctrl"==r?this.prevRecord(a.key,a.idx,!1):"j"==n&&"ctrl+shift"==r?this.shrinkRecord(a.key,a.idx):"j"==n&&"ctrl+alt"==r?this.toStartRecord(a.key,a.idx):"k"==n&&"default"==r?this.wavesurfer.skipForward():"k"==n&&"ctrl"==r?this.nextRecord(a.key,a.idx,!1):"k"==n&&"ctrl+shift"==r?this.extendRecord(a.key,a.idx):"k"==n&&"ctrl+alt"==r?this.toEndRecord(a.key,a.idx):"s"==n&&"ctrl"==r?this.fireUpdateData():"z"==n&&"ctrl"==r||"u"==n&&"default"==r?this.rebaseTextgrid():"r"==n&&"ctrl"==r?this.onClickLoadDropbox():"i"==n&&"default"==r?(this.focusRecord(),setTimeout((function(){e.$refs.input.focus()}))):"i"==n&&"ctrl+shift"==r?this.onClickImageEdit():"c"==n&&"ctrl+shift"==r?this.onClickTierAdd():console.log("onWaveSurferKeyup",n,r,t)},onTableKeyup:function(t){var e=this.$vuewer.key.summary(t),i=e.key,n=e.xKey;"s"==i&&"ctrl"==n?this.fireUpdateData():"r"==i&&"ctrl"==n?this.onClickLoadDropbox():"i"==i&&"ctrl+shift"==n?this.onClickImageEdit():console.log("onTableKeyup",i,n,t)},onVideoArrayKeyup:function(t){var e=t.event,i=this.$vuewer.key.summary(e),n=i.key,r=i.xKey,a={key:this.current.tier.key,idx:this.current.tier.record.idx};"tab"==n&&"default"==r?this.playPause():"j"==n&&"default"==r?this.wavesurfer.skipBackward():"j"==n&&"ctrl"==r?this.prevRecord(a.key,a.idx,!1):"j"==n&&"ctrl+shift"==r?this.shrinkRecord(a.key,a.idx):"j"==n&&"ctrl+alt"==r?this.toStartRecord(a.key,a.idx):"k"==n&&"default"==r?this.wavesurfer.skipForward():"k"==n&&"ctrl + shift"==r?this.extendRecord(a.key,a.idx):"k"==n&&"ctrl + alt"==r?this.toEndRecord(a.key,a.idx):"k"==n&&"ctrl"==r?this.nextRecord(a.key,a.idx,!1):"s"==n&&"ctrl"==r?this.fireUpdateData():"r"==n&&"ctrl"==r?this.onClickLoadDropbox():"i"==n&&"ctrl+shift"==r?this.onClickImageEdit():console.log("onVideoArrayKeyup",t.ref,n,r,e)},onUpdateRecordText:function(t){var e=this.current.tier,i=e.key,n=e.record.idx,r=this.$textgrid[i].values[n];if(i){var a={time:r.time,text:e.record.text};this.wavesurfer.setTierValue(i,n,a),this.isSyncing||this.$vuewer.console.log(this.tag,"update text a record (key: ".concat(i," idx: ").concat(n,")")),"next"==t?this.nextRecord(i,n,!0):this.onEscTextField()}},onEscTextField:function(){var t=this,e=this.current.tier.key;setTimeout((function(){t.$refs.input.blur(),e&&t.focusTier(e)}))},onVoiceUpdateRecordText:function(){var t=this,e=window.webkitSpeechRecognition||window.SpeechRecognition||null;if(e){var i=new e;i.lang="ja"==this.$vuetify.lang.current?"ja-JP":"en-US",i.onresult=function(e){e.results[0].isFinal&&(t.current.tier.record.text=e.results[0][0].transcript,t.onUpdateRecordText())},i.start()}else this.$vuewer.snackbar.warn(this.$vuetify.lang.t("$vuetify.contexts.browserError"))},onTextGridUpdate:function(t){if(t){var e=this.$textgrid?Object.keys(this.$textgrid).length:0;this.$textgrid=Object.assign({},t);var i=Object.keys(this.$textgrid).length;this.isSyncing||(e!==i&&this.$store.commit("current/tab",i),this.fireUpdateTextGrid())}},onRecordUpdated:function(t){var e=this;this.current.tier.key=t.key,this.current.tier.values=this.$textgrid[t.key].values,this.current.tier.record.idx=t.index,t.item?(this.current.tier.record.time=t.item.time,this.current.tier.record.text=t.item.text):(this.current.tier.record.time=0,this.current.tier.record.text=""),this.lazyFocusTextField&&(setTimeout((function(){e.$refs.input.focus()})),this.lazyFocusTextField=!1)},onClickNoiseReduction:function(t){var e=this;setTimeout((function(){e.$emit("run-noise-reduction",t)}),100)},onClickDetail:function(){this.$vuewer.console.log(this.tag,"on click detail"),this.$store.state.current.layout.mini?this.dialog.textgrid.show=!0:this.dialog.detail.show=!0},onClickSetting:function(){this.$vuewer.console.log(this.tag,"on click setting"),this.dialog.setting.show=!0},onClickRuler:function(t){this.$vuewer.console.log(this.tag,"on click ruler"),t?(this.lazyRular=!0,this.seekTo(t)):this.dialog.ruler.show=!0},onClickImageEdit:function(t){this.$vuewer.console.log(this.tag,"on click image edit"),t?(this.lazyImageEdit=!0,this.seekTo(t)):this.dialog.imageEdit.show=!0},onClickTierAdd:function(){this.$vuewer.console.log(this.tag,"on click tier add"),this.dialog.tier.show=!0},onClickTierEdit:function(){this.$vuewer.console.log(this.tag,"on click tier edit"),this.dialog.tierEdit.show=!0},onClickTierDelete:function(){this.$vuewer.console.log(this.tag,"on click tier delete"),this.dialog.tierDelete.show=!0},onClickComplate:function(){this.$vuewer.console.log(this.tag,"on click complate"),this.dialog.complates.show=!0},onClickLoadDropbox:function(){var t=this,e=this.$store.getters["current/video/dropboxPath"];null!==e&&this.$vuewer.dropbox.hasToken()?(this.$vuewer.loading.start("$vuetify.loading"),this.$vuewer.dropbox.read(e).then((function(e){var i=JSON.parse(e);t.$store.dispatch("current/loadObj",i),t.$vuewer.snackbar.success("$vuetify.loaded")})).catch((function(e){var i="DROPBOX ERROR: ".concat(e.status," :").concat(e.error.error_summary);409==e.status&&(i="$vuetify.notFound"),t.$vuewer.snackbar.error(i)})).finally((function(){return t.$vuewer.loading.end()}))):this.$vuewer.dropbox.auth()},onClickRecordContextMenu:function(t){if(this.current.tier.key){var e=this.current.tier.record,i=this.current.tier.key;"play"==t?this.playRecord(i,e.idx):"copy"==t?this.copyRecord(i,e.idx):"paste"==t?this.pasteRecord(i,e.idx):"next"==t?this.nextRecord(i,e.idx,!1):"prev"==t?this.prevRecord(i,e.idx,!1):"to-start"==t?this.toStartRecord(i,e.idx):"to-end"==t?this.toEndRecord(i,e.idx):"extend"==t?this.extendRecord(i,e.idx):"shrink"==t?this.shrinkRecord(i,e.idx):"split-by-frames"==t?this.splitRecord(i,e.idx,"frames"):"split-by-chars"==t?this.splitRecord(i,e.idx,"chars"):"split-by-slash"==t?this.splitRecord(i,e.idx,"/"):("owakati"==t||"oyomi"==t||"opronunciation"==t||"obasic"==t||"opos"==t)&&this.tokenizeRecord(i,e.idx,t)}else this.$vuewer.snackbar.warning("$vuetify.textgrid.tier.record.no")},onPointsUpdated:function(t){this.current.frame.points=t,this.$store.dispatch("current/updateFrame",this.current.frame),this.$emit("frame-point-updated",this.current.frame),this.$vuewer.console.log(this.tag,"update points (idx: ".concat(this.$frameIdx,")"))},onRectsUpdated:function(t){this.current.frame.rects=t,this.$store.dispatch("current/updateFrame",this.current.frame),this.$emit("frame-rect-updated",this.current.frame),this.$vuewer.console.log(this.tag,"update rects (idx: ".concat(this.$frameIdx,")"))},onPointDeleted:function(t){var e=this.current.frame.points.findIndex((function(e){return e.id==t.id}));-1!==e&&(this.current.frame.points.splice(e,1),this.$store.dispatch("current/updateFrame",this.current.frame),this.$emit("frame-point-deleted",t),this.$vuewer.console.log(this.tag,"delete point (idx: ".concat(this.$frameIdx,": id ").concat(t.id,")")))},onRectDeleted:function(t){var e=this.current.frame.rects.findIndex((function(e){return e.id==t.id}));-1!==e&&(this.current.frame.rects.splice(e,1),this.$store.dispatch("current/updateFrame",this.current.frame),this.$emit("frame-rect-deleted",t),this.$vuewer.console.log(this.tag,"delete rect (idx: ".concat(this.$frameIdx,", id: ").concat(t.id,")")))},onMouseover:function(t){this.where=t},onForwardBtnUp:function(t){if(t.ctrl)this.$minPxPerSec=this.$minPxPerSec+50;else if("wave-surfer"==this.where){var e=this.current.tier.key;if(e){var i=this.current.tier.record;this.nextRecord(e,i.idx,!1)}else this.wavesurfer.skipForward()}else this.wavesurfer.skipForward()},onBackBtnUp:function(t){if(t.ctrl)this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50);else if("wave-surfer"==this.where){var e=this.current.tier.key;if(e){var i=this.current.tier.record;this.prevRecord(e,i.idx,!1)}else this.wavesurfer.skipBackward()}else this.wavesurfer.skipBackward()},onLayoutMouseUp:function(t){var e=this;if(1==t.button)t.preventDefault(),t.ctrlKey?this.$store.commit("drawer",!0):t.altKey?this.$store.commit("logging/show",!0):this.fab=!this.fab;else if(3==t.button){t.preventDefault(),t.stopPropagation();var i={ctrl:t.ctrlKey,meta:t.metaKey,alt:t.altKey,shift:t.shift};e.onBackBtnUp(i)}else if(4==t.button){t.preventDefault(),t.stopPropagation();var n={ctrl:t.ctrlKey,meta:t.metaKey,alt:t.altKey,shift:t.shift};e.onForwardBtnUp(n)}}},mounted:function(){this.$store.dispatch("current/init"),this.$frames=[],this.$frames=this.frames,this.minPxPerSec=this.$minPxPerSec,this.$store.dispatch("search/show");var t=this.$refs.layout;if(t){var e=t.$el;e.addEventListener("mouseup",this.onLayoutMouseUp,{passive:!1})}},beforeDestroy:function(){this.$store.dispatch("current/init"),this.$store.dispatch("search/init");var t=this.$refs.layout,e=t.$el;e.removeEventListener("mouseup",this.onLayoutMouseUp)}}}).call(this,i("1c35").Buffer)},ea1e:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"warning darken-1",title:t.$vuetify.lang.t(t.title),"max-width":"700"},scopedSlots:t._u([{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.onClose}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{on:{click:t.playPause}},[i("video",{ref:"video",style:t.videoStyle,attrs:{src:t.$src,controls:""},on:{pause:t.onPause,play:t.onPlay}})])],1)},r=[],a=(i("99af"),i("a9e3"),i("9621")),o={name:"m-video-dialog",components:{MCardDialog:a["a"]},data:function(){return{isPlaying:!1,title:"Video Dialog",videoStyle:{width:"100%",height:"auto"}}},props:{value:{type:Boolean,required:!0},src:{type:String,required:!0},start:{type:Number,default:0},end:{type:Number,default:0}},computed:{$src:function(){return 0!==this.end?"".concat(this.src,"#t=").concat(this.start,",").concat(this.end):this.src},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{playPause:function(){this.$refs.video&&(this.isPlaying?this.$refs.video.pause():this.$refs.video.play())},onPlay:function(){if(this.isPlaying=!0,0!==this.end){var t=this.end-this.start,e=this.$refs.video;setTimeout((function(){e.pause()}),1e3*t)}},onPause:function(){this.isPlaying=!1,this.$refs.video.currentTime=this.start},onClose:function(){this.isPlaying&&this.$refs.video.pause(),this.$refs.video.currentTime=this.start,this.dialog=!1}}},s=o,c=i("2877"),l=i("6544"),u=i.n(l),d=i("8336"),f=i("b0af"),m=i("132d"),h=Object(c["a"])(s,n,r,!1,null,"fbf7ee76",null);e["a"]=h.exports;u()(h,{VBtn:d["a"],VCard:f["a"],VIcon:m["a"]})},ed08:function(t,e,i){"use strict";var n=i("edc0"),r=(i("c975"),i("b64b"),i("ac1f"),i("5319"),i("1276"),i("fcf4")),a=function(t,e){if(~t.indexOf("#"))return t;var i=e.theme.themes.light,n=Object.keys(i);if(-1!==n.indexOf(t))return i[t];var a=t.split(" "),o=r["a"][a[0]];if(o){if(2==a.length){var s=a[1].replace(/-/g,"");return r["a"][a[0]][s]}return r["a"][a[0]].base}return i.primary},o={toCss:a},s=i("2db4"),c=(i("d3b7"),i("6d61")),l=i.n(c),u=function(t,e){return new Promise((function(i,n){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var a=r.getContext("2d"),o=new Image;o.src=t,o.onload=function(){a.drawImage(o,0,0,e.width,e.height);try{var t=l.a.imread(r),s=new l.a.Mat;l.a.cvtColor(t,t,l.a.COLOR_RGBA2GRAY,0),l.a.adaptiveThreshold(t,s,200,l.a.ADAPTIVE_THRESH_GAUSSIAN_C,l.a.THRESH_BINARY,3,2);var c=document.createElement("canvas");l.a.imshow(c,s),i(c.toDataURL())}catch(u){n(u)}}}))},d={adaptiveThreshold:u},f=i("3b4d");e["a"]={color:o,image:d,text:s["a"],math:n["a"],dropbox:f["a"]}},edbd:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[i("v-card-actions",{class:"elevation-"+(n?6:4)+" blue-grey darken-4",on:{mouseover:function(e){return t.$emit("mouseover")}}},[i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:function(e){return t.skip(-t.longSkip/t.fps)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-backward")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.skipBackward}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-previous")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.decPxPerSec}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-magnify-minus")])],1),i("m-video-upload-menu",{on:{click:t.onUploadClick}}),i("v-spacer"),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.playPause}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-play-pause")])],1),i("v-spacer"),i("m-video-download-menu",{on:{click:function(e){return t.$emit("download-click",e)}}}),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.incPxPerSec}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-magnify-plus")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.skipForward}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-next")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:function(e){return t.skip(t.longSkip/t.fps)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-forward")])],1)],1)]}}])})},r=[],a=(i("a9e3"),i("53ca")),o=i("27a3"),s=i("5c65"),c=i("41e7"),l={name:"WVuewerActions",mixins:[o["a"]],components:{MVideoDownloadMenu:s["a"],MVideoUploadMenu:c["a"]},props:{fps:{type:Number,required:!0},longSkip:{type:Number,default:5}},computed:{$minPxPerSec:{get:function(){return this.$store.state.setting.minPxPerSec},set:function(t){var e=Object(a["a"])(t),i=null;"number"==e?i=t:"string"==e&&(i=Number(t)),i&&this.$store.commit("setting/setMinPxPerSec",i)}}},methods:{onUploadClick:function(t){this.$emit("upload-click",t)},incPxPerSec:function(){this.$minPxPerSec<700&&(this.$minPxPerSec=this.$minPxPerSec+50)},decPxPerSec:function(){this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50)}}},u=l,d=i("2877"),f=i("6544"),m=i.n(f),h=i("8336"),v=i("99d9"),p=i("ce87"),g=i("132d"),x=i("2fa4"),b=Object(d["a"])(u,n,r,!1,null,"6f019bd3",null);e["a"]=b.exports;m()(b,{VBtn:h["a"],VCardActions:v["a"],VHover:p["a"],VIcon:g["a"],VSpacer:x["a"]})},edc0:function(t,e,i){"use strict";i("a630"),i("a15b"),i("d81d"),i("fb6a"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0");var n=function(t,e,i){var n=t.map((function(t){return{val:i<t[e]?1e5:Math.abs(i-t[e]),obj:t}})).sort((function(t,e){return t.val<e.val?1:t.val>e.val?-1:0}))[0];return n.obj};function r(t){return Array.from(new Set(t))}var a=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},o=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function s(t,e){return(Array(e).join("0")+t).slice(-e)}e["a"]={nearest:n,distance:o,round:a,padding:s,uniq:r}},ee5b:function(t,e,i){"use strict";i("a9e3");var n=i("53ca");e["a"]={computed:{$showFrameInVideo:{get:function(){return this.$store.state.setting.showFrameInVideo},set:function(t){this.$store.commit("setting/showFrameInVideo",t)}},$showPointsInVideo:{get:function(){return this.$store.state.setting.showPointsInVideo},set:function(t){this.$store.commit("setting/showPointsInVideo",t)}},$showRectsInVideo:{get:function(){return this.$store.state.setting.showRectsInVideo},set:function(t){this.$store.commit("setting/showRectsInVideo",t)}},$syncDropbox:{get:function(){return this.$store.state.setting.syncDropbox},set:function(t){this.$store.commit("setting/syncDropbox",t)}},$showDev:{get:function(){return this.$store.state.setting.showDev},set:function(t){this.$store.commit("setting/showDev",t)}},$maxVideoSize:{get:function(){return this.$store.state.setting.maxVideoSize},set:function(t){var e=Object(n["a"])(t);"number"==e?this.$store.commit("setting/setMaxVideoSize",t):"string"==e&&Number(t)&&this.$store.commit("setting/setMaxVideoSize",Number(t))}},$shouldMovePageAferAddingFile:{get:function(){return this.$store.state.setting.shouldMovePageAferAddingFile},set:function(t){this.$store.commit("setting/shouldMovePageAferAddingFile",t)}},$shouldGetVideoInfo:{get:function(){return this.$store.state.setting.shouldGetVideoInfo},set:function(t){this.$store.commit("setting/setShouldGetVideoInfo",t)}},$shouldGetFrameInfo:{get:function(){return this.$store.state.setting.shouldGetFrameInfo},set:function(t){this.$store.commit("setting/setShouldGetFrameInfo",t)}},$minPxPerSec:{get:function(){return this.$store.state.setting.minPxPerSec},set:function(t){var e=Object(n["a"])(t),i=null;"number"==e?i=t:"string"==e&&(i=Number(t)),i&&this.$store.commit("setting/setMinPxPerSec",i)}},$freqRate:{get:function(){return this.$store.state.setting.freqRate},set:function(t){var e=Object(n["a"])(t);"number"==e?this.$store.commit("setting/setFreqRate",t):"string"==e&&Number(t)&&this.$store.commit("setting/setFreqRate",Number(t))}},$targetChannel:{get:function(){return this.$store.state.setting.targetChannel},set:function(t){this.$store.commit("setting/setTargetChannel",t)}},$spectrogramHeight:{get:function(){return this.$store.state.setting.spectrogramHeight},set:function(t){this.$store.commit("setting/setSpectrogramHeight",t)}},$showTimeLine:{get:function(){return this.$store.state.setting.showTimeLine},set:function(t){this.$store.commit("setting/setShowTimeLine",t)}},$showSpectrogram:{get:function(){return this.$store.state.setting.showSpectrogram},set:function(t){this.$store.commit("setting/setShowSpectrogram",t)}},$showFreqLabel:{get:function(){return this.$store.state.setting.showFreqLabel},set:function(t){this.$store.commit("setting/setShowFreqLabel",t)}},$cursorColor:{get:function(){return this.$store.state.setting.cursorColor},set:function(t){this.$store.commit("setting/setCursorColor",t)}},$waveColor:{get:function(){return this.$store.state.setting.waveColor},set:function(t){this.$store.commit("setting/setWaveColor",t)}},$progressColor:{get:function(){return this.$store.state.setting.progressColor},set:function(t){this.$store.commit("setting/setProgressColor",t)}},$addRecordKey:{get:function(){return this.$store.state.setting.addRecordKey},set:function(t){this.$store.commit("setting/setAddRecordKey",t)}},$deleteRecordKey:{get:function(){return this.$store.state.setting.deleteRecordKey},set:function(t){this.$store.commit("setting/setDeleteRecordKey",t)}},$playOffset:{get:function(){return this.$store.state.setting.playOffset},set:function(t){var e=Object(n["a"])(t);"number"==e?this.$store.commit("setting/setPlayOffset",t):"string"==e&&Number(t)&&this.$store.commit("setting/setPlayOffset",Number(t))}},$nameSep:{get:function(){return this.$store.state.setting.nameSep},set:function(t){this.$store.commit("setting/nameSep",t)}},$nameFormat:{get:function(){return this.$store.state.setting.nameFormat},set:function(t){this.$store.commit("setting/nameFormat",t)}}},methods:{setDefaultSetting:function(){this.$store.dispatch("setting/setDefault")}}}},f4a9:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{headers:t.headers,items:t.points},scopedSlots:t._u([{key:"item.label",fn:function(e){return[i("v-edit-dialog",{attrs:{"return-value":e.item.label},on:{"update:returnValue":function(i){return t.$set(e.item,"label",i)},"update:return-value":function(i){return t.$set(e.item,"label",i)},close:function(i){return t.close(e.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[i("v-text-field",{attrs:{rules:[t.max25chars],label:"Edit","single-line":"",counter:""},model:{value:e.item.label,callback:function(i){t.$set(e.item,"label",i)},expression:"props.item.label"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.item.label)+" ")])]}},t.showFrame?{key:"item.time",fn:function(e){return[t._v(" "+t._s(t.$vuewer.math.round(e.item.frame.time,3))+" ")]}}:null,{key:"item.x",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.x/t.cw*t.ow))+" ")]}},{key:"item.y",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.y/t.ch*t.oh))+" ")]}},{key:"item.color",fn:function(e){return[i("m-color-menu",{attrs:{icon:""},on:{input:function(i){return t.close(e.item)}},model:{value:e.item.color,callback:function(i){t.$set(e.item,"color",i)},expression:"props.item.color"}})]}}],null,!0)})},r=[],a=i("b8b8"),o={name:"m-point-table",components:{MColorMenu:a["a"]},props:{showFrame:{type:Boolean,default:!1},points:{type:Array,require:!0},originSize:{type:Object,require:!0},canvasSize:{type:Object,require:!0}},computed:{ow:function(){return this.originSize.width?this.originSize.width:0},oh:function(){return this.originSize.height?this.originSize.height:0},cw:function(){return this.canvasSize.width?this.canvasSize.width:0},ch:function(){return this.canvasSize.height?this.canvasSize.width:0},headers:function(){return this.showFrame?[{text:"label",value:"label"},{text:"frame",value:"frame.idx"},{text:"time",value:"time"},{text:"x",value:"x"},{text:"y",value:"y"},{text:"color",value:"color"}]:[{text:"label",value:"label"},{text:"x",value:"x"},{text:"y",value:"y"},{text:"color",value:"color"}]}},data:function(){return{max25chars:function(t){return t.length<=25||"Input too long!"},pagination:{}}},methods:{close:function(t){this.$emit("update-point",t)}}},s=o,c=i("2877"),l=i("6544"),u=i.n(l),d=i("8fea"),f=i("7679"),m=i("8654"),h=Object(c["a"])(s,n,r,!1,null,"4eb58998",null);e["a"]=h.exports;u()(h,{VDataTable:d["a"],VEditDialog:f["a"],VTextField:m["a"]})},f7d6:function(t,e,i){"use strict";(function(t){i("99af"),i("d81d"),i("d3b7"),i("ac1f"),i("841c"),i("1276"),i("498a"),i("ddb0");var n=i("9de5"),r=i("27a3"),a=i("21f0"),o=i("edc0");e["a"]={name:"WTextGridTable",components:{MLoadingDialog:n["a"]},mixins:[r["a"]],props:{videoHeight:{default:null},title:{type:String},tier:{type:Object}},data:function(){return{editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0}}},computed:{headers:function(){var t=[];return this.tier&&("interval"==this.tier.type?(t.push({text:"Start Time (sec)",value:"start"}),t.push({text:"End Time (sec)",value:"end"})):t.push({text:"Time (sec)",value:"time"})),t.push({text:"Text",value:"text"}),t.push({text:"Actions",value:"actions",sortable:!1,align:"end"}),t},items:function(){var t=this;return this.tier?"interval"==this.tier.type?(this.tier.values.map((function(e,i){return e.idx=i,e.start=0==i?0:t.tier.values[i-1].time,e.end=e.time,e})),this.tier.values):this.tier.values.map((function(t,e){var i={idx:e,time:t.time,text:t.text};return i})):[]},keyword:function(){return this.$store.state.search.keyword}},methods:{deleteItem:function(t){var e=this;setTimeout((function(){1==e.items.length?e.deleteTier(e.title):e.deleteTierValue(e.title,t.idx)}),100)},trimVideo:function(e,i){var n=this.$store.state.current.video.source,r=this.$store.state.current.video.filename.split(".")[0],s=String(o["a"].round(e,3))+"-"+String(o["a"].round(i,3)),c="".concat(r,"-").concat(s,".mp4");if(n){var l=a["a"].file.toBuff(n),u=a["a"].video.trim(l,e,i),d=u.MEMFS[0],f=a["a"].video.toBlob(t(d.data));a["a"].file.download(f,c)}},close:function(){var t=this;this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))}}}}).call(this,i("1c35").Buffer)},fa48:function(t,e,i){"use strict";var n=i("59bd"),r=i.n(n);r.a}});
//# sourceMappingURL=app.f0ae2de6.js.map